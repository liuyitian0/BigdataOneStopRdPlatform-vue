!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).S2={})}(this,(function(t){"use strict";var e,n,r,i=Object.freeze({__proto__:null,get Base(){return lp},get Circle(){return hp},get Ellipse(){return pp},get Image(){return gp},get Line(){return Cp},get Marker(){return Sp},get Path(){return Ap},get Polygon(){return Np},get Polyline(){return kp},get Rect(){return Fp},get Text(){return Gp}});t.InteractionEvent=void 0,(e=t.InteractionEvent||(t.InteractionEvent={})).DATA_CELL_CLICK_EVENT="interaction:data-cell-click",e.MERGED_CELLS_CLICK_EVENT="interaction:merged-cells-click",e.CORNER_TEXT_CLICK_EVENT="interaction:corner-cell-text-click",e.ROW_COLUMN_CLICK_EVENT="interaction:row-column-click",e.ROW_TEXT_CLICK_EVENT="interaction:row-text-click",e.HOVER_EVENT="interaction:hover",e.TREND_ICON_CLICK="interaction:trend-icon-click",t.OriginEventType=void 0,(n=t.OriginEventType||(t.OriginEventType={})).MOUSE_DOWN="mousedown",n.MOUSE_MOVE="mousemove",n.MOUSE_OUT="mouseout",n.MOUSE_LEAVE="mouseleave",n.MOUSE_UP="mouseup",n.KEY_DOWN="keydown",n.KEY_UP="keyup",n.CLICK="click",n.HOVER="hover",n.DOUBLE_CLICK="dblclick",n.CONTEXT_MENU="contextmenu",t.S2Event=void 0,(r=t.S2Event||(t.S2Event={})).ROW_CELL_COLLAPSE_TREE_ROWS="row-cell:collapsed-tree-rows",r.ROW_CELL_CLICK="row-cell:click",r.ROW_CELL_DOUBLE_CLICK="row-cell:double-click",r.ROW_CELL_HOVER="row-cell:hover",r.ROW_CELL_MOUSE_DOWN="row-cell:mouse-down",r.ROW_CELL_MOUSE_UP="row-cell:mouse-up",r.ROW_CELL_MOUSE_MOVE="row-cell:mouse-move",r.COL_CELL_HOVER="col-cell:hover",r.COL_CELL_CLICK="col-cell:click",r.COL_CELL_DOUBLE_CLICK="col-cell:double-click",r.COL_CELL_MOUSE_DOWN="col-cell:mouse-down",r.COL_CELL_MOUSE_UP="col-cell:mouse-up",r.COL_CELL_MOUSE_MOVE="col-cell:mouse-move",r.DATA_CELL_HOVER="data-cell:hover",r.DATA_CELL_CLICK="data-cell:click",r.DATA_CELL_DOUBLE_CLICK="data-cell:double-click",r.DATA_CELL_MOUSE_UP="data-cell:mouse-up",r.DATA_CELL_MOUSE_DOWN="data-cell:mouse-down",r.DATA_CELL_MOUSE_MOVE="data-cell:mouse-move",r.DATA_CELL_TREND_ICON_CLICK="data-cell:trend-icon-click",r.DATE_CELL_BRUSH_SELECTION="data-cell:brush-selection",r.CORNER_CELL_CLICK="corner-cell:click",r.CORNER_CELL_DOUBLE_CLICK="corner-cell:double-click",r.CORNER_CELL_MOUSE_UP="corner-cell:mouse-up",r.CORNER_CELL_MOUSE_MOVE="corner-cell:mouse-move",r.CORNER_CELL_HOVER="corner-cell:hover",r.CORNER_CELL_MOUSE_DOWN="corner-cell:mouse-down",r.MERGED_CELLS_MOUSE_UP="merged-cells:mouse-up",r.MERGED_CELLS_MOUSE_MOVE="merged-cells:mouse-move",r.MERGED_CELLS_HOVER="merged-cells:hover",r.MERGED_CELLS_CLICK="merged-cells:click",r.MERGED_CELLS_DOUBLE_CLICK="merged-cells:double-click",r.MERGED_CELLS_MOUSE_DOWN="merged-cells:mouse-down",r.RANGE_SORT="sort:range-sort",r.RANGE_SORTED="sort:range-sorted",r.RANGE_FILTER="filter:range-filter",r.RANGE_FILTERED="filter:range-filtered",r.LAYOUT_AFTER_HEADER_LAYOUT="layout:after-header-layout",r.LAYOUT_COL_NODE_BORDER_REACHED="layout:col-node-border-reached",r.LAYOUT_ROW_NODE_BORDER_REACHED="layout:row-node-border-reached",r.LAYOUT_CELL_SCROLL="layout:cell-scroll",r.LAYOUT_PAGINATION="layout:pagination",r.LAYOUT_COLLAPSE_ROWS="layout:collapsed-rows",r.LAYOUT_AFTER_COLLAPSE_ROWS="layout:after-collapsed-rows",r.LAYOUT_TREE_ROWS_COLLAPSE_ALL="layout:toggle-collapse-all",r.LAYOUT_TABLE_COL_EXPANDED="layout:table-col-expanded",r.LAYOUT_TABLE_COL_HIDDEN="layout:table-col-hidden",r.LAYOUT_AFTER_RENDER="layout:after-render",r.LAYOUT_BEFORE_RENDER="layout:before-render",r.LAYOUT_RESIZE="layout:resize",r.LAYOUT_RESIZE_SERIES_WIDTH="layout:resize-series-width",r.LAYOUT_RESIZE_ROW_WIDTH="layout:resize-row-width",r.LAYOUT_RESIZE_ROW_HEIGHT="layout:resize-row-height",r.LAYOUT_RESIZE_COL_WIDTH="layout:resize-column-width",r.LAYOUT_RESIZE_COL_HEIGHT="layout:resize-column-height",r.LAYOUT_RESIZE_TREE_WIDTH="layout:resize-tree-width",r.LAYOUT_RESIZE_MOUSE_DOWN="layout:resize:mouse-down",r.LAYOUT_RESIZE_MOUSE_MOVE="layout:resize:mouse-move",r.LAYOUT_RESIZE_MOUSE_UP="layout:resize-mouse-up",r.GLOBAL_KEYBOARD_DOWN="global:keyboard-down",r.GLOBAL_KEYBOARD_UP="global:keyboard-up",r.GLOBAL_COPIED="global:copied",r.GLOBAL_MOUSE_UP="global:mouse-up",r.GLOBAL_ACTION_ICON_CLICK="global:action-icon-click",r.GLOBAL_ACTION_ICON_HOVER="global:action-icon-hover",r.GLOBAL_CONTEXT_MENU="global:context-menu",r.GLOBAL_SELECTED="global:selected",r.GLOBAL_HOVER="global:hover",r.GLOBAL_RESET="global:reset",r.GLOBAL_LINK_FIELD_JUMP="global:link-field-jump";var o,a,s="$$value$$",l="$$extra$$",u="$$total$$",h="$$series_number$$",c="backGroundGroup",d="foreGroundGroup",p="panelGroup",f="panelScrollGroup",v="frozenRowGroup",g="frozenColGroup",y="frozenTrailingRowGroup",m="frozenTrailingColGroup",C="frozenTopGroup",w="frozenBottomGroup",x="rowResizeAreaGroup",S="rowIndexResizeAreaGroup",E="cornerResizeAreaGroup",T="colResizeAreaGroup",b="colFrozenResizeAreaGroup",_="colScrollGroup",L="colFrozenGroup",O="colFrozenTrailingGroup",I="series-number-node",R="horizontal-resize-area-",M="root",A="[&]",B=/^root\[&\]*/,D="image",N="antv-s2",P="valueRanges",k={},z={data:[],totalData:[],fields:{rows:[],columns:[],values:[],customTreeItems:[],valueInCols:!0},meta:[],sortParams:[],filterParams:[]};t.FrozenCellType=void 0,(a=t.FrozenCellType||(t.FrozenCellType={})).ROW="row",a.COL="col",a.TRAILING_ROW="trailingRow",a.TRAILING_COL="trailingCol",a.SCROLL="scroll",a.TOP="top",a.BOTTOM="bottom";var F,H,G,W=((o={})[t.FrozenCellType.ROW]="frozenRowGroup",o[t.FrozenCellType.COL]="frozenColGroup",o[t.FrozenCellType.TRAILING_COL]="frozenTrailingColGroup",o[t.FrozenCellType.TRAILING_ROW]="frozenTrailingRowGroup",o[t.FrozenCellType.SCROLL]="panelScrollGroup",o[t.FrozenCellType.TOP]="frozenTopGroup",o[t.FrozenCellType.BOTTOM]="frozenBottomGroup",o);t.InteractionName=void 0,(F=t.InteractionName||(t.InteractionName={})).DATA_CELL_CLICK="dataCellClick",F.MERGED_CELLS_CLICK="mergedCellsClick",F.ROW_COLUMN_CLICK="rowColumnClick",F.ROW_TEXT_CLICK="rowTextClick",F.HOVER="hover",F.BRUSH_SELECTION="brushSelection",F.COL_ROW_RESIZE="rowColResize",F.COL_ROW_MULTI_SELECTION="colRowMultiSelection",F.COL_ROW_SHIFT_MULTI_SELECTION="colRowShiftMultiSelection",t.InteractionStateName=void 0,(H=t.InteractionStateName||(t.InteractionStateName={})).ALL_SELECTED="allSelected",H.SELECTED="selected",H.UNSELECTED="unselected",H.HOVER="hover",H.HOVER_FOCUS="hoverFocus",H.PREPARE_SELECT="prepareSelect",t.CellTypes=void 0,(G=t.CellTypes||(t.CellTypes={})).DATA_CELL="dataCell",G.HEADER_CELL="headerCell",G.ROW_CELL="rowCell",G.COL_CELL="colCell",G.CORNER_CELL="cornerCell",G.MERGED_CELL="mergedCell";var Y,U,V,j,X,K={textOpacity:"fillOpacity",backgroundOpacity:"fillOpacity",backgroundColor:"fill",borderOpacity:"strokeOpacity",borderColor:"stroke",borderWidth:"lineWidth",opacity:"opacity"},$={textShape:["textOpacity"],linkFieldShape:["opacity"],interactiveBgShape:["backgroundColor","backgroundOpacity"],interactiveBorderShape:["borderColor","borderOpacity","borderWidth"]},q="interactionStateInfo";t.InteractionBrushSelectionStage=void 0,(Y=t.InteractionBrushSelectionStage||(t.InteractionBrushSelectionStage={})).CLICK="click",Y.UN_DRAGGED="unDragged",Y.DRAGGED="dragged",t.InteractionKeyboardKey=void 0,(U=t.InteractionKeyboardKey||(t.InteractionKeyboardKey={})).SHIFT="Shift",U.COPY="c",U.ESC="Escape",U.META="Meta",t.SortMethodType=void 0,(V=t.SortMethodType||(t.SortMethodType={})).ASC="ASC",V.DESC="DESC",t.InterceptType=void 0,(j=t.InterceptType||(t.InterceptType={})).HOVER="hover",j.CLICK="click",j.BRUSH_SELECTION="brushSelection",j.MULTI_SELECTION="multiSelection",j.RESIZE="resize",t.LayoutWidthTypes=void 0,(X=t.LayoutWidthTypes||(t.LayoutWidthTypes={})).Adaptive="adaptive",X.ColAdaptive="colAdaptive",X.Compact="compact";var Z={layoutWidthType:t.LayoutWidthTypes.Adaptive,treeRowsWidth:120,collapsedRows:{},collapsedCols:{},cellCfg:{width:96,height:30},rowCfg:{width:96,widthByField:{}},colCfg:{height:30,widthByFieldValue:{},heightByField:{},totalSample:10,detailSample:30,maxSampleIndex:1},device:"pc"},Q={width:600,height:480,debug:!1,hierarchyType:"grid",conditions:{},totals:{},tooltip:{showTooltip:!1,autoAdjustBoundary:"body",operation:{hiddenColumns:!1,trend:!1,sort:!1}},interaction:{linkFields:[],hiddenColumnFields:[],selectedCellsSpotlight:!1,hoverHighlight:!0,scrollSpeedRatio:{horizontal:1,vertical:1},autoResetSheetStyle:!0},showSeriesNumber:!1,scrollReachNodeField:{},customSVGIcons:[],customHeaderCells:null,showDefaultHeaderActionIcon:!1,headerActionIcons:[],style:Z,frozenRowHeader:!0,frozenRowCount:0,frozenColCount:0,frozenTrailingRowCount:0,frozenTrailingColCount:0,hdAdapter:!0},J={default:{basicColors:["#000000","#f7faff","#E1EAFE","#E1EAFE","#CCDBFD","#2C60D3","#0000EE","#326EF4","#FFFFFF","#EBF2FF","#D6E3FE","#3471F9","#3471F9","#282B33","#121826"],semanticColors:{red:"#FF4D4F",green:"#29A294"}},colorful:{basicColors:["#FFFFFF","#F4F7FE","#DDE7FD","#3471F9","#2C60D3","#2C60D3","#0000EE","#326EF4","#FFFFFF","#E0E9FE","#5286F9","#5286F9","#3471F9","#282B33","#121826"],semanticColors:{red:"#FF4D4F",green:"#29A294"}},gray:{basicColors:["#000000","#FcFcFd","#F4F5F7","#F3F4F6","#E7E8EA","#CECFD1","#A9AAAB","#616162","#FFFFFF","#F2F2F2","#E8E6E6","#D1D4DC","#BEC2CB","#282B33","#121826"],semanticColors:{red:"#FF4D4F",green:"#29A294"}}},tt="Roboto, PingFangSC, BlinkMacSystemFont, Microsoft YaHei, Arial, sans-serif",et="object"==typeof global&&global&&global.Object===Object&&global,nt="object"==typeof self&&self&&self.Object===Object&&self,rt=et||nt||Function("return this")(),it=rt.Symbol,ot=Object.prototype,at=ot.hasOwnProperty,st=ot.toString,lt=it?it.toStringTag:void 0;var ut=Object.prototype.toString;var ht=it?it.toStringTag:void 0;function ct(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":ht&&ht in Object(t)?function(t){var e=at.call(t,lt),n=t[lt];try{t[lt]=void 0;var r=!0}catch(t){}var i=st.call(t);return r&&(e?t[lt]=n:delete t[lt]),i}(t):function(t){return ut.call(t)}(t)}function dt(t){return null!=t&&"object"==typeof t}function pt(t){return"symbol"==typeof t||dt(t)&&"[object Symbol]"==ct(t)}function ft(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var vt=Array.isArray,gt=it?it.prototype:void 0,yt=gt?gt.toString:void 0;function mt(t){if("string"==typeof t)return t;if(vt(t))return ft(t,mt)+"";if(pt(t))return yt?yt.call(t):"";var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e}var Ct=/\s/;var wt=/^\s+/;function xt(t){return t?t.slice(0,function(t){for(var e=t.length;e--&&Ct.test(t.charAt(e)););return e}(t)+1).replace(wt,""):t}function St(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var Et=/^[-+]0x[0-9a-f]+$/i,Tt=/^0b[01]+$/i,bt=/^0o[0-7]+$/i,_t=parseInt;function Lt(t){if("number"==typeof t)return t;if(pt(t))return NaN;if(St(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=St(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=xt(t);var n=Tt.test(t);return n||bt.test(t)?_t(t.slice(2),n?2:8):Et.test(t)?NaN:+t}var Ot=1/0;function It(t){return t?(t=Lt(t))===Ot||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function Rt(t){var e=It(t),n=e%1;return e==e?n?e-n:e:0}function Mt(t){return t}function At(t){if(!St(t))return!1;var e=ct(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}var Bt,Dt=rt["__core-js_shared__"],Nt=(Bt=/[^.]+$/.exec(Dt&&Dt.keys&&Dt.keys.IE_PROTO||""))?"Symbol(src)_1."+Bt:"";var Pt=Function.prototype.toString;function kt(t){if(null!=t){try{return Pt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var zt=/^\[object .+?Constructor\]$/,Ft=Function.prototype,Ht=Object.prototype,Gt=Ft.toString,Wt=Ht.hasOwnProperty,Yt=RegExp("^"+Gt.call(Wt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ut(t){return!(!St(t)||(e=t,Nt&&Nt in e))&&(At(t)?Yt:zt).test(kt(t));var e}function Vt(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return Ut(n)?n:void 0}var jt=Vt(rt,"WeakMap"),Xt=Object.create,Kt=function(){function t(){}return function(e){if(!St(e))return{};if(Xt)return Xt(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),$t=Kt;function qt(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Zt(){}function Qt(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var Jt=Date.now;var te,ee,ne,re=function(){try{var t=Vt(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),ie=re,oe=ie?function(t,e){return ie(t,"toString",{configurable:!0,enumerable:!1,value:(n=e,function(){return n}),writable:!0});var n}:Mt,ae=(te=oe,ee=0,ne=0,function(){var t=Jt(),e=16-(t-ne);if(ne=t,e>0){if(++ee>=800)return arguments[0]}else ee=0;return te.apply(void 0,arguments)}),se=ae;function le(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function ue(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function he(t){return t!=t}function ce(t,e,n){return e==e?function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):ue(t,he,n)}function de(t,e){return!!(null==t?0:t.length)&&ce(t,e,0)>-1}var pe=/^(?:0|[1-9]\d*)$/;function fe(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&pe.test(t))&&t>-1&&t%1==0&&t<e}function ve(t,e,n){"__proto__"==e&&ie?ie(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function ge(t,e){return t===e||t!=t&&e!=e}var ye=Object.prototype.hasOwnProperty;function me(t,e,n){var r=t[e];ye.call(t,e)&&ge(r,n)&&(void 0!==n||e in t)||ve(t,e,n)}function Ce(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],l=r?r(n[s],t[s],s,n,t):void 0;void 0===l&&(l=t[s]),i?ve(n,s,l):me(n,s,l)}return n}var we=Math.max;function xe(t,e,n){return e=we(void 0===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=we(r.length-e,0),a=Array(o);++i<o;)a[i]=r[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=r[i];return s[e]=n(a),qt(t,this,s)}}function Se(t,e){return se(xe(t,e,Mt),t+"")}function Ee(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function Te(t){return null!=t&&Ee(t.length)&&!At(t)}function be(t,e,n){if(!St(n))return!1;var r=typeof e;return!!("number"==r?Te(n)&&fe(e,n.length):"string"==r&&e in n)&&ge(n[e],t)}function _e(t){return Se((function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(i--,o):void 0,a&&be(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),e=Object(e);++r<i;){var s=n[r];s&&t(e,s,r,o)}return e}))}var Le=Object.prototype;function Oe(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Le)}function Ie(t){return dt(t)&&"[object Arguments]"==ct(t)}var Re=Object.prototype,Me=Re.hasOwnProperty,Ae=Re.propertyIsEnumerable,Be=Ie(function(){return arguments}())?Ie:function(t){return dt(t)&&Me.call(t,"callee")&&!Ae.call(t,"callee")},De=Be;var Ne="object"==typeof t&&t&&!t.nodeType&&t,Pe=Ne&&"object"==typeof module&&module&&!module.nodeType&&module,ke=Pe&&Pe.exports===Ne?rt.Buffer:void 0,ze=(ke?ke.isBuffer:void 0)||function(){return!1},Fe={};function He(t){return function(e){return t(e)}}Fe["[object Float32Array]"]=Fe["[object Float64Array]"]=Fe["[object Int8Array]"]=Fe["[object Int16Array]"]=Fe["[object Int32Array]"]=Fe["[object Uint8Array]"]=Fe["[object Uint8ClampedArray]"]=Fe["[object Uint16Array]"]=Fe["[object Uint32Array]"]=!0,Fe["[object Arguments]"]=Fe["[object Array]"]=Fe["[object ArrayBuffer]"]=Fe["[object Boolean]"]=Fe["[object DataView]"]=Fe["[object Date]"]=Fe["[object Error]"]=Fe["[object Function]"]=Fe["[object Map]"]=Fe["[object Number]"]=Fe["[object Object]"]=Fe["[object RegExp]"]=Fe["[object Set]"]=Fe["[object String]"]=Fe["[object WeakMap]"]=!1;var Ge="object"==typeof t&&t&&!t.nodeType&&t,We=Ge&&"object"==typeof module&&module&&!module.nodeType&&module,Ye=We&&We.exports===Ge&&et.process,Ue=function(){try{var t=We&&We.require&&We.require("util").types;return t||Ye&&Ye.binding&&Ye.binding("util")}catch(t){}}(),Ve=Ue&&Ue.isTypedArray,je=Ve?He(Ve):function(t){return dt(t)&&Ee(t.length)&&!!Fe[ct(t)]},Xe=Object.prototype.hasOwnProperty;function Ke(t,e){var n=vt(t),r=!n&&De(t),i=!n&&!r&&ze(t),o=!n&&!r&&!i&&je(t),a=n||r||i||o,s=a?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],l=s.length;for(var u in t)!e&&!Xe.call(t,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||fe(u,l))||s.push(u);return s}function $e(t,e){return function(n){return t(e(n))}}var qe=$e(Object.keys,Object),Ze=Object.prototype.hasOwnProperty;function Qe(t){if(!Oe(t))return qe(t);var e=[];for(var n in Object(t))Ze.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Je(t){return Te(t)?Ke(t):Qe(t)}var tn=Object.prototype.hasOwnProperty,en=_e((function(t,e){if(Oe(e)||Te(e))Ce(e,Je(e),t);else for(var n in e)tn.call(e,n)&&me(t,n,e[n])})),nn=en;var rn=Object.prototype.hasOwnProperty;function on(t){if(!St(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=Oe(t),n=[];for(var r in t)("constructor"!=r||!e&&rn.call(t,r))&&n.push(r);return n}function an(t){return Te(t)?Ke(t,!0):on(t)}var sn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ln=/^\w*$/;function un(t,e){if(vt(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!pt(t))||(ln.test(t)||!sn.test(t)||null!=e&&t in Object(e))}var hn=Vt(Object,"create");var cn=Object.prototype.hasOwnProperty;var dn=Object.prototype.hasOwnProperty;function pn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function fn(t,e){for(var n=t.length;n--;)if(ge(t[n][0],e))return n;return-1}pn.prototype.clear=function(){this.__data__=hn?hn(null):{},this.size=0},pn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},pn.prototype.get=function(t){var e=this.__data__;if(hn){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return cn.call(e,t)?e[t]:void 0},pn.prototype.has=function(t){var e=this.__data__;return hn?void 0!==e[t]:dn.call(e,t)},pn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=hn&&void 0===e?"__lodash_hash_undefined__":e,this};var vn=Array.prototype.splice;function gn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}gn.prototype.clear=function(){this.__data__=[],this.size=0},gn.prototype.delete=function(t){var e=this.__data__,n=fn(e,t);return!(n<0)&&(n==e.length-1?e.pop():vn.call(e,n,1),--this.size,!0)},gn.prototype.get=function(t){var e=this.__data__,n=fn(e,t);return n<0?void 0:e[n][1]},gn.prototype.has=function(t){return fn(this.__data__,t)>-1},gn.prototype.set=function(t,e){var n=this.__data__,r=fn(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};var yn=Vt(rt,"Map");function mn(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function Cn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Cn.prototype.clear=function(){this.size=0,this.__data__={hash:new pn,map:new(yn||gn),string:new pn}},Cn.prototype.delete=function(t){var e=mn(this,t).delete(t);return this.size-=e?1:0,e},Cn.prototype.get=function(t){return mn(this,t).get(t)},Cn.prototype.has=function(t){return mn(this,t).has(t)},Cn.prototype.set=function(t,e){var n=mn(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function wn(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(wn.Cache||Cn),n}wn.Cache=Cn;var xn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Sn=/\\(\\)?/g,En=function(t){var e=wn(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(xn,(function(t,n,r,i){e.push(r?i.replace(Sn,"$1"):n||t)})),e})),Tn=En;function bn(t){return null==t?"":mt(t)}function _n(t,e){return vt(t)?t:un(t,e)?[t]:Tn(bn(t))}function Ln(t){if("string"==typeof t||pt(t))return t;var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e}function On(t,e){for(var n=0,r=(e=_n(e,t)).length;null!=t&&n<r;)t=t[Ln(e[n++])];return n&&n==r?t:void 0}function In(t,e,n){var r=null==t?void 0:On(t,e);return void 0===r?n:r}function Rn(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var Mn=it?it.isConcatSpreadable:void 0;function An(t){return vt(t)||De(t)||!!(Mn&&t&&t[Mn])}function Bn(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=An),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?Bn(s,e-1,n,r,i):Rn(i,s):r||(i[i.length]=s)}return i}function Dn(t){return(null==t?0:t.length)?Bn(t,1):[]}function Nn(t){return se(xe(t,void 0,Dn),t+"")}var Pn=$e(Object.getPrototypeOf,Object),kn=Function.prototype,zn=Object.prototype,Fn=kn.toString,Hn=zn.hasOwnProperty,Gn=Fn.call(Object);function Wn(t){if(!dt(t)||"[object Object]"!=ct(t))return!1;var e=Pn(t);if(null===e)return!0;var n=Hn.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Fn.call(n)==Gn}function Yn(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}var Un=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function Vn(t){return Un.test(t)}var jn="[\\ud800-\\udfff]",Xn="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Kn="\\ud83c[\\udffb-\\udfff]",$n="[^\\ud800-\\udfff]",qn="(?:\\ud83c[\\udde6-\\uddff]){2}",Zn="[\\ud800-\\udbff][\\udc00-\\udfff]",Qn="(?:"+Xn+"|"+Kn+")"+"?",Jn="[\\ufe0e\\ufe0f]?",tr=Jn+Qn+("(?:\\u200d(?:"+[$n,qn,Zn].join("|")+")"+Jn+Qn+")*"),er="(?:"+[$n+Xn+"?",Xn,qn,Zn,jn].join("|")+")",nr=RegExp(Kn+"(?="+Kn+")|"+er+tr,"g");function rr(t){return Vn(t)?function(t){return t.match(nr)||[]}(t):function(t){return t.split("")}(t)}function ir(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}var or=function(t){return function(e){return null==t?void 0:t[e]}}({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),ar=or,sr=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,lr=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");var ur=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var hr=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var cr="\\u2700-\\u27bf",dr="a-z\\xdf-\\xf6\\xf8-\\xff",pr="A-Z\\xc0-\\xd6\\xd8-\\xde",fr="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",vr="["+fr+"]",gr="\\d+",yr="[\\u2700-\\u27bf]",mr="["+dr+"]",Cr="[^\\ud800-\\udfff"+fr+gr+cr+dr+pr+"]",wr="(?:\\ud83c[\\udde6-\\uddff]){2}",xr="[\\ud800-\\udbff][\\udc00-\\udfff]",Sr="["+pr+"]",Er="(?:"+mr+"|"+Cr+")",Tr="(?:"+Sr+"|"+Cr+")",br="(?:['’](?:d|ll|m|re|s|t|ve))?",_r="(?:['’](?:D|LL|M|RE|S|T|VE))?",Lr="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",Or="[\\ufe0e\\ufe0f]?",Ir=Or+Lr+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",wr,xr].join("|")+")"+Or+Lr+")*"),Rr="(?:"+[yr,wr,xr].join("|")+")"+Ir,Mr=RegExp([Sr+"?"+mr+"+"+br+"(?="+[vr,Sr,"$"].join("|")+")",Tr+"+"+_r+"(?="+[vr,Sr+Er,"$"].join("|")+")",Sr+"?"+Er+"+"+br,Sr+"+"+_r,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",gr,Rr].join("|"),"g");function Ar(t,e,n){return t=bn(t),void 0===(e=n?void 0:e)?function(t){return hr.test(t)}(t)?function(t){return t.match(Mr)||[]}(t):function(t){return t.match(ur)||[]}(t):t.match(e)||[]}var Br=RegExp("['’]","g");function Dr(t,e,n){return t==t&&(void 0!==n&&(t=t<=n?t:n),void 0!==e&&(t=t>=e?t:e)),t}function Nr(t){var e=this.__data__=new gn(t);this.size=e.size}Nr.prototype.clear=function(){this.__data__=new gn,this.size=0},Nr.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Nr.prototype.get=function(t){return this.__data__.get(t)},Nr.prototype.has=function(t){return this.__data__.has(t)},Nr.prototype.set=function(t,e){var n=this.__data__;if(n instanceof gn){var r=n.__data__;if(!yn||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Cn(r)}return n.set(t,e),this.size=n.size,this};var Pr="object"==typeof t&&t&&!t.nodeType&&t,kr=Pr&&"object"==typeof module&&module&&!module.nodeType&&module,zr=kr&&kr.exports===Pr?rt.Buffer:void 0,Fr=zr?zr.allocUnsafe:void 0;function Hr(t,e){if(e)return t.slice();var n=t.length,r=Fr?Fr(n):new t.constructor(n);return t.copy(r),r}function Gr(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function Wr(){return[]}var Yr=Object.prototype.propertyIsEnumerable,Ur=Object.getOwnPropertySymbols,Vr=Ur?function(t){return null==t?[]:(t=Object(t),Gr(Ur(t),(function(e){return Yr.call(t,e)})))}:Wr,jr=Vr;var Xr=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Rn(e,jr(t)),t=Pn(t);return e}:Wr,Kr=Xr;function $r(t,e,n){var r=e(t);return vt(t)?r:Rn(r,n(t))}function qr(t){return $r(t,Je,jr)}function Zr(t){return $r(t,an,Kr)}var Qr=Vt(rt,"DataView"),Jr=Vt(rt,"Promise"),ti=Vt(rt,"Set"),ei="[object Map]",ni="[object Promise]",ri="[object Set]",ii="[object WeakMap]",oi="[object DataView]",ai=kt(Qr),si=kt(yn),li=kt(Jr),ui=kt(ti),hi=kt(jt),ci=ct;(Qr&&ci(new Qr(new ArrayBuffer(1)))!=oi||yn&&ci(new yn)!=ei||Jr&&ci(Jr.resolve())!=ni||ti&&ci(new ti)!=ri||jt&&ci(new jt)!=ii)&&(ci=function(t){var e=ct(t),n="[object Object]"==e?t.constructor:void 0,r=n?kt(n):"";if(r)switch(r){case ai:return oi;case si:return ei;case li:return ni;case ui:return ri;case hi:return ii}return e});var di=ci,pi=Object.prototype.hasOwnProperty;var fi=rt.Uint8Array;function vi(t){var e=new t.constructor(t.byteLength);return new fi(e).set(new fi(t)),e}var gi=/\w*$/;var yi=it?it.prototype:void 0,mi=yi?yi.valueOf:void 0;function Ci(t,e){var n=e?vi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function wi(t,e,n){var r,i,o,a=t.constructor;switch(e){case"[object ArrayBuffer]":return vi(t);case"[object Boolean]":case"[object Date]":return new a(+t);case"[object DataView]":return function(t,e){var n=e?vi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Ci(t,n);case"[object Map]":case"[object Set]":return new a;case"[object Number]":case"[object String]":return new a(t);case"[object RegExp]":return(o=new(i=t).constructor(i.source,gi.exec(i))).lastIndex=i.lastIndex,o;case"[object Symbol]":return r=t,mi?Object(mi.call(r)):{}}}function xi(t){return"function"!=typeof t.constructor||Oe(t)?{}:$t(Pn(t))}var Si=Ue&&Ue.isMap,Ei=Si?He(Si):function(t){return dt(t)&&"[object Map]"==di(t)};var Ti=Ue&&Ue.isSet,bi=Ti?He(Ti):function(t){return dt(t)&&"[object Set]"==di(t)},_i="[object Arguments]",Li="[object Function]",Oi="[object Object]",Ii={};function Ri(t,e,n,r,i,o){var a,s=1&e,l=2&e,u=4&e;if(n&&(a=i?n(t,r,i,o):n(t)),void 0!==a)return a;if(!St(t))return t;var h=vt(t);if(h){if(a=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&pi.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!s)return Qt(t,a)}else{var c=di(t),d=c==Li||"[object GeneratorFunction]"==c;if(ze(t))return Hr(t,s);if(c==Oi||c==_i||d&&!i){if(a=l||d?{}:xi(t),!s)return l?function(t,e){return Ce(t,Kr(t),e)}(t,function(t,e){return t&&Ce(e,an(e),t)}(a,t)):function(t,e){return Ce(t,jr(t),e)}(t,function(t,e){return t&&Ce(e,Je(e),t)}(a,t))}else{if(!Ii[c])return i?t:{};a=wi(t,c,s)}}o||(o=new Nr);var p=o.get(t);if(p)return p;o.set(t,a),bi(t)?t.forEach((function(r){a.add(Ri(r,e,n,r,t,o))})):Ei(t)&&t.forEach((function(r,i){a.set(i,Ri(r,e,n,i,t,o))}));var f=h?void 0:(u?l?Zr:qr:l?an:Je)(t);return le(f||t,(function(r,i){f&&(r=t[i=r]),me(a,i,Ri(r,e,n,i,t,o))})),a}Ii[_i]=Ii["[object Array]"]=Ii["[object ArrayBuffer]"]=Ii["[object DataView]"]=Ii["[object Boolean]"]=Ii["[object Date]"]=Ii["[object Float32Array]"]=Ii["[object Float64Array]"]=Ii["[object Int8Array]"]=Ii["[object Int16Array]"]=Ii["[object Int32Array]"]=Ii["[object Map]"]=Ii["[object Number]"]=Ii[Oi]=Ii["[object RegExp]"]=Ii["[object Set]"]=Ii["[object String]"]=Ii["[object Symbol]"]=Ii["[object Uint8Array]"]=Ii["[object Uint8ClampedArray]"]=Ii["[object Uint16Array]"]=Ii["[object Uint32Array]"]=!0,Ii["[object Error]"]=Ii[Li]=Ii["[object WeakMap]"]=!1;function Mi(t){return Ri(t,4)}function Ai(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i}function Bi(){var t=arguments.length;if(!t)return[];for(var e=Array(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return Rn(vt(n)?Qt(n):[n],Bn(e,1))}function Di(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Cn;++e<n;)this.add(t[e])}function Ni(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function Pi(t,e){return t.has(e)}Di.prototype.add=Di.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Di.prototype.has=function(t){return this.__data__.has(t)};function ki(t,e,n,r,i,o){var a=1&n,s=t.length,l=e.length;if(s!=l&&!(a&&l>s))return!1;var u=o.get(t),h=o.get(e);if(u&&h)return u==e&&h==t;var c=-1,d=!0,p=2&n?new Di:void 0;for(o.set(t,e),o.set(e,t);++c<s;){var f=t[c],v=e[c];if(r)var g=a?r(v,f,c,e,t,o):r(f,v,c,t,e,o);if(void 0!==g){if(g)continue;d=!1;break}if(p){if(!Ni(e,(function(t,e){if(!Pi(p,e)&&(f===t||i(f,t,n,r,o)))return p.push(e)}))){d=!1;break}}else if(f!==v&&!i(f,v,n,r,o)){d=!1;break}}return o.delete(t),o.delete(e),d}function zi(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function Fi(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var Hi=it?it.prototype:void 0,Gi=Hi?Hi.valueOf:void 0;var Wi=Object.prototype.hasOwnProperty;var Yi="[object Arguments]",Ui="[object Array]",Vi="[object Object]",ji=Object.prototype.hasOwnProperty;function Xi(t,e,n,r,i,o){var a=vt(t),s=vt(e),l=a?Ui:di(t),u=s?Ui:di(e),h=(l=l==Yi?Vi:l)==Vi,c=(u=u==Yi?Vi:u)==Vi,d=l==u;if(d&&ze(t)){if(!ze(e))return!1;a=!0,h=!1}if(d&&!h)return o||(o=new Nr),a||je(t)?ki(t,e,n,r,i,o):function(t,e,n,r,i,o,a){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!o(new fi(t),new fi(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return ge(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var s=zi;case"[object Set]":var l=1&r;if(s||(s=Fi),t.size!=e.size&&!l)return!1;var u=a.get(t);if(u)return u==e;r|=2,a.set(t,e);var h=ki(s(t),s(e),r,i,o,a);return a.delete(t),h;case"[object Symbol]":if(Gi)return Gi.call(t)==Gi.call(e)}return!1}(t,e,l,n,r,i,o);if(!(1&n)){var p=h&&ji.call(t,"__wrapped__"),f=c&&ji.call(e,"__wrapped__");if(p||f){var v=p?t.value():t,g=f?e.value():e;return o||(o=new Nr),i(v,g,n,r,o)}}return!!d&&(o||(o=new Nr),function(t,e,n,r,i,o){var a=1&n,s=qr(t),l=s.length;if(l!=qr(e).length&&!a)return!1;for(var u=l;u--;){var h=s[u];if(!(a?h in e:Wi.call(e,h)))return!1}var c=o.get(t),d=o.get(e);if(c&&d)return c==e&&d==t;var p=!0;o.set(t,e),o.set(e,t);for(var f=a;++u<l;){var v=t[h=s[u]],g=e[h];if(r)var y=a?r(g,v,h,e,t,o):r(v,g,h,t,e,o);if(!(void 0===y?v===g||i(v,g,n,r,o):y)){p=!1;break}f||(f="constructor"==h)}if(p&&!f){var m=t.constructor,C=e.constructor;m==C||!("constructor"in t)||!("constructor"in e)||"function"==typeof m&&m instanceof m&&"function"==typeof C&&C instanceof C||(p=!1)}return o.delete(t),o.delete(e),p}(t,e,n,r,i,o))}function Ki(t,e,n,r,i){return t===e||(null==t||null==e||!dt(t)&&!dt(e)?t!=t&&e!=e:Xi(t,e,n,r,Ki,i))}function $i(t){return t==t&&!St(t)}function qi(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}function Zi(t){var e=function(t){for(var e=Je(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,$i(i)]}return e}(t);return 1==e.length&&e[0][2]?qi(e[0][0],e[0][1]):function(n){return n===t||function(t,e,n,r){var i=n.length,o=i,a=!r;if(null==t)return!o;for(t=Object(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){var l=(s=n[i])[0],u=t[l],h=s[1];if(a&&s[2]){if(void 0===u&&!(l in t))return!1}else{var c=new Nr;if(r)var d=r(u,h,l,t,e,c);if(!(void 0===d?Ki(h,u,3,r,c):d))return!1}}return!0}(n,t,e)}}function Qi(t,e){return null!=t&&e in Object(t)}function Ji(t,e,n){for(var r=-1,i=(e=_n(e,t)).length,o=!1;++r<i;){var a=Ln(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&Ee(i)&&fe(a,i)&&(vt(t)||De(t))}function to(t,e){return null!=t&&Ji(t,e,Qi)}function eo(t){return function(e){return null==e?void 0:e[t]}}function no(t){return un(t)?eo(Ln(t)):function(t){return function(e){return On(e,t)}}(t)}function ro(t){return"function"==typeof t?t:null==t?Mt:"object"==typeof t?vt(t)?function(t,e){return un(t)&&$i(e)?qi(Ln(t),e):function(n){var r=In(n,t);return void 0===r&&r===e?to(n,t):Ki(e,r,3)}}(t[0],t[1]):Zi(t):no(t)}var io,oo=function(t,e,n){for(var r=-1,i=Object(t),o=n(t),a=o.length;a--;){var s=o[io?a:++r];if(!1===e(i[s],s,i))break}return t},ao=oo;function so(t,e){return t&&ao(t,e,Je)}var lo=function(t,e){return function(n,r){if(null==n)return n;if(!Te(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Object(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}(so),uo=lo,ho=function(){return rt.Date.now()},co=Math.max,po=Math.min;function fo(t,e,n){var r,i,o,a,s,l,u=0,h=!1,c=!1,d=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function p(e){var n=r,o=i;return r=i=void 0,u=e,a=t.apply(o,n)}function f(t){return u=t,s=setTimeout(g,e),h?p(t):a}function v(t){var n=t-l;return void 0===l||n>=e||n<0||c&&t-u>=o}function g(){var t=ho();if(v(t))return y(t);s=setTimeout(g,function(t){var n=e-(t-l);return c?po(n,o-(t-u)):n}(t))}function y(t){return s=void 0,d&&r?p(t):(r=i=void 0,a)}function m(){var t=ho(),n=v(t);if(r=arguments,i=this,l=t,n){if(void 0===s)return f(l);if(c)return clearTimeout(s),s=setTimeout(g,e),p(l)}return void 0===s&&(s=setTimeout(g,e)),a}return e=Lt(e)||0,St(n)&&(h=!!n.leading,o=(c="maxWait"in n)?co(Lt(n.maxWait)||0,e):o,d="trailing"in n?!!n.trailing:d),m.cancel=function(){void 0!==s&&clearTimeout(s),u=0,r=l=i=s=void 0},m.flush=function(){return void 0===s?a:y(ho())},m}function vo(t,e,n){(void 0!==n&&!ge(t[e],n)||void 0===n&&!(e in t))&&ve(t,e,n)}function go(t){return dt(t)&&Te(t)}function yo(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}function mo(t,e,n,r,i,o,a){var s=yo(t,n),l=yo(e,n),u=a.get(l);if(u)vo(t,n,u);else{var h,c=o?o(s,l,n+"",t,e,a):void 0,d=void 0===c;if(d){var p=vt(l),f=!p&&ze(l),v=!p&&!f&&je(l);c=l,p||f||v?vt(s)?c=s:go(s)?c=Qt(s):f?(d=!1,c=Hr(l,!0)):v?(d=!1,c=Ci(l,!0)):c=[]:Wn(l)||De(l)?(c=s,De(s)?c=Ce(h=s,an(h)):St(s)&&!At(s)||(c=xi(l))):d=!1}d&&(a.set(l,c),i(c,l,r,o,a),a.delete(l)),vo(t,n,c)}}function Co(t,e,n,r,i){t!==e&&ao(e,(function(o,a){if(i||(i=new Nr),St(o))mo(t,e,a,n,Co,r,i);else{var s=r?r(yo(t,a),o,a+"",t,e,i):void 0;void 0===s&&(s=o),vo(t,a,s)}}),an)}var wo=_e((function(t,e,n,r){Co(t,e,n,r)})),xo=wo;function So(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}var Eo=Se((function(t,e){return go(t)?function(t,e,n,r){var i=-1,o=de,a=!0,s=t.length,l=[],u=e.length;if(!s)return l;n&&(e=ft(e,He(n))),r?(o=So,a=!1):e.length>=200&&(o=Pi,a=!1,e=new Di(e));t:for(;++i<s;){var h=t[i],c=null==n?h:n(h);if(h=r||0!==h?h:0,a&&c==c){for(var d=u;d--;)if(e[d]===c)continue t;l.push(h)}else o(e,c,r)||l.push(h)}return l}(t,Bn(e,1,go,!0)):[]})),To=Eo;function bo(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}function _o(t,e){var n;return(vt(t)?le:uo)(t,"function"==typeof(n=e)?n:Mt)}function Lo(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Oo(t,e){var n=!0;return uo(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function Io(t,e,n){var r=vt(t)?Lo:Oo;return n&&be(t,e,n)&&(e=void 0),r(t,ro(e))}function Ro(t,e){var n=[];return uo(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function Mo(t,e){return(vt(t)?Gr:Ro)(t,ro(e))}var Ao=Math.max;function Bo(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Rt(n);return i<0&&(i=Ao(r+i,0)),ue(t,ro(e),i)}var Do,No=(Do=Bo,function(t,e,n){var r=Object(t);if(!Te(t)){var i=ro(e);t=Je(t),e=function(t){return i(r[t],t,r)}}var o=Do(t,e,n);return o>-1?r[i?t[o]:o]:void 0});function Po(t){return t&&t.length?t[0]:void 0}function ko(t,e){var n=-1,r=Te(t)?Array(t.length):[];return uo(t,(function(t,i,o){r[++n]=e(t,i,o)})),r}function zo(t,e){return(vt(t)?ft:ko)(t,ro(e))}function Fo(t,e){return t>e}var Ho=Object.prototype.hasOwnProperty;function Go(t,e){return null!=t&&Ho.call(t,e)}function Wo(t,e){return null!=t&&Ji(t,e,Go)}var Yo=Math.max,Uo=Math.min;function Vo(t,e,n){return e=It(e),void 0===n?(n=e,e=0):n=It(n),function(t,e,n){return t>=Uo(e,n)&&t<Yo(e,n)}(t=Lt(t),e,n)}function jo(t){return"string"==typeof t||!vt(t)&&dt(t)&&"[object String]"==ct(t)}function Xo(t){return null==t?[]:function(t,e){return ft(e,(function(e){return t[e]}))}(t,Je(t))}var Ko=Math.max;function $o(t,e,n,r){t=Te(t)?t:Xo(t),n=n&&!r?Rt(n):0;var i=t.length;return n<0&&(n=Ko(i+n,0)),jo(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&ce(t,e,n)>-1}var qo=Math.min;function Zo(t){return go(t)?t:[]}var Qo=Se((function(t){var e=ft(t,Zo);return e.length&&e[0]===t[0]?function(t,e,n){for(var r=n?So:de,i=t[0].length,o=t.length,a=o,s=Array(o),l=1/0,u=[];a--;){var h=t[a];a&&e&&(h=ft(h,He(e))),l=qo(h.length,l),s[a]=!n&&(e||i>=120&&h.length>=120)?new Di(a&&h):void 0}h=t[0];var c=-1,d=s[0];t:for(;++c<i&&u.length<l;){var p=h[c],f=e?e(p):p;if(p=n||0!==p?p:0,!(d?Pi(d,f):r(u,f,n))){for(a=o;--a;){var v=s[a];if(!(v?Pi(v,f):r(t[a],f,n)))continue t}d&&d.push(f),u.push(p)}}return u}(e):[]})),Jo=Qo;function ta(t){return!0===t||!1===t||dt(t)&&"[object Boolean]"==ct(t)}var ea=Object.prototype.hasOwnProperty;function na(t){if(null==t)return!0;if(Te(t)&&(vt(t)||"string"==typeof t||"function"==typeof t.splice||ze(t)||je(t)||De(t)))return!t.length;var e=di(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(Oe(t))return!Qe(t).length;for(var n in t)if(ea.call(t,n))return!1;return!0}function ra(t,e){return Ki(t,e)}function ia(t){return"number"==typeof t||dt(t)&&"[object Number]"==ct(t)}function oa(t){return null==t}function aa(t){return void 0===t}var sa,la=(sa=function(t,e,n){return t+(n?" ":"")+e.toLowerCase()},function(t){return ir(Ar(function(t){return(t=bn(t))&&t.replace(sr,ar).replace(lr,"")}(t).replace(Br,"")),sa,"")}),ua=la;function ha(t,e){return t<e}function ca(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=e(o);if(null!=a&&(void 0===s?a==a&&!pt(a):n(a,s)))var s=a,l=o}return l}function da(t){return t&&t.length?ca(t,Mt,Fo):void 0}function pa(t,e){return t&&t.length?ca(t,ro(e),Fo):void 0}var fa=_e((function(t,e,n){Co(t,e,n)})),va=fa;function ga(t,e){return null==(t=function(t,e){return e.length<2?t:On(t,Yn(e,0,-1))}(t,e=_n(e,t)))||delete t[Ln(bo(e))]}function ya(t){return Wn(t)?void 0:t}var ma=Nn((function(t,e){var n={};if(null==t)return n;var r=!1;e=ft(e,(function(e){return e=_n(e,t),r||(r=e.length>1),e})),Ce(t,Zr(t),n),r&&(n=Ri(n,7,ya));for(var i=e.length;i--;)ga(n,e[i]);return n})),Ca=ma;function wa(t,e,n,r){if(!St(t))return t;for(var i=-1,o=(e=_n(e,t)).length,a=o-1,s=t;null!=s&&++i<o;){var l=Ln(e[i]),u=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return t;if(i!=a){var h=s[l];void 0===(u=r?r(h,l,s):void 0)&&(u=St(h)?h:fe(e[i+1])?[]:{})}me(s,l,u),s=s[l]}return t}function xa(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=On(t,a);n(s,a)&&wa(o,_n(a,t),s)}return o}function Sa(t){return function(t,e){var n;if("function"!=typeof e)throw new TypeError("Expected a function");return t=Rt(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=void 0),n}}(2,t)}function Ea(t,e){if(t!==e){var n=void 0!==t,r=null===t,i=t==t,o=pt(t),a=void 0!==e,s=null===e,l=e==e,u=pt(e);if(!s&&!u&&!o&&t>e||o&&a&&l&&!s&&!u||r&&a&&l||!n&&l||!i)return 1;if(!r&&!o&&!u&&t<e||u&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!l)return-1}return 0}function Ta(t,e,n){e=e.length?ft(e,(function(t){return vt(t)?function(e){return On(e,1===t.length?t[0]:t)}:t})):[Mt];var r=-1;return e=ft(e,He(ro)),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(ko(t,(function(t,n,i){return{criteria:ft(e,(function(e){return e(t)})),index:++r,value:t}})),(function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var l=Ea(i[r],o[r]);if(l)return r>=s?l:l*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}))}function ba(t,e,n,r){return null==t?[]:(vt(e)||(e=null==e?[]:[e]),vt(n=r?void 0:n)||(n=null==n?[]:[n]),Ta(t,e,n))}var _a=eo("length"),La="[\\ud800-\\udfff]",Oa="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Ia="\\ud83c[\\udffb-\\udfff]",Ra="[^\\ud800-\\udfff]",Ma="(?:\\ud83c[\\udde6-\\uddff]){2}",Aa="[\\ud800-\\udbff][\\udc00-\\udfff]",Ba="(?:"+Oa+"|"+Ia+")"+"?",Da="[\\ufe0e\\ufe0f]?",Na=Da+Ba+("(?:\\u200d(?:"+[Ra,Ma,Aa].join("|")+")"+Da+Ba+")*"),Pa="(?:"+[Ra+Oa+"?",Oa,Ma,Aa,La].join("|")+")",ka=RegExp(Ia+"(?="+Ia+")|"+Pa+Na,"g");function za(t){return Vn(t)?function(t){for(var e=ka.lastIndex=0;ka.test(t);)++e;return e}(t):_a(t)}var Fa=Nn((function(t,e){return null==t?{}:function(t,e){return xa(t,e,(function(e,n){return to(t,n)}))}(t,e)})),Ha=Fa,Ga=Math.ceil,Wa=Math.max;var Ya=function(t){return function(e,n,r){return r&&"number"!=typeof r&&be(e,n,r)&&(n=r=void 0),e=It(e),void 0===n?(n=e,e=0):n=It(n),function(t,e,n,r){for(var i=-1,o=Wa(Ga((e-t)/(n||1)),0),a=Array(o);o--;)a[r?o:++i]=t,t+=n;return a}(e,n,r=void 0===r?e<n?1:-1:It(r),t)}}(),Ua=Ya;function Va(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}function ja(t,e,n){var r=vt(t)?ir:Va,i=arguments.length<3;return r(t,ro(e),n,i,uo)}function Xa(t,e,n){return null==t?t:wa(t,e,n)}function Ka(t){if(null==t)return 0;if(Te(t))return jo(t)?za(t):t.length;var e=di(t);return"[object Map]"==e||"[object Set]"==e?t.size:Qe(t).length}function $a(t,e){var n;return uo(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function qa(t){return bn(t).toUpperCase()}function Za(t,e,n){if((t=bn(t))&&(n||void 0===e))return xt(t);if(!t||!(e=mt(e)))return t;var r=rr(t),i=rr(e),o=function(t,e){for(var n=-1,r=t.length;++n<r&&ce(e,t[n],0)>-1;);return n}(r,i),a=function(t,e){for(var n=t.length;n--&&ce(e,t[n],0)>-1;);return n}(r,i)+1;return function(t,e,n){var r=t.length;return n=void 0===n?r:n,!e&&n>=r?t:Yn(t,e,n)}(r,o,a).join("")}var Qa=ti&&1/Fi(new ti([,-0]))[1]==1/0?function(t){return new ti(t)}:Zt,Ja=Qa;function ts(t){return t&&t.length?function(t,e,n){var r=-1,i=de,o=t.length,a=!0,s=[],l=s;if(n)a=!1,i=So;else if(o>=200){var u=e?null:Ja(t);if(u)return Fi(u);a=!1,i=Pi,l=new Di}else l=e?[]:s;t:for(;++r<o;){var h=t[r],c=e?e(h):h;if(h=n||0!==h?h:0,a&&c==c){for(var d=l.length;d--;)if(l[d]===c)continue t;e&&l.push(c),s.push(h)}else i(l,c,n)||(l!==s&&l.push(c),s.push(h))}return s}(t):[]}function es(t,e){return null==t||ga(t,e)}var ns={"小计":"小计","总计":"总计","总和":"总和","项":"项","已选择":"已选择","序号":"序号","度量":"所选项","数值":"数值","共计":"共计","条":"条","选择分析信息":"选择分析信息","切换指标":"切换指标","确定":"确定","取消":"取消","重置":"重置","请输入关键字搜索":"请输入关键字搜索","搜索":"搜索","恢复":"恢复","趋势":"趋势","已选 {} 项":"已选 {} 项","所选项":"所选项","组内升序":"组内升序","升序":"升序","降序":"降序","组内降序":"组内降序","不排序":"不排序","选择下钻维度":"选择下钻维度","恢复默认":"恢复默认","搜索字段":"搜索字段","行列切换":"行列切换","行头":"行头","列头":"列头","值":"值","展开子项":"展开子项","首字母":"首字母","手动排序":"手动排序","其他字段":"其他字段","高级排序":"高级排序","设置顺序":"设置顺序","可选字段":"可选字段","按以下规则进行排序（优先级由低到高）":"按以下规则进行排序（优先级由低到高）","按":"按"},rs={"小计":"Total","总计":"Total","总和":"SUM","项":"items","已选择":"selected","序号":"Index","度量":"Measure","数值":"Measure","共计":"Total","条":"","选择分析信息":"Select Analysis Information","切换指标":"Switch indicator","确定":"Ok","取消":"Cancel","重置":"Rest","请输入关键字搜索":"Please enter a keyword search","搜索":"Search","恢复":"Recover","趋势":"Trend","已选 {} 项":"selected {} item","所选项":"selected items","组内升序":"Group ASC","组内降序":"Group DESC","升序":"ASC","降序":"DESC","不排序":"No order","选择下钻维度":"Select drill down dimension","恢复默认":"Restore default","搜索字段":"Search field","行列切换":"Switch Dimensions","行头":"Rows","列头":"Cols","值":"Values","展开子项":"Expand Children","首字母":"Alphabetical order","手动排序":"Custom order","其他字段":"Other field","高级排序":"Advanced order","设置顺序":"SetManual","可选字段":"Fields","按以下规则进行排序（优先级由低到高）":"Order according to the following rules (from low to high priority)","按":"By"};t.Lang="zh_CN";var is,os,as=ns,ss=function(t){return 0===t.indexOf("en")},ls=function(t,e){return void 0===e&&(e=t),In(as,t,e)},us="".concat(N,"-tooltip"),hs="".concat(us,"-container"),cs="".concat(us,"-operation"),ds={x:15,y:10},ps={Trend:[{id:"trend",text:ls("趋势"),icon:"Trend"}],HiddenColumns:[{id:"hiddenColumns",text:ls("隐藏"),icon:"EyeOutlined"}],Sort:[{id:"asc",icon:"groupAsc",text:ls("组内升序")},{id:"desc",icon:"groupDesc",text:ls("组内降序")},{id:"none",text:ls("不排序")}],TableSort:[{id:"asc",icon:"groupAsc",text:ls("升序")},{id:"desc",icon:"groupDesc",text:ls("降序")},{id:"none",text:ls("不排序")}]},fs="RESIZE_START_GUIDE_LINE",vs="RESIZE_END_GUIDE_LINE",gs="RESIZE_MASK";function ys(t){return"mobile"===t||/(iPhone|iPad|SymbianOS|Windows Phone|iPod|iOS|Android)/i.test(navigator.userAgent)}function ms(){return/iPhone/gi.test(navigator.userAgent)&&812===window.screen.height&&375===window.screen.width}function Cs(){return/windows/i.test(navigator.userAgent)}t.ResizeDirectionType=void 0,(is=t.ResizeDirectionType||(t.ResizeDirectionType={})).Horizontal="col",is.Vertical="row",t.ResizeAreaEffect=void 0,(os=t.ResizeAreaEffect||(t.ResizeAreaEffect={})).Field="field",os.Cell="cell",os.Tree="tree",os.Series="series";var ws=function(t){var e,n,r=(null==t?void 0:t.palette)||(n=null==t?void 0:t.name,J[(n||"default").toLowerCase()]),i=r.basicColors,o=r.semanticColors,a=null===(e=null==t?void 0:t.spreadsheet)||void 0===e?void 0:e.isTableMode();return{cornerCell:{bolderText:{fontFamily:tt,fontSize:12,fontWeight:Cs()?"bold":500,fill:i[0],opacity:1,textAlign:a?"center":"left",textBaseline:"middle"},text:{fontFamily:tt,fontSize:12,fontWeight:"normal",fill:i[0],opacity:1,textAlign:a?"center":"left",textBaseline:"middle"},cell:{backgroundColor:i[3],backgroundColorOpacity:1,horizontalBorderColor:i[10],horizontalBorderColorOpacity:1,verticalBorderColor:i[10],verticalBorderColorOpacity:1,horizontalBorderWidth:1,verticalBorderWidth:1,padding:{top:0,right:8,bottom:0,left:8}},icon:{fill:i[0],size:10,margin:{right:4,left:4}}},rowCell:{bolderText:{fontFamily:tt,fontSize:12,fontWeight:Cs()?"bold":520,fill:i[14],linkTextFill:i[14],opacity:1,textAlign:a?"center":"left",textBaseline:"middle"},text:{fontFamily:tt,fontSize:12,fontWeight:"normal",fill:i[14],linkTextFill:i[6],opacity:1,textBaseline:"middle",textAlign:a?"center":"left"},cell:{backgroundColor:i[1],backgroundColorOpacity:1,horizontalBorderColor:i[9],horizontalBorderColorOpacity:1,verticalBorderColor:i[9],verticalBorderColorOpacity:1,horizontalBorderWidth:1,verticalBorderWidth:1,padding:{top:0,right:10,bottom:0,left:10},interactionState:{hover:{backgroundColor:i[2],backgroundOpacity:.6},selected:{backgroundColor:i[2],backgroundOpacity:.6},unselected:{backgroundOpacity:.3,textOpacity:.3,opacity:.3}}},icon:{fill:i[0],size:10,margin:{right:4,left:4}},seriesNumberWidth:80},colCell:{bolderText:{fontFamily:tt,fontSize:12,fontWeight:Cs()?"bold":520,fill:i[0],opacity:1,textAlign:"center",textBaseline:"middle"},text:{fontFamily:tt,fontSize:12,fontWeight:"normal",fill:i[0],opacity:1,textAlign:"center",textBaseline:"middle"},cell:{backgroundColor:i[3],backgroundColorOpacity:1,horizontalBorderColor:i[10],horizontalBorderColorOpacity:1,verticalBorderColor:i[10],verticalBorderColorOpacity:1,horizontalBorderWidth:1,verticalBorderWidth:1,padding:{top:0,right:8,bottom:0,left:8},interactionState:{hover:{backgroundColor:i[4],backgroundOpacity:.6},selected:{backgroundColor:i[4],backgroundOpacity:.6},unselected:{backgroundOpacity:.3,textOpacity:.3,opacity:.3}}},icon:{fill:i[0],size:10,margin:{top:6,right:4,bottom:6,left:4}}},dataCell:{bolderText:{fontFamily:tt,fontSize:12,fontWeight:Cs()?"bold":520,fill:i[13],opacity:1,textAlign:"right",textBaseline:"middle"},text:{fontFamily:tt,fontSize:12,fontWeight:"normal",fill:i[13],opacity:1,textAlign:"right",textBaseline:"middle"},cell:{crossBackgroundColor:i[1],backgroundColor:i[8],backgroundColorOpacity:1,horizontalBorderColor:i[9],horizontalBorderColorOpacity:1,verticalBorderColor:i[9],verticalBorderColorOpacity:1,horizontalBorderWidth:1,verticalBorderWidth:1,padding:{top:0,right:8,bottom:0,left:8},interactionState:{hover:{backgroundColor:i[2],backgroundOpacity:.6},hoverFocus:{backgroundColor:i[2],backgroundOpacity:.6,borderColor:i[14],borderWidth:1,borderOpacity:1},selected:{backgroundColor:i[2],backgroundOpacity:.6},unselected:{backgroundOpacity:.3,textOpacity:.3,opacity:.3},prepareSelect:{borderColor:i[14],borderOpacity:1,borderWidth:1}},miniBarChartHeight:12,miniBarChartFillColor:i[7]},icon:{fill:i[0],downIconColor:o.red,upIconColor:o.green,size:10,margin:{right:4,left:4}}},resizeArea:{size:3,background:i[7],backgroundOpacity:0,guideLineColor:i[7],guideLineDash:[3,3],interactionState:{hover:{backgroundColor:i[7],backgroundOpacity:1}}},scrollBar:{trackColor:"rgba(0,0,0,0.01)",thumbHoverColor:"rgba(0,0,0,0.25)",thumbColor:"rgba(0,0,0,0.15)",size:ys()?3:6,hoverSize:ys()?4:8,lineCap:"round"},splitLine:{horizontalBorderColor:i[12],horizontalBorderColorOpacity:.2,horizontalBorderWidth:2,verticalBorderColor:i[11],verticalBorderColorOpacity:.25,verticalBorderWidth:2,showShadow:!0,shadowWidth:8,shadowColors:{left:"rgba(0,0,0,0.1)",right:"rgba(0,0,0,0)"}},prepareSelectMask:{backgroundColor:i[5],backgroundOpacity:.3},background:{color:i[8],opacity:1}}},xs=function(t,e){return xs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},xs(t,e)};function Ss(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}xs(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Es=function(){return Es=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Es.apply(this,arguments)};function Ts(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function bs(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function _s(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function Ls(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}var Os=function(){function t(t){this.x=0,this.y=0,this.width=0,this.height=0,this.colIndex=-1,this.level=0,this.isLeaf=!1,this.children=[],this.padding=0;var e=t.id,n=t.key,r=t.value,i=t.label,o=t.parent,a=t.level,s=t.rowIndex,l=t.isTotals,u=t.isGrandTotals,h=t.isSubTotals,c=t.isCollapsed,d=t.hierarchy,p=t.isPivotMode,f=t.seriesNumberWidth,v=t.field,g=t.spreadsheet,y=t.query,m=t.belongsCell,C=t.inCollapseNode,w=t.isTotalMeasure,x=t.isLeaf;this.id=e,this.key=n,this.value=r,this.label=i||r,this.parent=o,this.level=a,this.rowIndex=s,this.isTotals=l,this.isCollapsed=c,this.hierarchy=d,this.isPivotMode=p,this.seriesNumberWidth=f,this.field=v,this.spreadsheet=g,this.query=y,this.belongsCell=m,this.inCollapseNode=C,this.isTotalMeasure=w,this.isLeaf=x,this.isGrandTotals=u,this.isSubTotals=h,this.config={x:0,y:0,width:0,height:0,colIndex:-1,children:[],padding:0,id:"",key:"",value:"",label:""}}return t.getFieldPath=function(t,e){if(t&&!t.isTotals||t&&e){for(var n=t.parent,r=[t.field];n&&n.id!==M;)r.push(n.field),n=n.parent;return r.reverse()}return[]},t.getAllLeavesOfNode=function(t){var e=[];if(t.isLeaf)return[t];for(var n=Ls([],_s(t.children),!1),r=n.shift();r;)r.isLeaf?e.push(r):n.unshift.apply(n,Ls([],_s(r.children),!1)),r=n.shift();return e},t.getAllChildrenNode=function(t){var e=[];if(t.isLeaf)return[t];for(var n=Ls([],_s(t.children||[]),!1),r=n.shift();r;)e.push(r),n.unshift.apply(n,Ls([],_s(r.children),!1)),r=n.shift();return e},t.getAllBranch=function(t){for(var e=[],n=this.getAllLeavesOfNode(t),r=n.shift(),i=[];r;){i.unshift(r);for(var o=r.parent;o&&!ra(o,t);)i.unshift(o),o=o.parent;e.push(i),r=n.shift(),i=[]}return e},t.blankNode=function(){return new t({id:"",key:"",value:""})},t.rootNode=function(){return new t({id:"root",key:"",value:""})},t.prototype.toJSON=function(){return Ca(this,["config","hierarchy","parent","spreadsheet"])},t}(),Is=function(){function t(){this.width=0,this.height=0,this.maxLevel=-1,this.sampleNodesForAllLevels=[],this.sampleNodeForLastLevel=null,this.allNodesWithoutRoot=[],this.indexNode=[]}return t.prototype.getLeaves=function(){return this.allNodesWithoutRoot.filter((function(t){return t.isLeaf}))},t.prototype.getNodes=function(t){return void 0!==t?this.allNodesWithoutRoot.filter((function(e){return e.level===t})):this.allNodesWithoutRoot},t.prototype.getNodesLessThanLevel=function(t){return this.allNodesWithoutRoot.filter((function(e){return e.level<=t}))},t.prototype.pushNode=function(t,e){void 0===e&&(e=-1),-1===e?this.allNodesWithoutRoot.push(t):this.allNodesWithoutRoot.splice(e,0,t)},t.prototype.pushIndexNode=function(t){this.indexNode.push(t)},t.prototype.getIndexNodes=function(){return this.indexNode},t}(),Rs=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1),this.label=t,this.isSubTotals=e,this.isGrandTotals=n},Ms=function(t){this.label=t},As=function(t,e,n){var r,i,o="".concat(t).concat(A).concat(e);if(!n)return o;var a=In(n,"options.customHeaderCells"),s=null==a?void 0:a.mode,l=null==a?void 0:a.cellLabels;if(na(l))return o;var u,h=l.map((function(t){return"root".concat(A).concat(t)}));if("pick"!==s)u=h.includes(o)?null:o;else try{for(var c=bs(h),d=c.next();!d.done;d=c.next()){var p=d.value,f=o.split(A).length,v=p.split(A).length;if(f===v){if(o===p){u=o;break}}else{var g=f<v?o:p;if((f>v?o:p).includes(g)){u=o;break}}}}catch(t){r={error:t}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}return u},Bs=function(t,e,n,r){return e.layoutArrange?e.layoutArrange(e.spreadsheet,n,r,t):t},Ds=function(t,e,n,r){var i=!0,o=function(t,n,i){void 0===n&&(n=-1),void 0===i&&(i=-1),-1===n?(e.children.push(t),r.pushNode(t)):(e.children.splice(n,0,t),r.pushNode(t,i))};if(t.layoutHierarchy){var a=t.layoutHierarchy(t.spreadsheet,n);if(a){var s=!!ta(null==a?void 0:a.delete)&&(null==a?void 0:a.delete);i=!s;var l=a.push,u=a.unshift,h=e.children.length,c=r.getNodes().length;na(u)||(_o(u,(function(t){o(t)})),h=e.children.length,c=r.getNodes().length),na(l)||_o(l,(function(t){o(t)})),s||o(n,h,c)}else o(n)}else o(n);return i},Ns=function(t,e,n){(null==t?void 0:t.layoutCoordinate)&&((null==e?void 0:e.isLeaf)||(null==n?void 0:n.isLeaf))&&(null==t||t.layoutCoordinate(t.spreadsheet,e,n))};function Ps(t,e){for(var n={},r=t;r&&r.key;)r.isTotals&&!e||(n[r.key]=r.value),r=r.parent;return n}var ks=function(t){var e,n=t.addTotalMeasureInTotal,r=t.addMeasureInTotalQuery,i=t.parentNode,o=t.currentField,a=t.fields,s=t.facetCfg,u=t.hierarchy,h=a.indexOf(o),c=s.dataSet,d=s.values,p=s.spreadsheet,f=[],v={};if(i.isTotals)n&&(v=Ps(i.parent,!0),f.push.apply(f,Ls([],_s(d.map((function(t){return new Ms(t)}))),!1)));else{v=Ps(i,!0);var g=c.getDimensionValues(o,v),y=Bs(g,s,i,o);f.push.apply(f,Ls([],_s(y||[]),!1));var m=c.getFieldName(o);na(f)&&(o===l?f.push.apply(f,Ls([],_s(null===(e=c.fields)||void 0===e?void 0:e.values),!1)):f.push(m||o)),function(t,e,n){var r,i,o,a=null!==(o=n.colCfg.hideMeasureColumn)&&void 0!==o&&o,s=n.dataSet.fields.valueInCols;try{for(var u=bs(t),h=u.next();!h.done;h=u.next()){var c=h.value;a&&s&&e===l&&t.splice(t.indexOf(c),1)}}catch(t){r={error:t}}finally{try{h&&!h.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}}(f,o,s),function(t){var e,n,r,i=t.isFirstField,o=t.currentField,a=t.fieldValues,s=t.spreadsheet,u=t.lastField,h=s.getTotalsConfig(i?o:u);i?h.showGrandTotals&&(n=h.reverseLayout?"unshift":"push",r=new Rs(h.label,!1,!0)):(null==h?void 0:h.showSubTotals)&&Ka(a)>1&&o!==l&&(n=h.reverseSubLayout?"unshift":"push",r=new Rs(h.subLabel,!0)),null===(e=a[n])||void 0===e||e.call(a,r)}({currentField:o,lastField:a[h-1],isFirstField:0===h,fieldValues:f,spreadsheet:p})}zs({currentField:o,fields:a,fieldValues:Ai(f),facetCfg:s,hierarchy:u,parentNode:i,level:h,query:v,addMeasureInTotalQuery:r,addTotalMeasureInTotal:n})},zs=function(t){var e,n,r,i,o,a,s,u,h,c=t.currentField,d=t.fields,p=t.fieldValues,f=t.facetCfg,v=t.hierarchy,g=t.parentNode,y=t.level,m=t.query,C=t.addMeasureInTotalQuery,w=t.addTotalMeasureInTotal,x=f.spreadsheet,S=f.collapsedCols,E=f.colCfg;try{for(var T=bs(p.entries()),b=T.next();!b.done;b=T.next()){var _=_s(b.value,2),L=_[0],O=_[1],I=O instanceof Rs,R=O instanceof Ms,M=void 0,A=void 0,B=!1,D=!1,N=!1,P=c;if(I){var k=O;D=k.isGrandTotals,N=k.isSubTotals,M=ls(O.label),C?(A=va({},m,((r={}).$$extra$$=null===(s=null==x?void 0:x.dataSet)||void 0===s?void 0:s.fields.values[0],r)),B=!0):(A=m,w||(B=!0))}else if(R)M=ls(O.label),A=va({},m,((i={}).$$extra$$=M,i)),P=l,B=!0;else if(x.isTableMode())M=O,P=d[L],A=va({},m,((o={})[P]=M,o)),B=!0;else{A=va({},m,((a={})[c]=M=O,a));var z=null===(h=null===(u=x.dataCfg.fields)||void 0===u?void 0:u.valueInCols)||void 0===h||h,F=(null==E?void 0:E.hideMeasureColumn)&&z&&$o(d,l)?2:1;B=y===d.length-F}var H=As(g.id,M,x);if(!H)return;var G=!!ta(S[H])&&S[H],W=new Os({id:H,key:P,value:M,level:y,field:P,parent:g,isTotals:I,isGrandTotals:D,isSubTotals:N,isTotalMeasure:R,isCollapsed:G,hierarchy:v,query:A,spreadsheet:x,isLeaf:B||G}),Y=Ds(f,g,W,v);!(y>v.maxLevel)||D||g.isGrandTotals||g.isSubTotals||W.isSubTotals||(v.sampleNodesForAllLevels.push(W),v.sampleNodeForLastLevel=W,v.maxLevel=y),B||G||!Y?(W.isLeaf=!0,v.pushIndexNode(W),W.rowIndex=v.getIndexNodes().length-1):ks({addTotalMeasureInTotal:w,addMeasureInTotalQuery:C,parentNode:W,currentField:d[y+1],fields:d,facetCfg:f,hierarchy:v})}}catch(t){e={error:t}}finally{try{b&&!b.done&&(n=T.return)&&n.call(T)}finally{if(e)throw e.error}}},Fs=function(t){var e,n=t.facetCfg,r=t.hierarchy,i=t.parentNode,o=n.columns,a=n.spreadsheet,s=n.dataSet,l=n.interaction.hiddenColumnFields,u=void 0===l?[]:l,c=!na(a.store.get("initColumnNodes")),d=null===(e=a.options)||void 0===e?void 0:e.showSeriesNumber,p=c?To(o,u):o,f=Ls([],_s(p),!1),v=zo(p,(function(t){return s.getFieldName(t)}));d&&(f.unshift(h),v.unshift(ls("序号"))),zs({currentField:p[0],fields:f,fieldValues:v,facetCfg:n,hierarchy:r,parentNode:i,level:0,query:{},addMeasureInTotalQuery:!1,addTotalMeasureInTotal:!1})},Hs="Transform Data",Gs="Header Layout",Ws="Data Cell Render",Ys=function(){function t(){var t=this;this.debug=!1,this.debugCallback=function(e,n){if(t.debug){var r=performance.now();n();var i=performance.now();console.log(e,"".concat(i-r," ms"))}else n()},this.logger=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];t.debug&&console.log.apply(console,Ls([e],_s(n),!1))}}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.setDebug=function(t){this.debug=t},t}(),Us=Object.freeze({__proto__:null,ArrowDown:'\n<svg width="10px" height="10px" viewBox="0 0 10 10" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n<g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" font-family="Roboto, PingFangSC, BlinkMacSystemFont, Microsoft YaHei, Arial, sans-serif" font-size="12" font-weight="bold">\n    <text id="↓" fill="#29A294">\n        <tspan x="-0.225097656" y="8.5">↓</tspan>\n    </text>\n</g>\n</svg>',ArrowUp:'<svg width="10px" height="10px" viewBox="0 0 10 10" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n<g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" font-family="Roboto, PingFangSC, BlinkMacSystemFont, Microsoft YaHei, Arial, sans-serif" font-size="12" font-weight="bold">\n    <text id="↑" fill="#FF4D4F">\n        <tspan x="-0.225097656" y="8.5">↑</tspan>\n    </text>\n</g>\n</svg>\n',CellDown:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="7px" height="9px" viewBox="0 0 7 9" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 58 (84663) - https://sketch.com --\x3e\n    <title>down</title>\n    <desc>Created with Sketch.</desc>\n    <g id="一期开发" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <polygon id="down" fill="#58AE57" transform="translate(3.500000, 4.500000) scale(1, -1) translate(-3.500000, -4.500000) " points="3.5 0 7 9 0 9"></polygon>\n    </g>\n</svg>',CellUp:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="7px" height="9px" viewBox="0 0 7 9" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 58 (84663) - https://sketch.com --\x3e\n    <title>up</title>\n    <desc>Created with Sketch.</desc>\n    <g id="一期开发" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <polygon id="up" fill="#F46649" points="3.5 0 7 9 0 9"></polygon>\n    </g>\n</svg> ',GlobalAsc:'<svg t="1557124621626" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"\nxmlns="http://www.w3.org/2000/svg" p-id="17452"\nxmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14">\n<defs>\n  <style type="text/css"></style>\n</defs>\n<path d="M182.272 167.04a8 8 0 0 0-12.544 0L57.728 309.056A8 8 0 0 0 64 321.984h76.032v530.048c0 4.352 3.584 7.936 7.936 7.936h56.064a8 8 0 0 0 7.936-7.936V321.92H288a8 8 0 0 0 6.272-12.992l-112-141.888z m209.728 626.944h176c4.416 0 8 3.584 8 8v56a8 8 0 0 1-8 8h-176A8 8 0 0 1 384 857.984v-56c0-4.416 3.584-8 8-8z m0-424h368c4.416 0 8 3.648 8 8v56a8 8 0 0 1-8 8h-368A8 8 0 0 1 384 433.984v-56c0-4.352 3.584-8 8-8z m528-139.968h-528A8 8 0 0 1 384 222.016v-56c0-4.416 3.584-8 8-8h528c4.416 0 8 3.584 8 8v56a8 8 0 0 1-8 8z m-256 424h-272A8 8 0 0 1 384 646.016v-56c0-4.416 3.584-8 8-8h272c4.416 0 8 3.584 8 8v56a8 8 0 0 1-8 8z" p-id="17453"></path>\n</svg>',GlobalDesc:'<svg t="1557124685600" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"\n  xmlns="http://www.w3.org/2000/svg" p-id="17561"\n  xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14">\n  <defs>\n    <style type="text/css"></style>\n  </defs>\n  <path d="M182.272 856.96a8 8 0 0 1-12.544 0l-112-141.952A8 8 0 0 1 64 702.08h76.032V172.032c0-4.416 3.584-8 7.936-8h56.064c4.352 0 7.936 3.584 7.936 8v529.984H288c6.72 0 10.496 7.808 6.272 12.992l-112 141.888z m209.728-626.944h176A8 8 0 0 0 576 222.016v-56a8 8 0 0 0-8-8h-176A8 8 0 0 0 384 166.016v56c0 4.416 3.584 8 8 8z m0 424h368a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8h-368A8 8 0 0 0 384 590.016v56c0 4.416 3.584 8 8 8z m528 139.968h-528a8 8 0 0 0-8 8v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z m-256-424h-272A8 8 0 0 0 384 377.984v56c0 4.416 3.584 8 8 8h272a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z" p-id="17562"></path>\n</svg>',GroupAsc:'<svg t="1557124695786" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"\n  xmlns="http://www.w3.org/2000/svg" p-id="17670"\n  xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14">\n  <defs>\n    <style type="text/css"></style>\n  </defs>\n  <path d="M182.272 167.04a8 8 0 0 0-12.544 0L57.728 309.056A8 8 0 0 0 64 321.984h76.032v530.048c0 4.352 3.584 7.936 7.936 7.936h56.064a8 8 0 0 0 7.936-7.936V321.92H288a8 8 0 0 0 6.272-12.992l-112-141.888z m209.728 62.976h304A8 8 0 0 0 704 222.016v-56a8 8 0 0 0-8-8h-304A8 8 0 0 0 384 166.016v56c0 4.416 3.584 8 8 8z m0 424h304a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8h-304A8 8 0 0 0 384 590.016v56c0 4.416 3.584 8 8 8z m528 139.968h-528a8 8 0 0 0-8 8v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z m0-424h-528A8 8 0 0 0 384 377.984v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z" p-id="17671"></path>\n</svg>',GroupDesc:'<svg t="1557124710652" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"\n  xmlns="http://www.w3.org/2000/svg" p-id="17779"\n  xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14">\n  <defs>\n    <style type="text/css"></style>\n  </defs>\n  <path d="M182.272 856.96a8 8 0 0 1-12.544 0l-112-141.952A8 8 0 0 1 64 702.08h76.032V172.032c0-4.416 3.584-8 7.936-8h56.064c4.352 0 7.936 3.584 7.936 8v529.984H288c6.72 0 10.496 7.808 6.272 12.992l-112 141.888z m209.728-626.944h304A8 8 0 0 0 704 222.016v-56a8 8 0 0 0-8-8h-304A8 8 0 0 0 384 166.016v56c0 4.416 3.584 8 8 8z m0 424h304a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8h-304A8 8 0 0 0 384 590.016v56c0 4.416 3.584 8 8 8z m528 139.968h-528a8 8 0 0 0-8 8v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z m0-424h-528A8 8 0 0 0 384 377.984v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z" p-id="17780"></path>\n</svg>',Minus:'<svg t="1557140120188" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"\nxmlns="http://www.w3.org/2000/svg" p-id="16909" xmlns:xlink="http://www.w3.org/1999/xlink"\nwidth="200" height="200">\n\t<defs>\n\t\t<style type="text/css">\n\t\t</style>\n\t</defs>\n\t<path d="M328 544h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"\n\tp-id="16910">\n\t</path>\n\t<path d="M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32z m-40 728H184V184h656v656z"\n\tp-id="16911">\n\t</path>\n</svg>',Plus:'<svg t="1557140186692" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"\nxmlns="http://www.w3.org/2000/svg" p-id="17025" xmlns:xlink="http://www.w3.org/1999/xlink"\nwidth="200" height="200">\n\t<defs>\n\t\t<style type="text/css">\n\t\t</style>\n\t</defs>\n\t<path d="M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"\n\tp-id="17026">\n\t</path>\n\t<path d="M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32z m-40 728H184V184h656v656z"\n\tp-id="17027">\n\t</path>\n</svg>',SortDown:'<svg t="1565940955886" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"\n     p-id="17472" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200">\n  <defs>\n    <style type="text/css"></style>\n  </defs>\n  <path\n    fill-opacity="0.45"\n    d="M948 392.992l-403.008 488.99200001Q532 896 512.992 896t-32-14.016L76 392.992q-18.016-20.992-7.008-46.016T108 321.98400001L916 321.98400001q28 0 39.008 24.99199999T948 392.992z"\n    p-id="17473" data-spm-anchor-id="a313x.7781069.0.i2" class="selected"></path>\n</svg>\n',SortUp:'<svg t="1565940979768" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"\n     p-id="17620" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200">\n  <defs>\n    <style type="text/css"></style>\n  </defs>\n  <path\n    fill-opacity="0.45"\n    d="M76 631.008l403.008-488.99200001Q492 128 511.008 128t32 14.016L948 631.008q18.016 20.992 7.008 46.016T916 702.01599999L108 702.01599999q-28 0-39.008-24.99199999T76 631.008z"\n    p-id="17621"></path>\n</svg>\n',SortDownSelected:'<svg t="1565940955886" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"\n     p-id="17472" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200">\n  <defs>\n    <style type="text/css"></style>\n  </defs>\n  <path\n    d="M948 392.992l-403.008 488.99200001Q532 896 512.992 896t-32-14.016L76 392.992q-18.016-20.992-7.008-46.016T108 321.98400001L916 321.98400001q28 0 39.008 24.99199999T948 392.992z"\n    p-id="17473" data-spm-anchor-id="a313x.7781069.0.i2" class="selected"></path>\n</svg>\n',SortUpSelected:'<svg t="1565940979768" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"\np-id="17620" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200">\n<defs>\n<style type="text/css"></style>\n</defs>\n<path\nd="M76 631.008l403.008-488.99200001Q492 128 511.008 128t32 14.016L948 631.008q18.016 20.992 7.008 46.016T916 702.01599999L108 702.01599999q-28 0-39.008-24.99199999T76 631.008z"\np-id="17621"></path>\n</svg>\n',InfoCircle:'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1590389330617" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="19656" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M512 64c-247.4 0-448 200.6-448 448s200.6 448 448 448 448-200.6 448-448-200.6-448-448-448z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z" fill="" p-id="19657"></path><path d="M464 336c0 26.5 21.5 48 48 48s48-21.5 48-48-21.5-48-48-48-48 21.5-48 48zM536 448h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-272c0-4.4-3.6-8-8-8z" fill="" p-id="19658"></path></svg>',ExpandColIcon:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="23px" height="12px" viewBox="0 0 23 12" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title>编组 8备份 3</title>\n    <g id="----隐藏列标注！" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="隐藏列标注" transform="translate(-275.000000, -824.000000)">\n            <rect fill="#FFFFFF" x="0" y="0" width="1333" height="1167"></rect>\n            <g id="编组-8备份-3" transform="translate(275.000000, 824.000000)">\n                <rect id="矩形" stroke-opacity="0.25" stroke="#000000" fill="#F7F7F7" x="0.5" y="0.5" width="11" height="11"></rect>\n                <rect id="矩形备份-9" stroke-opacity="0.25" stroke="#000000" fill="#F7F7F7" x="11.5" y="0.5" width="11" height="11"></rect>\n                <g id="7.Icon/arrow/15.down/fill" transform="translate(6.000000, 6.000000) rotate(90.000000) translate(-6.000000, -6.000000) " fill="#000000" fill-rule="nonzero" opacity="0.65">\n                    <path d="M7.25020811,6.37218077 L4.91348936,8.20968077 C4.82677061,8.27764952 4.69903624,8.21671202 4.69903624,8.10655577 L4.69903624,4.43272764 C4.69903624,4.32257139 4.82677061,4.26046202 4.91348936,4.32960264 L7.25020811,6.16593077 C7.31700499,6.21866514 7.31700499,6.31944639 7.25020811,6.37218077 Z" id="fill" transform="translate(5.999671, 6.269385) rotate(90.000000) translate(-5.999671, -6.269385) "></path>\n                </g>\n                <g id="7.Icon/arrow/15.down/fill" transform="translate(17.000000, 6.000000) rotate(270.000000) translate(-17.000000, -6.000000) translate(11.000000, 0.000000)" fill="#000000" fill-rule="nonzero" opacity="0.65">\n                    <path d="M7.25020811,6.37218077 L4.91348936,8.20968077 C4.82677061,8.27764952 4.69903624,8.21671202 4.69903624,8.10655577 L4.69903624,4.43272764 C4.69903624,4.32257139 4.82677061,4.26046202 4.91348936,4.32960264 L7.25020811,6.16593077 C7.31700499,6.21866514 7.31700499,6.31944639 7.25020811,6.37218077 Z" id="fill" transform="translate(5.999671, 6.269385) rotate(90.000000) translate(-5.999671, -6.269385) "></path>\n                </g>\n            </g>\n            <line x1="286.5" y1="813" x2="286.5" y2="864.5" id="路径-2备份-3" stroke="#000000" opacity="0.25"></line>\n        </g>\n    </g>\n</svg>',Trend:'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1596433821690" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="20229" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><style type="text/css"></style></defs><path d="M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM305.8 637.7c3.1 3.1 8.1 3.1 11.3 0l138.3-137.6L583 628.5c3.1 3.1 8.2 3.1 11.3 0l275.4-275.3c3.1-3.1 3.1-8.2 0-11.3l-39.6-39.6c-3.1-3.1-8.2-3.1-11.3 0l-230 229.9L461.4 404c-3.1-3.1-8.2-3.1-11.3 0L266.3 586.7c-3.1 3.1-3.1 8.2 0 11.3l39.5 39.7z" p-id="20230"></path></svg>',DrillDownIcon:'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1608030723688" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="21482" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16"><defs><style type="text/css"></style></defs><path d="M547.648 696a32 32 0 0 1 31.488 26.24l0.512 5.76v151.68l145.216-144.512a32 32 0 0 1 40.832-3.648l4.416 3.712a32 32 0 0 1 3.584 40.832l-3.712 4.48-203.072 202.24a32 32 0 0 1-40.768 3.648l-4.416-3.712-202.24-202.24a32 32 0 0 1 40.832-48.96l4.416 3.712 150.912 150.912v-158.144a32 32 0 0 1 32-32z m194.56-529.28l4.928 3.072 233.792 180.224a32 32 0 0 1 1.728 49.28l-4.864 3.52-409.792 245.568a32 32 0 0 1-27.328 2.624l-5.184-2.432-422.4-245.568a32 32 0 0 1-7.552-49.28l4.544-4.032 242.816-180.288a32 32 0 0 1 42.432 47.552l-4.288 3.84-203.84 151.296 364.16 211.648 353.28-211.712-196.608-151.552a32 32 0 0 1-8.896-40l3.136-4.864a32 32 0 0 1 40-8.96zM547.712 28.672a32 32 0 0 1 31.488 26.24l0.512 5.76v396.992a32 32 0 0 1-63.488 5.76l-0.512-5.76V60.736a32 32 0 0 1 32-32z" p-id="21483" fill="currentColor"></path></svg>\n',EyeOutlined:'<svg viewBox="64 64 896 896" focusable="false" data-icon="eye" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"></path></svg>'}),Vs={},js=function(t,e){Vs[ua(t)]=e},Xs=function(t){return Vs[ua(t)]};Je(Us).forEach((function(t){js(t,Us[t])}));var Ks=function(t){return null!==t&&"function"!=typeof t&&isFinite(t.length)},$s={}.toString,qs=function(t,e){return $s.call(t)==="[object "+e+"]"},Zs=function(t){return qs(t,"Function")},Qs=function(t){return null==t},Js=function(t){return Array.isArray?Array.isArray(t):qs(t,"Array")},tl=function(t){var e=typeof t;return null!==t&&"object"===e||"function"===e};function el(t,e){if(t)if(Js(t))for(var n=0,r=t.length;n<r&&!1!==e(t[n],n);n++);else if(tl(t))for(var i in t)if(t.hasOwnProperty(i)&&!1===e(t[i],i))break}var nl=function(t){return"object"==typeof t&&null!==t},rl=function(t){if(Js(t))return t.reduce((function(t,e){return Math.max(t,e)}),t[0])},il=function(t){if(Js(t))return t.reduce((function(t,e){return Math.min(t,e)}),t[0])},ol=function(t){return qs(t,"String")},al=function(t){return qs(t,"Number")};var sl=function(t,e){return(t%e+e)%e},ll=Math.PI/180,ul=function(t){return ll*t},hl=Object.values?function(t){return Object.values(t)}:function(t){var e=[];return el(t,(function(n,r){Zs(t)&&"prototype"===r||e.push(n)})),e},cl=function(t){var e=function(t){return Qs(t)?"":t.toString()}(t);return e.charAt(0).toUpperCase()+e.substring(1)};function dl(t,e){for(var n in e)e.hasOwnProperty(n)&&"constructor"!==n&&void 0!==e[n]&&(t[n]=e[n])}function pl(t,e,n,r){return e&&dl(t,e),n&&dl(t,n),r&&dl(t,r),t}var fl,vl=function(t,e){if(t===e)return!0;if(!t||!e)return!1;if(ol(t)||ol(e))return!1;if(Ks(t)||Ks(e)){if(t.length!==e.length)return!1;for(var n=!0,r=0;r<t.length&&(n=vl(t[r],e[r]));r++);return n}if(nl(t)||nl(e)){var i=Object.keys(t),o=Object.keys(e);if(i.length!==o.length)return!1;for(n=!0,r=0;r<i.length&&(n=vl(t[i[r]],e[i[r]]));r++);return n}return!1},gl={},yl=function(t){return gl[t=t||"g"]?gl[t]+=1:gl[t]=1,t+gl[t]},ml=function(){};!function(t,e){if(!Zs(t))throw new TypeError("Expected a function");var n=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=e?e.apply(this,r):r[0],a=n.cache;if(a.has(o))return a.get(o);var s=t.apply(this,r);return a.set(o,s),s};n.cache=new Map}((function(t,e){void 0===e&&(e={});var n=e.fontSize,r=e.fontFamily,i=e.fontWeight,o=e.fontStyle,a=e.fontVariant;return fl||(fl=document.createElement("canvas").getContext("2d")),fl.font=[o,a,i,n+"px",r].join(" "),fl.measureText(ol(t)?t:"").width}),(function(t,e){return void 0===e&&(e={}),function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}([t],hl(e)).join("")}));var Cl="\t\n\v\f\r   ᠎             　\u2028\u2029",wl=new RegExp("([a-z])["+Cl+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+Cl+"]*,?["+Cl+"]*)+)","ig"),xl=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+Cl+"]*,?["+Cl+"]*","ig"),Sl=function(t){if(!t)return null;if(Js(t))return t;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(t).replace(wl,(function(r,i,o){var a=[],s=i.toLowerCase();if(o.replace(xl,(function(t,e){e&&a.push(+e)})),"m"===s&&a.length>2&&(n.push([i].concat(a.splice(0,2))),s="l",i="m"===i?"l":"L"),"o"===s&&1===a.length&&n.push([i,a[0]]),"r"===s)n.push([i].concat(a));else for(;a.length>=e[s]&&(n.push([i].concat(a.splice(0,e[s]))),e[s]););return t})),n},El=function(t,e){for(var n=[],r=0,i=t.length;i-2*!e>r;r+=2){var o=[{x:+t[r-2],y:+t[r-1]},{x:+t[r],y:+t[r+1]},{x:+t[r+2],y:+t[r+3]},{x:+t[r+4],y:+t[r+5]}];e?r?i-4===r?o[3]={x:+t[0],y:+t[1]}:i-2===r&&(o[2]={x:+t[0],y:+t[1]},o[3]={x:+t[2],y:+t[3]}):o[0]={x:+t[i-2],y:+t[i-1]}:i-4===r?o[3]=o[2]:r||(o[0]={x:+t[r],y:+t[r+1]}),n.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return n},Tl=function(t,e,n,r,i){var o=[];if(null===i&&null===r&&(r=n),t=+t,e=+e,n=+n,r=+r,null!==i){var a=Math.PI/180,s=t+n*Math.cos(-r*a),l=t+n*Math.cos(-i*a);o=[["M",s,e+n*Math.sin(-r*a)],["A",n,n,0,+(i-r>180),0,l,e+n*Math.sin(-i*a)]]}else o=[["M",t,e],["m",0,-r],["a",n,r,0,1,1,0,2*r],["a",n,r,0,1,1,0,-2*r],["z"]];return o},bl=function(t){if(!(t=Sl(t))||!t.length)return[["M",0,0]];var e,n,r=[],i=0,o=0,a=0,s=0,l=0;"M"===t[0][0]&&(a=i=+t[0][1],s=o=+t[0][2],l++,r[0]=["M",i,o]);for(var u=3===t.length&&"M"===t[0][0]&&"R"===t[1][0].toUpperCase()&&"Z"===t[2][0].toUpperCase(),h=void 0,c=void 0,d=l,p=t.length;d<p;d++){if(r.push(h=[]),(e=(c=t[d])[0])!==e.toUpperCase())switch(h[0]=e.toUpperCase(),h[0]){case"A":h[1]=c[1],h[2]=c[2],h[3]=c[3],h[4]=c[4],h[5]=c[5],h[6]=+c[6]+i,h[7]=+c[7]+o;break;case"V":h[1]=+c[1]+o;break;case"H":h[1]=+c[1]+i;break;case"R":for(var f=2,v=(n=[i,o].concat(c.slice(1))).length;f<v;f++)n[f]=+n[f]+i,n[++f]=+n[f]+o;r.pop(),r=r.concat(El(n,u));break;case"O":r.pop(),(n=Tl(i,o,c[1],c[2])).push(n[0]),r=r.concat(n);break;case"U":r.pop(),r=r.concat(Tl(i,o,c[1],c[2],c[3])),h=["U"].concat(r[r.length-1].slice(-2));break;case"M":a=+c[1]+i,s=+c[2]+o;break;default:for(f=1,v=c.length;f<v;f++)h[f]=+c[f]+(f%2?i:o)}else if("R"===e)n=[i,o].concat(c.slice(1)),r.pop(),r=r.concat(El(n,u)),h=["R"].concat(c.slice(-2));else if("O"===e)r.pop(),(n=Tl(i,o,c[1],c[2])).push(n[0]),r=r.concat(n);else if("U"===e)r.pop(),r=r.concat(Tl(i,o,c[1],c[2],c[3])),h=["U"].concat(r[r.length-1].slice(-2));else for(var g=0,y=c.length;g<y;g++)h[g]=c[g];if("O"!==(e=e.toUpperCase()))switch(h[0]){case"Z":i=+a,o=+s;break;case"H":i=h[1];break;case"V":o=h[1];break;case"M":a=h[h.length-2],s=h[h.length-1];break;default:i=h[h.length-2],o=h[h.length-1]}}return r},_l=function(t,e,n,r){return[t,e,n,r,n,r]},Ll=function(t,e,n,r,i,o){var a=1/3,s=2/3;return[a*t+s*n,a*e+s*r,a*i+s*n,a*o+s*r,i,o]},Ol=function(t,e,n,r,i,o,a,s,l,u){n===r&&(n+=1);var h,c,d,p,f,v=120*Math.PI/180,g=Math.PI/180*(+i||0),y=[],m=function(t,e,n){return{x:t*Math.cos(n)-e*Math.sin(n),y:t*Math.sin(n)+e*Math.cos(n)}};if(u)c=u[0],d=u[1],p=u[2],f=u[3];else{t=(h=m(t,e,-g)).x,e=h.y,s=(h=m(s,l,-g)).x,l=h.y,t===s&&e===l&&(s+=1,l+=1);var C=(t-s)/2,w=(e-l)/2,x=C*C/(n*n)+w*w/(r*r);x>1&&(n*=x=Math.sqrt(x),r*=x);var S=n*n,E=r*r,T=(o===a?-1:1)*Math.sqrt(Math.abs((S*E-S*w*w-E*C*C)/(S*w*w+E*C*C)));p=T*n*w/r+(t+s)/2,f=T*-r*C/n+(e+l)/2,c=Math.asin(((e-f)/r).toFixed(9)),d=Math.asin(((l-f)/r).toFixed(9)),c=t<p?Math.PI-c:c,d=s<p?Math.PI-d:d,c<0&&(c=2*Math.PI+c),d<0&&(d=2*Math.PI+d),a&&c>d&&(c-=2*Math.PI),!a&&d>c&&(d-=2*Math.PI)}var b=d-c;if(Math.abs(b)>v){var _=d,L=s,O=l;d=c+v*(a&&d>c?1:-1),s=p+n*Math.cos(d),l=f+r*Math.sin(d),y=Ol(s,l,n,r,i,0,a,L,O,[d,_,p,f])}b=d-c;var I=Math.cos(c),R=Math.sin(c),M=Math.cos(d),A=Math.sin(d),B=Math.tan(b/4),D=4/3*n*B,N=4/3*r*B,P=[t,e],k=[t+D*R,e-N*I],z=[s+D*A,l-N*M],F=[s,l];if(k[0]=2*P[0]-k[0],k[1]=2*P[1]-k[1],u)return[k,z,F].concat(y);for(var H=[],G=0,W=(y=[k,z,F].concat(y).join().split(",")).length;G<W;G++)H[G]=G%2?m(y[G-1],y[G],g).y:m(y[G],y[G+1],g).x;return H},Il=function(t,e){var n,r=bl(t),i=e&&bl(e),o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s=[],l=[],u="",h="",c=function(t,e,n){var r,i;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"].concat(Ol.apply(0,[e.x,e.y].concat(t.slice(1))));break;case"S":"C"===n||"S"===n?(r=2*e.x-e.bx,i=2*e.y-e.by):(r=e.x,i=e.y),t=["C",r,i].concat(t.slice(1));break;case"T":"Q"===n||"T"===n?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"].concat(Ll(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"].concat(Ll(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"].concat(_l(e.x,e.y,t[1],t[2]));break;case"H":t=["C"].concat(_l(e.x,e.y,t[1],e.y));break;case"V":t=["C"].concat(_l(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"].concat(_l(e.x,e.y,e.X,e.Y))}return t},d=function(t,e){if(t[e].length>7){t[e].shift();for(var o=t[e];o.length;)s[e]="A",i&&(l[e]="A"),t.splice(e++,0,["C"].concat(o.splice(0,6)));t.splice(e,1),n=Math.max(r.length,i&&i.length||0)}},p=function(t,e,o,a,s){t&&e&&"M"===t[s][0]&&"M"!==e[s][0]&&(e.splice(s,0,["M",a.x,a.y]),o.bx=0,o.by=0,o.x=t[s][1],o.y=t[s][2],n=Math.max(r.length,i&&i.length||0))};n=Math.max(r.length,i&&i.length||0);for(var f=0;f<n;f++){r[f]&&(u=r[f][0]),"C"!==u&&(s[f]=u,f&&(h=s[f-1])),r[f]=c(r[f],o,h),"A"!==s[f]&&"C"===u&&(s[f]="C"),d(r,f),i&&(i[f]&&(u=i[f][0]),"C"!==u&&(l[f]=u,f&&(h=l[f-1])),i[f]=c(i[f],a,h),"A"!==l[f]&&"C"===u&&(l[f]="C"),d(i,f)),p(r,i,o,a,f),p(i,r,a,o,f);var v=r[f],g=i&&i[f],y=v.length,m=i&&g.length;o.x=v[y-2],o.y=v[y-1],o.bx=parseFloat(v[y-4])||o.x,o.by=parseFloat(v[y-3])||o.y,a.bx=i&&(parseFloat(g[m-4])||a.x),a.by=i&&(parseFloat(g[m-3])||a.y),a.x=i&&g[m-2],a.y=i&&g[m-1]}return i?[r,i]:r},Rl=/,?([a-z]),?/gi,Ml=function(t){return t.join(",").replace(Rl,"$1")},Al=function(t,e,n,r,i){return t*(t*(-3*e+9*n-9*r+3*i)+6*e-12*n+6*r)-3*e+3*n},Bl=function(t,e,n,r,i,o,a,s,l){null===l&&(l=1);for(var u=(l=l>1?1:l<0?0:l)/2,h=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],c=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],d=0,p=0;p<12;p++){var f=u*h[p]+u,v=Al(f,t,n,i,a),g=Al(f,e,r,o,s),y=v*v+g*g;d+=c[p]*Math.sqrt(y)}return u*d},Dl=function(t,e,n,r,i,o,a,s){for(var l,u,h,c,d=[],p=[[],[]],f=0;f<2;++f)if(0===f?(u=6*t-12*n+6*i,l=-3*t+9*n-9*i+3*a,h=3*n-3*t):(u=6*e-12*r+6*o,l=-3*e+9*r-9*o+3*s,h=3*r-3*e),Math.abs(l)<1e-12){if(Math.abs(u)<1e-12)continue;(c=-h/u)>0&&c<1&&d.push(c)}else{var v=u*u-4*h*l,g=Math.sqrt(v);if(!(v<0)){var y=(-u+g)/(2*l);y>0&&y<1&&d.push(y);var m=(-u-g)/(2*l);m>0&&m<1&&d.push(m)}}for(var C,w=d.length,x=w;w--;)C=1-(c=d[w]),p[0][w]=C*C*C*t+3*C*C*c*n+3*C*c*c*i+c*c*c*a,p[1][w]=C*C*C*e+3*C*C*c*r+3*C*c*c*o+c*c*c*s;return p[0][x]=t,p[1][x]=e,p[0][x+1]=a,p[1][x+1]=s,p[0].length=p[1].length=x+2,{min:{x:Math.min.apply(0,p[0]),y:Math.min.apply(0,p[1])},max:{x:Math.max.apply(0,p[0]),y:Math.max.apply(0,p[1])}}},Nl=function(t,e,n,r,i,o,a,s){if(!(Math.max(t,n)<Math.min(i,a)||Math.min(t,n)>Math.max(i,a)||Math.max(e,r)<Math.min(o,s)||Math.min(e,r)>Math.max(o,s))){var l=(t-n)*(o-s)-(e-r)*(i-a);if(l){var u=((t*r-e*n)*(i-a)-(t-n)*(i*s-o*a))/l,h=((t*r-e*n)*(o-s)-(e-r)*(i*s-o*a))/l,c=+u.toFixed(2),d=+h.toFixed(2);if(!(c<+Math.min(t,n).toFixed(2)||c>+Math.max(t,n).toFixed(2)||c<+Math.min(i,a).toFixed(2)||c>+Math.max(i,a).toFixed(2)||d<+Math.min(e,r).toFixed(2)||d>+Math.max(e,r).toFixed(2)||d<+Math.min(o,s).toFixed(2)||d>+Math.max(o,s).toFixed(2)))return{x:u,y:h}}}},Pl=function(t,e,n){return e>=t.x&&e<=t.x+t.width&&n>=t.y&&n<=t.y+t.height},kl=function(t,e,n,r,i){if(i)return[["M",+t+ +i,e],["l",n-2*i,0],["a",i,i,0,0,1,i,i],["l",0,r-2*i],["a",i,i,0,0,1,-i,i],["l",2*i-n,0],["a",i,i,0,0,1,-i,-i],["l",0,2*i-r],["a",i,i,0,0,1,i,-i],["z"]];var o=[["M",t,e],["l",n,0],["l",0,r],["l",-n,0],["z"]];return o.parsePathArray=Ml,o},zl=function(t,e,n,r){return null===t&&(t=e=n=r=0),null===e&&(e=t.y,n=t.width,r=t.height,t=t.x),{x:t,y:e,width:n,w:n,height:r,h:r,x2:t+n,y2:e+r,cx:t+n/2,cy:e+r/2,r1:Math.min(n,r)/2,r2:Math.max(n,r)/2,r0:Math.sqrt(n*n+r*r)/2,path:kl(t,e,n,r),vb:[t,e,n,r].join(" ")}},Fl=function(t,e,n,r,i,o,a,s){Js(t)||(t=[t,e,n,r,i,o,a,s]);var l=Dl.apply(null,t);return zl(l.min.x,l.min.y,l.max.x-l.min.x,l.max.y-l.min.y)},Hl=function(t,e,n,r,i,o,a,s,l){var u=1-l,h=Math.pow(u,3),c=Math.pow(u,2),d=l*l,p=d*l,f=t+2*l*(n-t)+d*(i-2*n+t),v=e+2*l*(r-e)+d*(o-2*r+e),g=n+2*l*(i-n)+d*(a-2*i+n),y=r+2*l*(o-r)+d*(s-2*o+r);return{x:h*t+3*c*l*n+3*u*l*l*i+p*a,y:h*e+3*c*l*r+3*u*l*l*o+p*s,m:{x:f,y:v},n:{x:g,y:y},start:{x:u*t+l*n,y:u*e+l*r},end:{x:u*i+l*a,y:u*o+l*s},alpha:90-180*Math.atan2(f-g,v-y)/Math.PI}},Gl=function(t,e,n){if(!function(t,e){return t=zl(t),e=zl(e),Pl(e,t.x,t.y)||Pl(e,t.x2,t.y)||Pl(e,t.x,t.y2)||Pl(e,t.x2,t.y2)||Pl(t,e.x,e.y)||Pl(t,e.x2,e.y)||Pl(t,e.x,e.y2)||Pl(t,e.x2,e.y2)||(t.x<e.x2&&t.x>e.x||e.x<t.x2&&e.x>t.x)&&(t.y<e.y2&&t.y>e.y||e.y<t.y2&&e.y>t.y)}(Fl(t),Fl(e)))return n?0:[];for(var r=~~(Bl.apply(0,t)/8),i=~~(Bl.apply(0,e)/8),o=[],a=[],s={},l=n?0:[],u=0;u<r+1;u++){var h=Hl.apply(0,t.concat(u/r));o.push({x:h.x,y:h.y,t:u/r})}for(u=0;u<i+1;u++){h=Hl.apply(0,e.concat(u/i));a.push({x:h.x,y:h.y,t:u/i})}for(u=0;u<r;u++)for(var c=0;c<i;c++){var d=o[u],p=o[u+1],f=a[c],v=a[c+1],g=Math.abs(p.x-d.x)<.001?"y":"x",y=Math.abs(v.x-f.x)<.001?"y":"x",m=Nl(d.x,d.y,p.x,p.y,f.x,f.y,v.x,v.y);if(m){if(s[m.x.toFixed(4)]===m.y.toFixed(4))continue;s[m.x.toFixed(4)]=m.y.toFixed(4);var C=d.t+Math.abs((m[g]-d[g])/(p[g]-d[g]))*(p.t-d.t),w=f.t+Math.abs((m[y]-f[y])/(v[y]-f[y]))*(v.t-f.t);C>=0&&C<=1&&w>=0&&w<=1&&(n?l+=1:l.push({x:m.x,y:m.y,t1:C,t2:w}))}}return l};function Wl(t,e){var n=[],r=[];return t.length&&function t(e,i){if(1===e.length)n.push(e[0]),r.push(e[0]);else{for(var o=[],a=0;a<e.length-1;a++)0===a&&n.push(e[0]),a===e.length-2&&r.push(e[a+1]),o[a]=[(1-i)*e[a][0]+i*e[a+1][0],(1-i)*e[a][1]+i*e[a+1][1]];t(o,i)}}(t,e),{left:n,right:r.reverse()}}var Yl=function(t,e,n){if(1===n)return[[].concat(t)];var r=[];if("L"===e[0]||"C"===e[0]||"Q"===e[0])r=r.concat(function(t,e,n){var r=[[t[1],t[2]]];n=n||2;var i=[];"A"===e[0]?(r.push(e[6]),r.push(e[7])):"C"===e[0]?(r.push([e[1],e[2]]),r.push([e[3],e[4]]),r.push([e[5],e[6]])):"S"===e[0]||"Q"===e[0]?(r.push([e[1],e[2]]),r.push([e[3],e[4]])):r.push([e[1],e[2]]);for(var o=r,a=1/n,s=0;s<n-1;s++){var l=Wl(o,a/(1-a*s));i.push(l.left),o=l.right}return i.push(o),i.map((function(t){var e=[];return 4===t.length&&(e.push("C"),e=e.concat(t[2])),t.length>=3&&(3===t.length&&e.push("Q"),e=e.concat(t[1])),2===t.length&&e.push("L"),e.concat(t[t.length-1])}))}(t,e,n));else{var i=[].concat(t);"M"===i[0]&&(i[0]="L");for(var o=0;o<=n-1;o++)r.push(i)}return r},Ul=function(t,e){if(t.length!==e.length)return!1;var n=!0;return el(t,(function(t,r){if(t!==e[r])return n=!1,!1})),n};function Vl(t,e,n){var r=null,i=n;return e<i&&(i=e,r="add"),t<i&&(i=t,r="del"),{type:r,min:i}}var jl=function(t,e){var n=function(t,e){var n,r,i=t.length,o=e.length,a=0;if(0===i||0===o)return null;for(var s=[],l=0;l<=i;l++)s[l]=[],s[l][0]={min:l};for(var u=0;u<=o;u++)s[0][u]={min:u};for(l=1;l<=i;l++)for(n=t[l-1],u=1;u<=o;u++){r=e[u-1],a=Ul(n,r)?0:1;var h=s[l-1][u].min+1,c=s[l][u-1].min+1,d=s[l-1][u-1].min+a;s[l][u]=Vl(h,c,d)}return s}(t,e),r=t.length,i=e.length,o=[],a=1,s=1;if(n[r][i].min!==r){for(var l=1;l<=r;l++){var u=n[l][l].min;s=l;for(var h=a;h<=i;h++)n[l][h].min<u&&(u=n[l][h].min,s=h);a=s,n[l][a].type&&o.push({index:l-1,type:n[l][a].type})}for(l=o.length-1;l>=0;l--)a=o[l].index,"add"===o[l].type?t.splice(a,0,[].concat(t[a])):t.splice(a,1)}var c=i-(r=t.length);if(r<i)for(l=0;l<c;l++)"z"===t[r-1][0]||"Z"===t[r-1][0]?t.splice(r-2,0,t[r-2]):t.push(t[r-1]),r+=1;return t};function Xl(t,e,n){for(var r,i=[].concat(t),o=1/(n+1),a=Kl(e)[0],s=1;s<=n;s++)o*=s,0===(r=Math.floor(t.length*o))?i.unshift([a[0]*o+t[r][0]*(1-o),a[1]*o+t[r][1]*(1-o)]):i.splice(r,0,[a[0]*o+t[r][0]*(1-o),a[1]*o+t[r][1]*(1-o)]);return i}function Kl(t){var e=[];switch(t[0]){case"M":case"L":case"T":e.push([t[1],t[2]]);break;case"A":e.push([t[6],t[7]]);break;case"Q":case"S":e.push([t[3],t[4]]),e.push([t[1],t[2]]);break;case"C":e.push([t[5],t[6]]),e.push([t[1],t[2]]),e.push([t[3],t[4]]);break;case"H":case"V":e.push([t[1],t[1]])}return e}var $l=function(t,e){if(t.length<=1)return t;for(var n,r=0;r<e.length;r++)if(t[r][0]!==e[r][0])switch(n=Kl(t[r]),e[r][0]){case"M":t[r]=["M"].concat(n[0]);break;case"L":t[r]=["L"].concat(n[0]);break;case"A":t[r]=[].concat(e[r]),t[r][6]=n[0][0],t[r][7]=n[0][1];break;case"Q":if(n.length<2){if(!(r>0)){t[r]=e[r];break}n=Xl(n,t[r-1],1)}t[r]=["Q"].concat(n.reduce((function(t,e){return t.concat(e)}),[]));break;case"T":t[r]=["T"].concat(n[0]);break;case"C":if(n.length<3){if(!(r>0)){t[r]=e[r];break}n=Xl(n,t[r-1],2)}t[r]=["C"].concat(n.reduce((function(t,e){return t.concat(e)}),[]));break;case"S":if(n.length<2){if(!(r>0)){t[r]=e[r];break}n=Xl(n,t[r-1],1)}t[r]=["S"].concat(n.reduce((function(t,e){return t.concat(e)}),[]));break;default:t[r]=e[r]}return t},ql=Object.freeze({__proto__:null,catmullRomToBezier:El,fillPath:function(t,e){if(1===t.length)return t;var n=t.length-1,r=e.length-1,i=n/r,o=[];if(1===t.length&&"M"===t[0][0]){for(var a=0;a<r-n;a++)t.push(t[0]);return t}for(a=0;a<r;a++){var s=Math.floor(i*a);o[s]=(o[s]||0)+1}var l=o.reduce((function(e,r,i){return i===n?e.concat(t[n]):e.concat(Yl(t[i],t[i+1],r))}),[]);return l.unshift(t[0]),"Z"!==e[r]&&"z"!==e[r]||l.push("Z"),l},fillPathByDiff:jl,formatPath:$l,intersection:function(t,e){return function(t,e,n){var r,i,o,a,s,l,u,h,c,d;t=Il(t),e=Il(e);for(var p=n?0:[],f=0,v=t.length;f<v;f++){var g=t[f];if("M"===g[0])r=s=g[1],i=l=g[2];else{"C"===g[0]?(c=[r,i].concat(g.slice(1)),r=c[6],i=c[7]):(c=[r,i,r,i,s,l,s,l],r=s,i=l);for(var y=0,m=e.length;y<m;y++){var C=e[y];if("M"===C[0])o=u=C[1],a=h=C[2];else{"C"===C[0]?(d=[o,a].concat(C.slice(1)),o=d[6],a=d[7]):(d=[o,a,o,a,u,h,u,h],o=u,a=h);var w=Gl(c,d,n);if(n)p+=w;else{for(var x=0,S=w.length;x<S;x++)w[x].segment1=f,w[x].segment2=y,w[x].bez1=c,w[x].bez2=d;p=p.concat(w)}}}}}return p}(t,e)},parsePathArray:Ml,parsePathString:Sl,pathToAbsolute:bl,pathToCurve:Il,rectPath:kl}),Zl=function(){function t(t,e){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=t,this.name=t,this.originalEvent=e,this.timeStamp=e.timeStamp}return t.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t.prototype.toString=function(){return"[Event (type="+this.type+")]"},t.prototype.save=function(){},t.prototype.restore=function(){},t}(),Ql=function(){function t(){this._events={}}return t.prototype.on=function(t,e,n){return this._events[t]||(this._events[t]=[]),this._events[t].push({callback:e,once:!!n}),this},t.prototype.once=function(t,e){return this.on(t,e,!0),this},t.prototype.emit=function(t){for(var e=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this._events[t]||[],o=this._events["*"]||[],a=function(r){for(var i=r.length,o=0;o<i;o++)if(r[o]){var a=r[o],s=a.callback;a.once&&(r.splice(o,1),0===r.length&&delete e._events[t],i--,o--),s.apply(e,n)}};a(i),a(o)},t.prototype.off=function(t,e){if(t)if(e){for(var n=this._events[t]||[],r=n.length,i=0;i<r;i++)n[i].callback===e&&(n.splice(i,1),r--,i--);0===n.length&&delete this._events[t]}else delete this._events[t];else this._events={};return this},t.prototype.getEvents=function(){return this._events},t}();function Jl(t,e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}var tu="undefined"!=typeof window&&void 0!==window.document;function eu(t,e){if(t.isCanvas())return!0;for(var n=e.getParent(),r=!1;n;){if(n===t){r=!0;break}n=n.getParent()}return r}function nu(t){return t.cfg.visible&&t.cfg.capture}var ru=function(t){function e(e){var n=t.call(this)||this;n.destroyed=!1;var r=n.getDefaultCfg();return n.cfg=pl(r,e),n}return Ss(e,t),e.prototype.getDefaultCfg=function(){return{}},e.prototype.get=function(t){return this.cfg[t]},e.prototype.set=function(t,e){this.cfg[t]=e},e.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},e}(Ql),iu=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))},ou=function(t,e,n){this.name=t,this.version=e,this.os=n,this.type="browser"},au=function(t){this.version=t,this.type="node",this.name="node",this.os=process.platform},su=function(t,e,n,r){this.name=t,this.version=e,this.os=n,this.bot=r,this.type="bot-device"},lu=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},uu=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},hu=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,cu=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],du=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function pu(t){var e=function(t){return""!==t&&cu.reduce((function(e,n){var r=n[0],i=n[1];if(e)return e;var o=i.exec(t);return!!o&&[r,o]}),!1)}(t);if(!e)return null;var n=e[0],r=e[1];if("searchbot"===n)return new lu;var i=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);i?i.length<3&&(i=iu(iu([],i,!0),function(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}(3-i.length),!0)):i=[];var o=i.join("."),a=function(t){for(var e=0,n=du.length;e<n;e++){var r=du[e],i=r[0];if(r[1].exec(t))return i}return null}(t),s=hu.exec(t);return s&&s[1]?new su(n,o,a,s[1]):new ou(n,o,a)}var fu,vu="undefined"!=typeof Float32Array?Float32Array:Array;function gu(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],h=e[7],c=e[8],d=n[0],p=n[1],f=n[2],v=n[3],g=n[4],y=n[5],m=n[6],C=n[7],w=n[8];return t[0]=d*r+p*a+f*u,t[1]=d*i+p*s+f*h,t[2]=d*o+p*l+f*c,t[3]=v*r+g*a+y*u,t[4]=v*i+g*s+y*h,t[5]=v*o+g*l+y*c,t[6]=m*r+C*a+w*u,t[7]=m*i+C*s+w*h,t[8]=m*o+C*l+w*c,t}function yu(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t}function mu(t,e,n){var r=[0,0,0,0,0,0,0,0,0];return function(t,e){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1}(r,n),gu(t,r,e)}function Cu(t,e,n){var r=[0,0,0,0,0,0,0,0,0];return function(t,e){var n=Math.sin(e),r=Math.cos(e);t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1}(r,n),gu(t,r,e)}function wu(t,e,n){var r=[0,0,0,0,0,0,0,0,0];return function(t,e){t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1}(r,n),gu(t,r,e)}function xu(t,e,n){return gu(t,n,e)}function Su(t,e){for(var n=t?[].concat(t):[1,0,0,0,1,0,0,0,1],r=0,i=e.length;r<i;r++){var o=e[r];switch(o[0]){case"t":mu(n,n,[o[1],o[2]]);break;case"s":wu(n,n,[o[1],o[2]]);break;case"r":Cu(n,n,o[1]);break;case"m":xu(n,n,o[1])}}return n}function Eu(t,e){var n=[],r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],h=t[7],c=t[8],d=e[0],p=e[1],f=e[2],v=e[3],g=e[4],y=e[5],m=e[6],C=e[7],w=e[8];return n[0]=d*r+p*a+f*u,n[1]=d*i+p*s+f*h,n[2]=d*o+p*l+f*c,n[3]=v*r+g*a+y*u,n[4]=v*i+g*s+y*h,n[5]=v*o+g*l+y*c,n[6]=m*r+C*a+w*u,n[7]=m*i+C*s+w*h,n[8]=m*o+C*l+w*c,n}function Tu(t,e){var n=[],r=e[0],i=e[1];return n[0]=t[0]*r+t[3]*i+t[6],n[1]=t[1]*r+t[4]*i+t[7],n}function bu(t){var e=[],n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],h=t[8],c=h*a-s*u,d=-h*o+s*l,p=u*o-a*l,f=n*c+r*d+i*p;return f?(f=1/f,e[0]=c*f,e[1]=(-h*r+i*u)*f,e[2]=(s*r-i*a)*f,e[3]=d*f,e[4]=(h*n-i*l)*f,e[5]=(-s*n+i*o)*f,e[6]=p*f,e[7]=(-u*n+r*l)*f,e[8]=(a*n-r*o)*f,e):null}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)}),fu=new vu(3),vu!=Float32Array&&(fu[0]=0,fu[1]=0,fu[2]=0),function(){var t=function(){var t=new vu(2);return vu!=Float32Array&&(t[0]=0,t[1]=0),t}()}();var _u=Su,Lu="matrix",Ou=["zIndex","capture","visible","type"],Iu=["repeat"];function Ru(t,e){var n={},r=e.attrs;for(var i in t)n[i]=r[i];return n}function Mu(t,e){var n={},r=e.attr();return el(t,(function(t,e){-1!==Iu.indexOf(e)||vl(r[e],t)||(n[e]=t)})),n}function Au(t,e){if(e.onFrame)return t;var n=e.startTime,r=e.delay,i=e.duration,o=Object.prototype.hasOwnProperty;return el(t,(function(t){n+r<t.startTime+t.delay+t.duration&&i>t.delay&&el(e.toAttrs,(function(e,n){o.call(t.toAttrs,n)&&(delete t.toAttrs[n],delete t.fromAttrs[n])}))})),t}var Bu=function(t){function e(e){var n=t.call(this,e)||this;n.attrs={};var r=n.getDefaultAttrs();return pl(r,e.attrs),n.attrs=r,n.initAttrs(r),n.initAnimate(),n}return Ss(e,t),e.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},e.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},e.prototype.onCanvasChange=function(t){},e.prototype.initAttrs=function(t){},e.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},e.prototype.isGroup=function(){return!1},e.prototype.getParent=function(){return this.get("parent")},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.attr=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e[0],i=e[1];if(!r)return this.attrs;if(tl(r)){for(var o in r)this.setAttr(o,r[o]);return this.afterAttrsChange(r),this}return 2===e.length?(this.setAttr(r,i),this.afterAttrsChange(((t={})[r]=i,t)),this):this.attrs[r]},e.prototype.isClipped=function(t,e){var n=this.getClip();return n&&!n.isHit(t,e)},e.prototype.setAttr=function(t,e){var n=this.attrs[t];n!==e&&(this.attrs[t]=e,this.onAttrChange(t,e,n))},e.prototype.onAttrChange=function(t,e,n){"matrix"===t&&this.set("totalMatrix",null)},e.prototype.afterAttrsChange=function(t){if(this.cfg.isClipShape){var e=this.cfg.applyTo;e&&e.onCanvasChange("clip")}else this.onCanvasChange("attr")},e.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},e.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},e.prototype.setZIndex=function(t){this.set("zIndex",t);var e=this.getParent();return e&&e.sort(),this},e.prototype.toFront=function(){var t=this.getParent();if(t){var e=t.getChildren();this.get("el");var n=e.indexOf(this);e.splice(n,1),e.push(this),this.onCanvasChange("zIndex")}},e.prototype.toBack=function(){var t=this.getParent();if(t){var e=t.getChildren();this.get("el");var n=e.indexOf(this);e.splice(n,1),e.unshift(this),this.onCanvasChange("zIndex")}},e.prototype.remove=function(t){void 0===t&&(t=!0);var e=this.getParent();e?(Jl(e.getChildren(),this),e.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),t&&this.destroy()},e.prototype.resetMatrix=function(){this.attr(Lu,this.getDefaultMatrix()),this.onCanvasChange("matrix")},e.prototype.getMatrix=function(){return this.attr(Lu)},e.prototype.setMatrix=function(t){this.attr(Lu,t),this.onCanvasChange("matrix")},e.prototype.getTotalMatrix=function(){var t=this.cfg.totalMatrix;if(!t){var e=this.attr("matrix"),n=this.cfg.parentMatrix;t=n&&e?Eu(n,e):e||n,this.set("totalMatrix",t)}return t},e.prototype.applyMatrix=function(t){var e=this.attr("matrix"),n=null;n=t&&e?Eu(t,e):e||t,this.set("totalMatrix",n),this.set("parentMatrix",t)},e.prototype.getDefaultMatrix=function(){return null},e.prototype.applyToMatrix=function(t){var e=this.attr("matrix");return e?Tu(e,t):t},e.prototype.invertFromMatrix=function(t){var e=this.attr("matrix");if(e){var n=bu(e);if(n)return Tu(n,t)}return t},e.prototype.setClip=function(t){var e=this.getCanvas(),n=null;if(t){var r=this.getShapeBase()[cl(t.type)];r&&(n=new r({type:t.type,isClipShape:!0,applyTo:this,attrs:t.attrs,canvas:e}))}return this.set("clipShape",n),this.onCanvasChange("clip"),n},e.prototype.getClip=function(){var t=this.cfg.clipShape;return t||null},e.prototype.clone=function(){var t=this,e=this.attrs,n={};el(e,(function(t,r){Js(e[r])?n[r]=function(t){for(var e=[],n=0;n<t.length;n++)Js(t[n])?e.push([].concat(t[n])):e.push(t[n]);return e}(e[r]):n[r]=e[r]}));var r=new(0,this.constructor)({attrs:n});return el(Ou,(function(e){r.set(e,t.get(e))})),r},e.prototype.destroy=function(){this.destroyed||(this.attrs={},t.prototype.destroy.call(this))},e.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},e.prototype.animate=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(this.get("timeline")||this.get("canvas")){this.set("animating",!0);var n=this.get("timeline");n||(n=this.get("canvas").get("timeline"),this.set("timeline",n));var r=this.get("animations")||[];n.timer||n.initTimer();var i,o,a,s,l,u=t[0],h=t[1],c=t[2],d=void 0===c?"easeLinear":c,p=t[3],f=void 0===p?ml:p,v=t[4],g=void 0===v?0:v;Zs(u)?(i=u,u={}):tl(u)&&u.onFrame&&(i=u.onFrame,o=u.repeat),tl(h)?(h=(l=h).duration,d=l.easing||"easeLinear",g=l.delay||0,o=l.repeat||o||!1,f=l.callback||ml,a=l.pauseCallback||ml,s=l.resumeCallback||ml):(al(f)&&(g=f,f=null),Zs(d)?(f=d,d="easeLinear"):d=d||"easeLinear");var y=Mu(u,this),m={fromAttrs:Ru(y,this),toAttrs:y,duration:h,easing:d,repeat:o,callback:f,pauseCallback:a,resumeCallback:s,delay:g,startTime:n.getTime(),id:yl(),onFrame:i,pathFormatted:!1};r.length>0?r=Au(r,m):n.addAnimator(this),r.push(m),this.set("animations",r),this.set("_pause",{isPaused:!1})}},e.prototype.stopAnimate=function(t){var e=this;void 0===t&&(t=!0),el(this.get("animations"),(function(n){t&&(n.onFrame?e.attr(n.onFrame(1)):e.attr(n.toAttrs)),n.callback&&n.callback()})),this.set("animating",!1),this.set("animations",[])},e.prototype.pauseAnimate=function(){var t=this.get("timeline"),e=this.get("animations"),n=t.getTime();return el(e,(function(t){t._paused=!0,t._pauseTime=n,t.pauseCallback&&t.pauseCallback()})),this.set("_pause",{isPaused:!0,pauseTime:n}),this},e.prototype.resumeAnimate=function(){var t=this.get("timeline").getTime(),e=this.get("animations"),n=this.get("_pause").pauseTime;return el(e,(function(e){e.startTime=e.startTime+(t-n),e._paused=!1,e._pauseTime=null,e.resumeCallback&&e.resumeCallback()})),this.set("_pause",{isPaused:!1}),this.set("animations",e),this},e.prototype.emitDelegation=function(t,e){var n,r=this,i=e.propagationPath;this.getEvents(),"mouseenter"===t?n=e.fromShape:"mouseleave"===t&&(n=e.toShape);for(var o=function(t){var o=i[t],s=o.get("name");if(s){if((o.isGroup()||o.isCanvas&&o.isCanvas())&&n&&eu(o,n))return"break";Js(s)?el(s,(function(t){r.emitDelegateEvent(o,t,e)})):a.emitDelegateEvent(o,s,e)}},a=this,s=0;s<i.length;s++){if("break"===o(s))break}},e.prototype.emitDelegateEvent=function(t,e,n){var r=this.getEvents(),i=e+":"+n.type;(r[i]||r["*"])&&(n.name=i,n.currentTarget=t,n.delegateTarget=this,n.delegateObject=t.get("delegateObject"),this.emit(i,n))},e.prototype.translate=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var n=this.getMatrix(),r=_u(n,[["t",t,e]]);return this.setMatrix(r),this},e.prototype.move=function(t,e){var n=this.attr("x")||0,r=this.attr("y")||0;return this.translate(t-n,e-r),this},e.prototype.moveTo=function(t,e){return this.move(t,e)},e.prototype.scale=function(t,e){var n=this.getMatrix(),r=_u(n,[["s",t,e||t]]);return this.setMatrix(r),this},e.prototype.rotate=function(t){var e=this.getMatrix(),n=_u(e,[["r",t]]);return this.setMatrix(n),this},e.prototype.rotateAtStart=function(t){var e=this.attr(),n=e.x,r=e.y,i=this.getMatrix(),o=_u(i,[["t",-n,-r],["r",t],["t",n,r]]);return this.setMatrix(o),this},e.prototype.rotateAtPoint=function(t,e,n){var r=this.getMatrix(),i=_u(r,[["t",-t,-e],["r",n],["t",t,e]]);return this.setMatrix(i),this},e}(ru),Du={};function Nu(t,e){if(t.set("canvas",e),t.isGroup()){var n=t.get("children");n.length&&n.forEach((function(t){Nu(t,e)}))}}function Pu(t,e){if(t.set("timeline",e),t.isGroup()){var n=t.get("children");n.length&&n.forEach((function(t){Pu(t,e)}))}}var ku,zu,Fu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ss(e,t),e.prototype.isCanvas=function(){return!1},e.prototype.getBBox=function(){var t=1/0,e=-1/0,n=1/0,r=-1/0,i=[],o=[],a=this.getChildren().filter((function(t){return t.get("visible")&&(!t.isGroup()||t.isGroup()&&t.getChildren().length>0)}));return a.length>0?(el(a,(function(t){var e=t.getBBox();i.push(e.minX,e.maxX),o.push(e.minY,e.maxY)})),t=il(i),e=rl(i),n=il(o),r=rl(o)):(t=0,e=0,n=0,r=0),{x:t,y:n,minX:t,minY:n,maxX:e,maxY:r,width:e-t,height:r-n}},e.prototype.getCanvasBBox=function(){var t=1/0,e=-1/0,n=1/0,r=-1/0,i=[],o=[],a=this.getChildren().filter((function(t){return t.get("visible")&&(!t.isGroup()||t.isGroup()&&t.getChildren().length>0)}));return a.length>0?(el(a,(function(t){var e=t.getCanvasBBox();i.push(e.minX,e.maxX),o.push(e.minY,e.maxY)})),t=il(i),e=rl(i),n=il(o),r=rl(o)):(t=0,e=0,n=0,r=0),{x:t,y:n,minX:t,minY:n,maxX:e,maxY:r,width:e-t,height:r-n}},e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.children=[],e},e.prototype.onAttrChange=function(e,n,r){if(t.prototype.onAttrChange.call(this,e,n,r),"matrix"===e){var i=this.getTotalMatrix();this._applyChildrenMarix(i)}},e.prototype.applyMatrix=function(e){var n=this.getTotalMatrix();t.prototype.applyMatrix.call(this,e);var r=this.getTotalMatrix();r!==n&&this._applyChildrenMarix(r)},e.prototype._applyChildrenMarix=function(t){el(this.getChildren(),(function(e){e.applyMatrix(t)}))},e.prototype.addShape=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[0],r=t[1];tl(n)?r=n:r.type=n;var i=Du[r.type];i||(i=cl(r.type),Du[r.type]=i);var o=this.getShapeBase(),a=new o[i](r);return this.add(a),a},e.prototype.addGroup=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n,r=t[0],i=t[1];if(Zs(r))n=new r(i||{parent:this});else{var o=r||{},a=this.getGroupBase();n=new a(o)}return this.add(n),n},e.prototype.getCanvas=function(){return this.isCanvas()?this:this.get("canvas")},e.prototype.getShape=function(t,e,n){if(!nu(this))return null;var r,i=this.getChildren();if(this.isCanvas())r=this._findShape(i,t,e,n);else{var o=[t,e,1];o=this.invertFromMatrix(o),this.isClipped(o[0],o[1])||(r=this._findShape(i,o[0],o[1],n))}return r},e.prototype._findShape=function(t,e,n,r){for(var i=null,o=t.length-1;o>=0;o--){var a=t[o];if(nu(a)&&(a.isGroup()?i=a.getShape(e,n,r):a.isHit(e,n)&&(i=a)),i)break}return i},e.prototype.add=function(t){var e=this.getCanvas(),n=this.getChildren(),r=this.get("timeline"),i=t.getParent();i&&function(t,e,n){void 0===n&&(n=!0),n?e.destroy():(e.set("parent",null),e.set("canvas",null)),Jl(t.getChildren(),e)}(i,t,!1),t.set("parent",this),e&&Nu(t,e),r&&Pu(t,r),n.push(t),t.onCanvasChange("add"),this._applyElementMatrix(t)},e.prototype._applyElementMatrix=function(t){var e=this.getTotalMatrix();e&&t.applyMatrix(e)},e.prototype.getChildren=function(){return this.get("children")},e.prototype.sort=function(){var t,e=this.getChildren();el(e,(function(t,e){return t._INDEX=e,t})),e.sort((t=function(t,e){return t.get("zIndex")-e.get("zIndex")},function(e,n){var r=t(e,n);return 0===r?e._INDEX-n._INDEX:r})),this.onCanvasChange("sort")},e.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var t=this.getChildren(),e=t.length-1;e>=0;e--)t[e].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},e.prototype.destroy=function(){this.get("destroyed")||(this.clear(),t.prototype.destroy.call(this))},e.prototype.getFirst=function(){return this.getChildByIndex(0)},e.prototype.getLast=function(){var t=this.getChildren();return this.getChildByIndex(t.length-1)},e.prototype.getChildByIndex=function(t){return this.getChildren()[t]},e.prototype.getCount=function(){return this.getChildren().length},e.prototype.contain=function(t){return this.getChildren().indexOf(t)>-1},e.prototype.removeChild=function(t,e){void 0===e&&(e=!0),this.contain(t)&&t.remove(e)},e.prototype.findAll=function(t){var e=[];return el(this.getChildren(),(function(n){t(n)&&e.push(n),n.isGroup()&&(e=e.concat(n.findAll(t)))})),e},e.prototype.find=function(t){var e=null;return el(this.getChildren(),(function(n){if(t(n)?e=n:n.isGroup()&&(e=n.find(t)),e)return!1})),e},e.prototype.findById=function(t){return this.find((function(e){return e.get("id")===t}))},e.prototype.findByClassName=function(t){return this.find((function(e){return e.get("className")===t}))},e.prototype.findAllByName=function(t){return this.findAll((function(e){return e.get("name")===t}))},e}(Bu),Hu=0,Gu=0,Wu=0,Yu=0,Uu=0,Vu=0,ju="object"==typeof performance&&performance.now?performance:Date,Xu="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Ku(){return Uu||(Xu($u),Uu=ju.now()+Vu)}function $u(){Uu=0}function qu(){this._call=this._time=this._next=null}function Zu(t,e,n){var r=new qu;return r.restart(t,e,n),r}function Qu(){Uu=(Yu=ju.now())+Vu,Hu=Gu=0;try{!function(){Ku(),++Hu;for(var t,e=ku;e;)(t=Uu-e._time)>=0&&e._call.call(null,t),e=e._next;--Hu}()}finally{Hu=0,function(){var t,e,n=ku,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:ku=e);zu=t,th(r)}(),Uu=0}}function Ju(){var t=ju.now(),e=t-Yu;e>1e3&&(Vu-=e,Yu=t)}function th(t){Hu||(Gu&&(Gu=clearTimeout(Gu)),t-Uu>24?(t<1/0&&(Gu=setTimeout(Qu,t-ju.now()-Vu)),Wu&&(Wu=clearInterval(Wu))):(Wu||(Yu=ju.now(),Wu=setInterval(Ju,1e3)),Hu=1,Xu(Qu)))}function eh(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function nh(t){return t*t*t}function rh(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}qu.prototype=Zu.prototype={constructor:qu,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Ku():+n)+(null==e?0:+e),this._next||zu===this||(zu?zu._next=this:ku=this,zu=this),this._call=t,this._time=n,th()},stop:function(){this._call&&(this._call=null,this._time=1/0,th())}};var ih=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),oh=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),ah=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),sh=Math.PI,lh=sh/2;function uh(t){return(1-Math.cos(sh*t))/2}function hh(t){return 1.0009775171065494*(Math.pow(2,-10*t)-.0009765625)}function ch(t){return((t*=2)<=1?hh(1-t):2-hh(t-1))/2}function dh(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var ph=4/11,fh=7.5625;function vh(t){return(t=+t)<ph?fh*t*t:t<.7272727272727273?fh*(t-=.5454545454545454)*t+.75:t<.9090909090909091?fh*(t-=.8181818181818182)*t+.9375:fh*(t-=.9545454545454546)*t+.984375}var gh=1.70158,yh=function t(e){function n(t){return(t=+t)*t*(e*(t-1)+t)}return e=+e,n.overshoot=t,n}(gh),mh=function t(e){function n(t){return--t*t*((t+1)*e+t)+1}return e=+e,n.overshoot=t,n}(gh),Ch=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(gh),wh=2*Math.PI,xh=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=wh);function i(t){return e*hh(- --t)*Math.sin((r-t)/n)}return i.amplitude=function(e){return t(e,n*wh)},i.period=function(n){return t(e,n)},i}(1,.3),Sh=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=wh);function i(t){return 1-e*hh(t=+t)*Math.sin((t+r)/n)}return i.amplitude=function(e){return t(e,n*wh)},i.period=function(n){return t(e,n)},i}(1,.3),Eh=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=wh);function i(t){return((t=2*t-1)<0?e*hh(-t)*Math.sin((r-t)/n):2-e*hh(t)*Math.sin((r+t)/n))/2}return i.amplitude=function(e){return t(e,n*wh)},i.period=function(n){return t(e,n)},i}(1,.3),Th=Object.freeze({__proto__:null,easeLinear:function(t){return+t},easeQuad:eh,easeQuadIn:function(t){return t*t},easeQuadOut:function(t){return t*(2-t)},easeQuadInOut:eh,easeCubic:rh,easeCubicIn:nh,easeCubicOut:function(t){return--t*t*t+1},easeCubicInOut:rh,easePoly:ah,easePolyIn:ih,easePolyOut:oh,easePolyInOut:ah,easeSin:uh,easeSinIn:function(t){return 1==+t?1:1-Math.cos(t*lh)},easeSinOut:function(t){return Math.sin(t*lh)},easeSinInOut:uh,easeExp:ch,easeExpIn:function(t){return hh(1-+t)},easeExpOut:function(t){return 1-hh(t)},easeExpInOut:ch,easeCircle:dh,easeCircleIn:function(t){return 1-Math.sqrt(1-t*t)},easeCircleOut:function(t){return Math.sqrt(1- --t*t)},easeCircleInOut:dh,easeBounce:vh,easeBounceIn:function(t){return 1-vh(1-t)},easeBounceOut:vh,easeBounceInOut:function(t){return((t*=2)<=1?1-vh(1-t):vh(t-1)+1)/2},easeBack:Ch,easeBackIn:yh,easeBackOut:mh,easeBackInOut:Ch,easeElastic:Sh,easeElasticIn:xh,easeElasticOut:Sh,easeElasticInOut:Eh});function bh(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function _h(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Lh(){}var Oh=.7,Ih=1/Oh,Rh="\\s*([+-]?\\d+)\\s*",Mh="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ah="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Bh=/^#([0-9a-f]{3,8})$/,Dh=new RegExp("^rgb\\("+[Rh,Rh,Rh]+"\\)$"),Nh=new RegExp("^rgb\\("+[Ah,Ah,Ah]+"\\)$"),Ph=new RegExp("^rgba\\("+[Rh,Rh,Rh,Mh]+"\\)$"),kh=new RegExp("^rgba\\("+[Ah,Ah,Ah,Mh]+"\\)$"),zh=new RegExp("^hsl\\("+[Mh,Ah,Ah]+"\\)$"),Fh=new RegExp("^hsla\\("+[Mh,Ah,Ah,Mh]+"\\)$"),Hh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Gh(){return this.rgb().formatHex()}function Wh(){return this.rgb().formatRgb()}function Yh(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Bh.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Uh(e):3===n?new Kh(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Vh(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Vh(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Dh.exec(t))?new Kh(e[1],e[2],e[3],1):(e=Nh.exec(t))?new Kh(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Ph.exec(t))?Vh(e[1],e[2],e[3],e[4]):(e=kh.exec(t))?Vh(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=zh.exec(t))?Qh(e[1],e[2]/100,e[3]/100,1):(e=Fh.exec(t))?Qh(e[1],e[2]/100,e[3]/100,e[4]):Hh.hasOwnProperty(t)?Uh(Hh[t]):"transparent"===t?new Kh(NaN,NaN,NaN,0):null}function Uh(t){return new Kh(t>>16&255,t>>8&255,255&t,1)}function Vh(t,e,n,r){return r<=0&&(t=e=n=NaN),new Kh(t,e,n,r)}function jh(t){return t instanceof Lh||(t=Yh(t)),t?new Kh((t=t.rgb()).r,t.g,t.b,t.opacity):new Kh}function Xh(t,e,n,r){return 1===arguments.length?jh(t):new Kh(t,e,n,null==r?1:r)}function Kh(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function $h(){return"#"+Zh(this.r)+Zh(this.g)+Zh(this.b)}function qh(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Zh(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Qh(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new tc(t,e,n,r)}function Jh(t){if(t instanceof tc)return new tc(t.h,t.s,t.l,t.opacity);if(t instanceof Lh||(t=Yh(t)),!t)return new tc;if(t instanceof tc)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new tc(a,s,l,t.opacity)}function tc(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function ec(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function nc(t){return function(){return t}}function rc(t){return 1==(t=+t)?ic:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):nc(isNaN(e)?n:e)}}function ic(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):nc(isNaN(t)?e:t)}bh(Lh,Yh,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Gh,formatHex:Gh,formatHsl:function(){return Jh(this).formatHsl()},formatRgb:Wh,toString:Wh}),bh(Kh,Xh,_h(Lh,{brighter:function(t){return t=null==t?Ih:Math.pow(Ih,t),new Kh(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?Oh:Math.pow(Oh,t),new Kh(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:$h,formatHex:$h,formatRgb:qh,toString:qh})),bh(tc,(function(t,e,n,r){return 1===arguments.length?Jh(t):new tc(t,e,n,null==r?1:r)}),_h(Lh,{brighter:function(t){return t=null==t?Ih:Math.pow(Ih,t),new tc(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?Oh:Math.pow(Oh,t),new tc(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Kh(ec(t>=240?t-240:t+120,i,r),ec(t,i,r),ec(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var oc=function t(e){var n=rc(e);function r(t,e){var r=n((t=Xh(t)).r,(e=Xh(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=ic(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function ac(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}}function sc(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function lc(t,e){return(sc(e)?ac:uc)(t,e)}function uc(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=gc(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}}function hc(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function cc(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function dc(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=gc(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}var pc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,fc=new RegExp(pc.source,"g");function vc(t,e){var n,r,i,o=pc.lastIndex=fc.lastIndex=0,a=-1,s=[],l=[];for(t+="",e+="";(n=pc.exec(t))&&(r=fc.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:cc(n,r)})),o=fc.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,r=0;r<e;++r)s[(n=l[r]).i]=n.x(t);return s.join("")})}function gc(t,e){var n,r=typeof e;return null==e||"boolean"===r?nc(e):("number"===r?cc:"string"===r?(n=Yh(e))?(e=n,oc):vc:e instanceof Yh?oc:e instanceof Date?hc:sc(e)?ac:Array.isArray(e)?uc:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?dc:cc)(t,e)}var yc=[1,0,0,0,1,0,0,0,1];function mc(t,e,n){var r,i=e.startTime;if(n<i+e.delay||e._paused)return!1;var o=e.duration,a=e.easing;if(n=n-i-e.delay,e.repeat)r=n%o/o,r=Th[a](r);else{if(!((r=n/o)<1))return e.onFrame?t.attr(e.onFrame(1)):t.attr(e.toAttrs),!0;r=Th[a](r)}if(e.onFrame){var s=e.onFrame(r);t.attr(s)}else!function(t,e,n){var r={},i=e.fromAttrs,o=e.toAttrs;if(!t.destroyed){var a,s;for(var l in o)if(!vl(i[l],o[l]))if("path"===l){var u=o[l],h=i[l];u.length>h.length?(u=Sl(o[l]),h=Sl(i[l]),h=jl(h,u),h=$l(h,u),e.fromAttrs.path=h,e.toAttrs.path=u):e.pathFormatted||(u=Sl(o[l]),h=Sl(i[l]),h=$l(h,u),e.fromAttrs.path=h,e.toAttrs.path=u,e.pathFormatted=!0),r[l]=[];for(var c=0;c<u.length;c++){for(var d=u[c],p=h[c],f=[],v=0;v<d.length;v++)al(d[v])&&p&&al(p[v])?(a=gc(p[v],d[v]),f.push(a(n))):f.push(d[v]);r[l].push(f)}}else if("matrix"===l){var g=lc(i[l]||yc,o[l]||yc)(n);r[l]=g}else["fill","stroke","fillStyle","strokeStyle"].includes(l)&&(s=o[l],/^[r,R,L,l]{1}[\s]*\(/.test(s))?r[l]=o[l]:Zs(o[l])||(a=gc(i[l],o[l]),r[l]=a(n));t.attr(r)}}(t,e,r);return!1}var Cc=function(){function t(t){this.animators=[],this.current=0,this.timer=null,this.canvas=t}return t.prototype.initTimer=function(){var t,e,n,r=this;this.timer=Zu((function(i){if(r.current=i,r.animators.length>0){for(var o=r.animators.length-1;o>=0;o--)if((t=r.animators[o]).destroyed)r.removeAnimator(o);else{if(!t.isAnimatePaused())for(var a=(e=t.get("animations")).length-1;a>=0;a--)n=e[a],mc(t,n,i)&&(e.splice(a,1),!1,n.callback&&n.callback());0===e.length&&r.removeAnimator(o)}r.canvas.get("autoDraw")||r.canvas.draw()}}))},t.prototype.addAnimator=function(t){this.animators.push(t)},t.prototype.removeAnimator=function(t){this.animators.splice(t,1)},t.prototype.isAnimating=function(){return!!this.animators.length},t.prototype.stop=function(){this.timer&&this.timer.stop()},t.prototype.stopAllAnimations=function(t){void 0===t&&(t=!0),this.animators.forEach((function(e){e.stopAnimate(t)})),this.animators=[],this.canvas.draw()},t.prototype.getTime=function(){return this.current},t}(),wc=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function xc(t,e,n){n.name=e,n.target=t,n.currentTarget=t,n.delegateTarget=t,t.emit(e,n)}function Sc(t,e,n){if(n.bubbles){var r=void 0,i=!1;if("mouseenter"===e?(r=n.fromShape,i=!0):"mouseleave"===e&&(i=!0,r=n.toShape),t.isCanvas()&&i)return;if(r&&eu(t,r))return void(n.bubbles=!1);n.name=e,n.currentTarget=t,n.delegateTarget=t,t.emit(e,n)}}var Ec,Tc=function(){function t(t){var e=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(t){var n=t.type;e._triggerEvent(n,t)},this._onDocumentMove=function(t){if(e.canvas.get("el")!==t.target&&(e.dragging||e.currentShape)){var n=e._getPointInfo(t);e.dragging&&e._emitEvent("drag",t,n,e.draggingShape)}},this._onDocumentMouseUp=function(t){if(e.canvas.get("el")!==t.target&&e.dragging){var n=e._getPointInfo(t);e.draggingShape&&e._emitEvent("drop",t,n,null),e._emitEvent("dragend",t,n,e.draggingShape),e._afterDrag(e.draggingShape,n,t)}},this.canvas=t.canvas}return t.prototype.init=function(){this._bindEvents()},t.prototype._bindEvents=function(){var t=this,e=this.canvas.get("el");el(wc,(function(n){e.addEventListener(n,t._eventCallback)})),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},t.prototype._clearEvents=function(){var t=this,e=this.canvas.get("el");el(wc,(function(n){e.removeEventListener(n,t._eventCallback)})),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},t.prototype._getEventObj=function(t,e,n,r,i,o){var a=new Zl(t,e);return a.fromShape=i,a.toShape=o,a.x=n.x,a.y=n.y,a.clientX=n.clientX,a.clientY=n.clientY,a.propagationPath.push(r),a},t.prototype._getShape=function(t,e){return this.canvas.getShape(t.x,t.y,e)},t.prototype._getPointInfo=function(t){var e=this.canvas,n=e.getClientByEvent(t),r=e.getPointByEvent(t);return{x:r.x,y:r.y,clientX:n.x,clientY:n.y}},t.prototype._triggerEvent=function(t,e){var n=this._getPointInfo(e),r=this._getShape(n,e),i=this["_on"+t],o=!1;if(i)i.call(this,n,r,e);else{var a=this.currentShape;"mouseenter"===t||"dragenter"===t||"mouseover"===t?(this._emitEvent(t,e,n,null,null,r),r&&this._emitEvent(t,e,n,r,null,r),"mouseenter"===t&&this.draggingShape&&this._emitEvent("dragenter",e,n,null)):"mouseleave"===t||"dragleave"===t||"mouseout"===t?(o=!0,a&&this._emitEvent(t,e,n,a,a,null),this._emitEvent(t,e,n,null,a,null),"mouseleave"===t&&this.draggingShape&&this._emitEvent("dragleave",e,n,null)):this._emitEvent(t,e,n,r,null,null)}if(o||(this.currentShape=r),r&&!r.get("destroyed")){var s=this.canvas;s.get("el").style.cursor=r.attr("cursor")||s.get("cursor")}},t.prototype._onmousedown=function(t,e,n){0===n.button&&(this.mousedownShape=e,this.mousedownPoint=t,this.mousedownTimeStamp=n.timeStamp),this._emitEvent("mousedown",n,t,e,null,null)},t.prototype._emitMouseoverEvents=function(t,e,n,r){var i=this.canvas.get("el");n!==r&&(n&&(this._emitEvent("mouseout",t,e,n,n,r),this._emitEvent("mouseleave",t,e,n,n,r),r&&!r.get("destroyed")||(i.style.cursor=this.canvas.get("cursor"))),r&&(this._emitEvent("mouseover",t,e,r,n,r),this._emitEvent("mouseenter",t,e,r,n,r)))},t.prototype._emitDragoverEvents=function(t,e,n,r,i){r?(r!==n&&(n&&this._emitEvent("dragleave",t,e,n,n,r),this._emitEvent("dragenter",t,e,r,n,r)),i||this._emitEvent("dragover",t,e,r)):n&&this._emitEvent("dragleave",t,e,n,n,r),i&&this._emitEvent("dragover",t,e,r)},t.prototype._afterDrag=function(t,e,n){t&&(t.set("capture",!0),this.draggingShape=null),this.dragging=!1;var r=this._getShape(e,n);r!==t&&this._emitMouseoverEvents(n,e,t,r),this.currentShape=r},t.prototype._onmouseup=function(t,e,n){if(0===n.button){var r=this.draggingShape;this.dragging?(r&&this._emitEvent("drop",n,t,e),this._emitEvent("dragend",n,t,r),this._afterDrag(r,t,n)):(this._emitEvent("mouseup",n,t,e),e===this.mousedownShape&&this._emitEvent("click",n,t,e),this.mousedownShape=null,this.mousedownPoint=null)}},t.prototype._ondragover=function(t,e,n){n.preventDefault();var r=this.currentShape;this._emitDragoverEvents(n,t,r,e,!0)},t.prototype._onmousemove=function(t,e,n){var r=this.canvas,i=this.currentShape,o=this.draggingShape;if(this.dragging)o&&this._emitDragoverEvents(n,t,i,e,!1),this._emitEvent("drag",n,t,o);else{var a=this.mousedownPoint;if(a){var s=this.mousedownShape,l=n.timeStamp-this.mousedownTimeStamp,u=a.clientX-t.clientX,h=a.clientY-t.clientY;l>120||u*u+h*h>40?s&&s.get("draggable")?((o=this.mousedownShape).set("capture",!1),this.draggingShape=o,this.dragging=!0,this._emitEvent("dragstart",n,t,o),this.mousedownShape=null,this.mousedownPoint=null):!s&&r.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",n,t,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(n,t,i,e),this._emitEvent("mousemove",n,t,e)):(this._emitMouseoverEvents(n,t,i,e),this._emitEvent("mousemove",n,t,e))}else this._emitMouseoverEvents(n,t,i,e),this._emitEvent("mousemove",n,t,e)}},t.prototype._emitEvent=function(t,e,n,r,i,o){var a=this._getEventObj(t,e,n,r,i,o);if(r){a.shape=r,xc(r,t,a);for(var s=r.getParent();s;)s.emitDelegation(t,a),a.propagationStopped||Sc(s,t,a),a.propagationPath.push(s),s=s.getParent()}else{xc(this.canvas,t,a)}},t.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},t}(),bc=Ec?pu(Ec):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new uu:"undefined"!=typeof navigator?pu(navigator.userAgent):"undefined"!=typeof process&&process.version?new au(process.version.slice(1)):null,_c=bc&&"firefox"===bc.name,Lc=function(t){function e(e){var n=t.call(this,e)||this;return n.initContainer(),n.initDom(),n.initEvents(),n.initTimeline(),n}return Ss(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.cursor="default",e.supportCSSTransform=!1,e},e.prototype.initContainer=function(){var t=this.get("container");ol(t)&&(t=document.getElementById(t),this.set("container",t))},e.prototype.initDom=function(){var t=this.createDom();this.set("el",t),this.get("container").appendChild(t),this.setDOMSize(this.get("width"),this.get("height"))},e.prototype.initEvents=function(){var t=new Tc({canvas:this});t.init(),this.set("eventController",t)},e.prototype.initTimeline=function(){var t=new Cc(this);this.set("timeline",t)},e.prototype.setDOMSize=function(t,e){var n=this.get("el");tu&&(n.style.width=t+"px",n.style.height=e+"px")},e.prototype.changeSize=function(t,e){this.setDOMSize(t,e),this.set("width",t),this.set("height",e),this.onCanvasChange("changeSize")},e.prototype.getRenderer=function(){return this.get("renderer")},e.prototype.getCursor=function(){return this.get("cursor")},e.prototype.setCursor=function(t){this.set("cursor",t);var e=this.get("el");tu&&e&&(e.style.cursor=t)},e.prototype.getPointByEvent=function(t){if(this.get("supportCSSTransform")){if(_c&&!Qs(t.layerX)&&t.layerX!==t.offsetX)return{x:t.layerX,y:t.layerY};if(!Qs(t.offsetX))return{x:t.offsetX,y:t.offsetY}}var e=this.getClientByEvent(t),n=e.x,r=e.y;return this.getPointByClient(n,r)},e.prototype.getClientByEvent=function(t){var e=t;return t.touches&&(e="touchend"===t.type?t.changedTouches[0]:t.touches[0]),{x:e.clientX,y:e.clientY}},e.prototype.getPointByClient=function(t,e){var n=this.get("el").getBoundingClientRect();return{x:t-n.left,y:e-n.top}},e.prototype.getClientByPoint=function(t,e){var n=this.get("el").getBoundingClientRect();return{x:t+n.left,y:e+n.top}},e.prototype.draw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.parentNode.removeChild(t)},e.prototype.clearEvents=function(){this.get("eventController").destroy()},e.prototype.isCanvas=function(){return!0},e.prototype.getParent=function(){return null},e.prototype.destroy=function(){var e=this.get("timeline");this.get("destroyed")||(this.clear(),e&&e.stop(),this.clearEvents(),this.removeDom(),t.prototype.destroy.call(this))},e}(Fu),Oc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ss(e,t),e.prototype.isGroup=function(){return!0},e.prototype.isEntityGroup=function(){return!1},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=this.getChildren(),r=0;r<n.length;r++){var i=n[r];e.add(i.clone())}return e},e}(Fu),Ic=function(t){function e(e){return t.call(this,e)||this}return Ss(e,t),e.prototype._isInBBox=function(t,e){var n=this.getBBox();return n.minX<=t&&n.maxX>=t&&n.minY<=e&&n.maxY>=e},e.prototype.afterAttrsChange=function(e){t.prototype.afterAttrsChange.call(this,e),this.clearCacheBBox()},e.prototype.getBBox=function(){var t=this.cfg.bbox;return t||(t=this.calculateBBox(),this.set("bbox",t)),t},e.prototype.getCanvasBBox=function(){var t=this.cfg.canvasBBox;return t||(t=this.calculateCanvasBBox(),this.set("canvasBBox",t)),t},e.prototype.applyMatrix=function(e){t.prototype.applyMatrix.call(this,e),this.set("canvasBBox",null)},e.prototype.calculateCanvasBBox=function(){var t=this.getBBox(),e=this.getTotalMatrix(),n=t.minX,r=t.minY,i=t.maxX,o=t.maxY;if(e){var a=Tu(e,[t.minX,t.minY]),s=Tu(e,[t.maxX,t.minY]),l=Tu(e,[t.minX,t.maxY]),u=Tu(e,[t.maxX,t.maxY]);n=Math.min(a[0],s[0],l[0],u[0]),i=Math.max(a[0],s[0],l[0],u[0]),r=Math.min(a[1],s[1],l[1],u[1]),o=Math.max(a[1],s[1],l[1],u[1])}var h=this.attrs;if(h.shadowColor){var c=h.shadowBlur,d=void 0===c?0:c,p=h.shadowOffsetX,f=void 0===p?0:p,v=h.shadowOffsetY,g=void 0===v?0:v,y=n-d+f,m=i+d+f,C=r-d+g,w=o+d+g;n=Math.min(n,y),i=Math.max(i,m),r=Math.min(r,C),o=Math.max(o,w)}return{x:n,y:r,minX:n,minY:r,maxX:i,maxY:o,width:i-n,height:o-r}},e.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},e.prototype.isClipShape=function(){return this.get("isClipShape")},e.prototype.isInShape=function(t,e){return!1},e.prototype.isOnlyHitBox=function(){return!1},e.prototype.isHit=function(t,e){var n=this.get("startArrowShape"),r=this.get("endArrowShape"),i=[t,e,1],o=(i=this.invertFromMatrix(i))[0],a=i[1],s=this._isInBBox(o,a);if(this.isOnlyHitBox())return s;if(s&&!this.isClipped(o,a)){if(this.isInShape(o,a))return!0;if(n&&n.isHit(o,a))return!0;if(r&&r.isHit(o,a))return!0}return!1},e}(Bu),Rc=new Map;function Mc(t,e){Rc.set(t,e)}function Ac(t){var e=t.attr();return{x:e.x,y:e.y,width:e.width,height:e.height}}function Bc(t){var e=t.attr(),n=e.x,r=e.y,i=e.r;return{x:n-i,y:r-i,width:2*i,height:2*i}}function Dc(t){return Math.min.apply(null,t)}function Nc(t){return Math.max.apply(null,t)}function Pc(t,e,n,r){var i=t-n,o=e-r;return Math.sqrt(i*i+o*o)}function kc(t,e){return Math.abs(t-e)<.001}function zc(t,e){var n=Dc(t),r=Dc(e);return{x:n,y:r,width:Nc(t)-n,height:Nc(e)-r}}function Fc(t){return(t+2*Math.PI)%(2*Math.PI)}var Hc={box:function(t,e,n,r){return zc([t,n],[e,r])},length:function(t,e,n,r){return Pc(t,e,n,r)},pointAt:function(t,e,n,r,i){return{x:(1-i)*t+i*n,y:(1-i)*e+i*r}},pointDistance:function(t,e,n,r,i,o){var a=(n-t)*(i-t)+(r-e)*(o-e);return a<0?Pc(t,e,i,o):a>(n-t)*(n-t)+(r-e)*(r-e)?Pc(n,r,i,o):this.pointToLine(t,e,n,r,i,o)},pointToLine:function(t,e,n,r,i,o){var a=[n-t,r-e];if(function(t,e){return t[0]===e[0]&&t[1]===e[1]}(a,[0,0]))return Math.sqrt((i-t)*(i-t)+(o-e)*(o-e));var s=[-a[1],a[0]];!function(t,e){var n=e[0],r=e[1],i=n*n+r*r;i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i}(s,s);var l=[i-t,o-e];return Math.abs(function(t,e){return t[0]*e[0]+t[1]*e[1]}(l,s))},tangentAngle:function(t,e,n,r){return Math.atan2(r-e,n-t)}};function Gc(t,e,n,r,i,o){var a,s=1/0,l=[n,r],u=20;o&&o>200&&(u=o/10);for(var h=1/u,c=h/10,d=0;d<=u;d++){var p=d*h,f=[i.apply(null,t.concat([p])),i.apply(null,e.concat([p]))];(m=Pc(l[0],l[1],f[0],f[1]))<s&&(a=p,s=m)}if(0===a)return{x:t[0],y:e[0]};if(1===a){var v=t.length;return{x:t[v-1],y:e[v-1]}}s=1/0;for(d=0;d<32&&!(c<1e-4);d++){var g=a-c,y=a+c,m=(f=[i.apply(null,t.concat([g])),i.apply(null,e.concat([g]))],Pc(l[0],l[1],f[0],f[1]));if(g>=0&&m<s)a=g,s=m;else{var C=[i.apply(null,t.concat([y])),i.apply(null,e.concat([y]))],w=Pc(l[0],l[1],C[0],C[1]);y<=1&&w<s?(a=y,s=w):c*=.5}}return{x:i.apply(null,t.concat([a])),y:i.apply(null,e.concat([a]))}}function Wc(t,e,n,r){var i=1-r;return i*i*t+2*r*i*e+r*r*n}function Yc(t,e,n){var r=t+n-2*e;if(kc(r,0))return[.5];var i=(t-e)/r;return i<=1&&i>=0?[i]:[]}function Uc(t,e,n,r){return 2*(1-r)*(e-t)+2*r*(n-e)}function Vc(t,e,n,r,i,o,a){var s=Wc(t,n,i,a),l=Wc(e,r,o,a),u=Hc.pointAt(t,e,n,r,a),h=Hc.pointAt(n,r,i,o,a);return[[t,e,u.x,u.y,s,l],[s,l,h.x,h.y,i,o]]}function jc(t,e,n,r,i,o,a){if(0===a)return(Pc(t,e,n,r)+Pc(n,r,i,o)+Pc(t,e,i,o))/2;var s=Vc(t,e,n,r,i,o,.5),l=s[0],u=s[1];return l.push(a-1),u.push(a-1),jc.apply(null,l)+jc.apply(null,u)}var Xc={box:function(t,e,n,r,i,o){var a=Yc(t,n,i)[0],s=Yc(e,r,o)[0],l=[t,i],u=[e,o];return void 0!==a&&l.push(Wc(t,n,i,a)),void 0!==s&&u.push(Wc(e,r,o,s)),zc(l,u)},length:function(t,e,n,r,i,o){return jc(t,e,n,r,i,o,3)},nearestPoint:function(t,e,n,r,i,o,a,s){return Gc([t,n,i],[e,r,o],a,s,Wc)},pointDistance:function(t,e,n,r,i,o,a,s){var l=this.nearestPoint(t,e,n,r,i,o,a,s);return Pc(l.x,l.y,a,s)},interpolationAt:Wc,pointAt:function(t,e,n,r,i,o,a){return{x:Wc(t,n,i,a),y:Wc(e,r,o,a)}},divide:function(t,e,n,r,i,o,a){return Vc(t,e,n,r,i,o,a)},tangentAngle:function(t,e,n,r,i,o,a){var s=Uc(t,n,i,a),l=Uc(e,r,o,a);return Fc(Math.atan2(l,s))}};function Kc(t,e,n,r,i){var o=1-i;return o*o*o*t+3*e*i*o*o+3*n*i*i*o+r*i*i*i}function $c(t,e,n,r,i){var o=1-i;return 3*(o*o*(e-t)+2*o*i*(n-e)+i*i*(r-n))}function qc(t,e,n,r){var i,o,a,s=-3*t+9*e-9*n+3*r,l=6*t-12*e+6*n,u=3*e-3*t,h=[];if(kc(s,0))kc(l,0)||(i=-u/l)>=0&&i<=1&&h.push(i);else{var c=l*l-4*s*u;kc(c,0)?h.push(-l/(2*s)):c>0&&(o=(-l-(a=Math.sqrt(c)))/(2*s),(i=(-l+a)/(2*s))>=0&&i<=1&&h.push(i),o>=0&&o<=1&&h.push(o))}return h}function Zc(t,e,n,r,i,o,a,s,l){var u=Kc(t,n,i,a,l),h=Kc(e,r,o,s,l),c=Hc.pointAt(t,e,n,r,l),d=Hc.pointAt(n,r,i,o,l),p=Hc.pointAt(i,o,a,s,l),f=Hc.pointAt(c.x,c.y,d.x,d.y,l),v=Hc.pointAt(d.x,d.y,p.x,p.y,l);return[[t,e,c.x,c.y,f.x,f.y,u,h],[u,h,v.x,v.y,p.x,p.y,a,s]]}function Qc(t,e,n,r,i,o,a,s,l){if(0===l)return function(t,e){for(var n=0,r=t.length,i=0;i<r;i++)n+=Pc(t[i],e[i],t[(i+1)%r],e[(i+1)%r]);return n/2}([t,n,i,a],[e,r,o,s]);var u=Zc(t,e,n,r,i,o,a,s,.5),h=u[0],c=u[1];return h.push(l-1),c.push(l-1),Qc.apply(null,h)+Qc.apply(null,c)}var Jc={extrema:qc,box:function(t,e,n,r,i,o,a,s){for(var l=[t,a],u=[e,s],h=qc(t,n,i,a),c=qc(e,r,o,s),d=0;d<h.length;d++)l.push(Kc(t,n,i,a,h[d]));for(d=0;d<c.length;d++)u.push(Kc(e,r,o,s,c[d]));return zc(l,u)},length:function(t,e,n,r,i,o,a,s){return Qc(t,e,n,r,i,o,a,s,3)},nearestPoint:function(t,e,n,r,i,o,a,s,l,u,h){return Gc([t,n,i,a],[e,r,o,s],l,u,Kc,h)},pointDistance:function(t,e,n,r,i,o,a,s,l,u,h){var c=this.nearestPoint(t,e,n,r,i,o,a,s,l,u,h);return Pc(c.x,c.y,l,u)},interpolationAt:Kc,pointAt:function(t,e,n,r,i,o,a,s,l){return{x:Kc(t,n,i,a,l),y:Kc(e,r,o,s,l)}},divide:function(t,e,n,r,i,o,a,s,l){return Zc(t,e,n,r,i,o,a,s,l)},tangentAngle:function(t,e,n,r,i,o,a,s,l){var u=$c(t,n,i,a,l),h=$c(e,r,o,s,l);return Fc(Math.atan2(h,u))}};function td(t,e,n,r,i,o){return n*Math.cos(i)*Math.cos(o)-r*Math.sin(i)*Math.sin(o)+t}function ed(t,e,n,r,i,o){return n*Math.sin(i)*Math.cos(o)+r*Math.cos(i)*Math.sin(o)+e}var nd=function(t,e,n,r,i,o,a){for(var s=function(t,e,n){return Math.atan(-e/t*Math.tan(n))}(n,r,i),l=1/0,u=-1/0,h=[o,a],c=2*-Math.PI;c<=2*Math.PI;c+=Math.PI){var d=s+c;o<a?o<d&&d<a&&h.push(d):a<d&&d<o&&h.push(d)}for(c=0;c<h.length;c++){var p=td(t,0,n,r,i,h[c]);p<l&&(l=p),p>u&&(u=p)}var f=function(t,e,n){return Math.atan(e/(t*Math.tan(n)))}(n,r,i),v=1/0,g=-1/0,y=[o,a];for(c=2*-Math.PI;c<=2*Math.PI;c+=Math.PI){var m=f+c;o<a?o<m&&m<a&&y.push(m):a<m&&m<o&&y.push(m)}for(c=0;c<y.length;c++){var C=ed(0,e,n,r,i,y[c]);C<v&&(v=C),C>g&&(g=C)}return{x:l,y:v,width:u-l,height:g-v}};var rd=function(t){return function(t){if(t.length<2)return 0;for(var e=0,n=0;n<t.length-1;n++){var r=t[n],i=t[n+1];e+=Pc(r[0],r[1],i[0],i[1])}return e}(t)};function id(t,e){return t&&e?{minX:Math.min(t.minX,e.minX),minY:Math.min(t.minY,e.minY),maxX:Math.max(t.maxX,e.maxX),maxY:Math.max(t.maxY,e.maxY)}:t||e}function od(t,e){var n=t.get("startArrowShape"),r=t.get("endArrowShape");return n&&(e=id(e,n.getCanvasBBox())),r&&(e=id(e,r.getCanvasBBox())),e}var ad=null;function sd(){if(!ad){var t=document.createElement("canvas");t.width=1,t.height=1,ad=t.getContext("2d")}return ad}function ld(t,e,n){var r=1;if(ol(t)&&(r=t.split("\n").length),r>1){var i=function(t,e){return e?e-t:.14*t}(e,n);return e*r+i*(r-1)}return e}function ud(t){var e=t.fontSize,n=t.fontFamily,r=t.fontWeight;return[t.fontStyle,t.fontVariant,r,e+"px",n].join(" ").trim()}var hd=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,cd=/[^\s\,]+/gi;var dd="\t\n\v\f\r   ᠎             　\u2028\u2029",pd=new RegExp("([a-z])["+dd+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+dd+"]*,?["+dd+"]*)+)","ig"),fd=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+dd+"]*,?["+dd+"]*","ig");var vd=/[a-z]/;function gd(t,e){return[e[0]+(e[0]-t[0]),e[1]+(e[1]-t[1])]}function yd(t){var e=function(t){if(!t)return null;if(Js(t))return t;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(t).replace(pd,(function(t,r,i){var o=[],a=r.toLowerCase();if(i.replace(fd,(function(t,e){e&&o.push(+e)})),"m"===a&&o.length>2&&(n.push([r].concat(o.splice(0,2))),a="l",r="m"===r?"l":"L"),"o"===a&&1===o.length&&n.push([r,o[0]]),"r"===a)n.push([r].concat(o));else for(;o.length>=e[a]&&(n.push([r].concat(o.splice(0,e[a]))),e[a]););return""})),n}(t);if(!e||!e.length)return[["M",0,0]];for(var n=!1,r=0;r<e.length;r++){var i=e[r][0];if(vd.test(i)||["V","H","T","S"].indexOf(i)>=0){n=!0;break}}if(!n)return e;var o=[],a=0,s=0,l=0,u=0,h=0,c=e[0];"M"!==c[0]&&"m"!==c[0]||(l=a=+c[1],u=s=+c[2],h++,o[0]=["M",a,s]);r=h;for(var d=e.length;r<d;r++){var p=e[r],f=o[r-1],v=[],g=(i=p[0]).toUpperCase();if(i!==g)switch(v[0]=g,g){case"A":v[1]=p[1],v[2]=p[2],v[3]=p[3],v[4]=p[4],v[5]=p[5],v[6]=+p[6]+a,v[7]=+p[7]+s;break;case"V":v[1]=+p[1]+s;break;case"H":v[1]=+p[1]+a;break;case"M":l=+p[1]+a,u=+p[2]+s,v[1]=l,v[2]=u;break;default:for(var y=1,m=p.length;y<m;y++)v[y]=+p[y]+(y%2?a:s)}else v=e[r];switch(g){case"Z":a=+l,s=+u;break;case"H":v=["L",a=v[1],s];break;case"V":v=["L",a,s=v[1]];break;case"T":a=v[1],s=v[2];var C=gd([f[1],f[2]],[f[3],f[4]]);v=["Q",C[0],C[1],a,s];break;case"S":a=v[v.length-2],s=v[v.length-1];var w=f.length,x=gd([f[w-4],f[w-3]],[f[w-2],f[w-1]]);v=["C",x[0],x[1],v[1],v[2],a,s];break;case"M":l=v[v.length-2],u=v[v.length-1];break;default:a=v[v.length-2],s=v[v.length-1]}o.push(v)}return o}function md(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Cd(t,e){return md(t)*md(e)?(t[0]*e[0]+t[1]*e[1])/(md(t)*md(e)):1}function wd(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(Cd(t,e))}function xd(t,e){return t[0]===e[0]&&t[1]===e[1]}function Sd(t,e){var n=e[1],r=e[2],i=sl(ul(e[3]),2*Math.PI),o=e[4],a=e[5],s=t[0],l=t[1],u=e[6],h=e[7],c=Math.cos(i)*(s-u)/2+Math.sin(i)*(l-h)/2,d=-1*Math.sin(i)*(s-u)/2+Math.cos(i)*(l-h)/2,p=c*c/(n*n)+d*d/(r*r);p>1&&(n*=Math.sqrt(p),r*=Math.sqrt(p));var f=n*n*(d*d)+r*r*(c*c),v=f?Math.sqrt((n*n*(r*r)-f)/f):1;o===a&&(v*=-1),isNaN(v)&&(v=0);var g=r?v*n*d/r:0,y=n?v*-r*c/n:0,m=(s+u)/2+Math.cos(i)*g-Math.sin(i)*y,C=(l+h)/2+Math.sin(i)*g+Math.cos(i)*y,w=[(c-g)/n,(d-y)/r],x=[(-1*c-g)/n,(-1*d-y)/r],S=wd([1,0],w),E=wd(w,x);return Cd(w,x)<=-1&&(E=Math.PI),Cd(w,x)>=1&&(E=0),0===a&&E>0&&(E-=2*Math.PI),1===a&&E<0&&(E+=2*Math.PI),{cx:m,cy:C,rx:xd(t,[u,h])?0:n,ry:xd(t,[u,h])?0:r,startAngle:S,endAngle:S+E,xRotation:i,arcFlag:o,sweepFlag:a}}function Ed(t,e){return[e[0]+(e[0]-t[0]),e[1]+(e[1]-t[1])]}function Td(t){t=function(t){var e=t||[];return Js(e)?e:ol(e)?(el(e=e.match(hd),(function(t,n){if((t=t.match(cd))[0].length>1){var r=t[0].charAt(0);t.splice(1,0,t[0].substr(1)),t[0]=r}el(t,(function(e,n){isNaN(e)||(t[n]=+e)})),e[n]=t})),e):void 0}(t);for(var e=[],n=null,r=null,i=null,o=0,a=t.length,s=0;s<a;s++){var l=t[s];r=t[s+1];var u=l[0],h={command:u,prePoint:n,params:l,startTangent:null,endTangent:null};switch(u){case"M":i=[l[1],l[2]],o=s;break;case"A":var c=Sd(n,l);h.arcParams=c}if("Z"===u)n=i,r=t[o+1];else{var d=l.length;n=[l[d-2],l[d-1]]}r&&"Z"===r[0]&&(r=t[o],e[o]&&(e[o].prePoint=n)),h.currentPoint=n,e[o]&&xd(n,e[o].currentPoint)&&(e[o].prePoint=h.prePoint);var p=r?[r[r.length-2],r[r.length-1]]:null;h.nextPoint=p;var f=h.prePoint;if(["L","H","V"].includes(u))h.startTangent=[f[0]-n[0],f[1]-n[1]],h.endTangent=[n[0]-f[0],n[1]-f[1]];else if("Q"===u){var v=[l[1],l[2]];h.startTangent=[f[0]-v[0],f[1]-v[1]],h.endTangent=[n[0]-v[0],n[1]-v[1]]}else if("T"===u){v=Ed((m=e[s-1]).currentPoint,f);"Q"===m.command?(h.command="Q",h.startTangent=[f[0]-v[0],f[1]-v[1]],h.endTangent=[n[0]-v[0],n[1]-v[1]]):(h.command="TL",h.startTangent=[f[0]-n[0],f[1]-n[1]],h.endTangent=[n[0]-f[0],n[1]-f[1]])}else if("C"===u){var g=[l[1],l[2]],y=[l[3],l[4]];h.startTangent=[f[0]-g[0],f[1]-g[1]],h.endTangent=[n[0]-y[0],n[1]-y[1]],0===h.startTangent[0]&&0===h.startTangent[1]&&(h.startTangent=[g[0]-y[0],g[1]-y[1]]),0===h.endTangent[0]&&0===h.endTangent[1]&&(h.endTangent=[y[0]-g[0],y[1]-g[1]])}else if("S"===u){var m;g=Ed((m=e[s-1]).currentPoint,f),y=[l[1],l[2]];"C"===m.command?(h.command="C",h.startTangent=[f[0]-g[0],f[1]-g[1]],h.endTangent=[n[0]-y[0],n[1]-y[1]]):(h.command="SQ",h.startTangent=[f[0]-y[0],f[1]-y[1]],h.endTangent=[n[0]-y[0],n[1]-y[1]])}else if("A"===u){var C=.001,w=h.arcParams||{},x=w.cx,S=void 0===x?0:x,E=w.cy,T=void 0===E?0:E,b=w.rx,_=void 0===b?0:b,L=w.ry,O=void 0===L?0:L,I=w.sweepFlag,R=void 0===I?0:I,M=w.startAngle,A=void 0===M?0:M,B=w.endAngle,D=void 0===B?0:B;0===R&&(C*=-1);var N=_*Math.cos(A-C)+S,P=O*Math.sin(A-C)+T;h.startTangent=[N-i[0],P-i[1]];var k=_*Math.cos(A+D+C)+S,z=O*Math.sin(A+D-C)+T;h.endTangent=[f[0]-k,f[1]-z]}e.push(h)}return e}function bd(t,e){var n,r,i,o=t.prePoint,a=t.currentPoint,s=t.nextPoint,l=Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2),u=Math.pow(a[0]-s[0],2)+Math.pow(a[1]-s[1],2),h=Math.pow(o[0]-s[0],2)+Math.pow(o[1]-s[1],2),c=Math.acos((l+u-h)/(2*Math.sqrt(l)*Math.sqrt(u)));if(!c||0===Math.sin(c)||(n=c,r=0,void 0===i&&(i=1e-5),Math.abs(n-r)<i))return{xExtra:0,yExtra:0};var d=Math.abs(Math.atan2(s[1]-a[1],s[0]-a[0])),p=Math.abs(Math.atan2(s[0]-a[0],s[1]-a[1]));return d=d>Math.PI/2?Math.PI-d:d,p=p>Math.PI/2?Math.PI-p:p,{xExtra:Math.cos(c/2-d)*(e/2*(1/Math.sin(c/2)))-e/2||0,yExtra:Math.cos(p-c/2)*(e/2*(1/Math.sin(c/2)))-e/2||0}}function _d(t,e,n,r){var i=t-n,o=e-r;return Math.sqrt(i*i+o*o)}function Ld(t,e,n,r,i,o){return i>=t&&i<=t+n&&o>=e&&o<=e+r}function Od(t,e){return!(e.minX>t.maxX||e.maxX<t.minX||e.minY>t.maxY||e.maxY<t.minY)}function Id(t,e){return t[0]===e[0]&&t[1]===e[1]}Mc("rect",Ac),Mc("image",Ac),Mc("circle",Bc),Mc("marker",Bc),Mc("polyline",(function(t){for(var e=t.attr().points,n=[],r=[],i=0;i<e.length;i++){var o=e[i];n.push(o[0]),r.push(o[1])}var a=zc(n,r),s=a.x,l=a.y,u={minX:s,minY:l,maxX:s+a.width,maxY:l+a.height};return{x:(u=od(t,u)).minX,y:u.minY,width:u.maxX-u.minX,height:u.maxY-u.minY}})),Mc("polygon",(function(t){for(var e=t.attr().points,n=[],r=[],i=0;i<e.length;i++){var o=e[i];n.push(o[0]),r.push(o[1])}return zc(n,r)})),Mc("text",(function(t){var e=t.attr(),n=e.x,r=e.y,i=e.text,o=e.fontSize,a=e.lineHeight,s=e.font;s||(s=ud(e));var l,u=function(t,e){var n=sd(),r=0;return Qs(t)||""===t||(n.save(),n.font=e,ol(t)&&t.includes("\n")?el(t.split("\n"),(function(t){var e=n.measureText(t).width;r<e&&(r=e)})):r=n.measureText(t).width,n.restore()),r}(i,s);if(u){var h=e.textAlign,c=e.textBaseline,d=ld(i,o,a),p={x:n,y:r-d};h&&("end"===h||"right"===h?p.x-=u:"center"===h&&(p.x-=u/2)),c&&("top"===c?p.y+=d:"middle"===c&&(p.y+=d/2)),l={x:p.x,y:p.y,width:u,height:d}}else l={x:n,y:r,width:0,height:0};return l})),Mc("path",(function(t){var e=t.attr(),n=e.path,r=e.stroke?e.lineWidth:0,i=function(t,e){for(var n=[],r=[],i=[],o=0;o<t.length;o++){var a=(v=t[o]).currentPoint,s=v.params,l=v.prePoint,u=void 0;switch(v.command){case"Q":u=Xc.box(l[0],l[1],s[1],s[2],s[3],s[4]);break;case"C":u=Jc.box(l[0],l[1],s[1],s[2],s[3],s[4],s[5],s[6]);break;case"A":var h=v.arcParams;u=nd(h.cx,h.cy,h.rx,h.ry,h.xRotation,h.startAngle,h.endAngle);break;default:n.push(a[0]),r.push(a[1])}u&&(v.box=u,n.push(u.x,u.x+u.width),r.push(u.y,u.y+u.height)),e&&("L"===v.command||"M"===v.command)&&v.prePoint&&v.nextPoint&&i.push(v)}n=n.filter((function(t){return!Number.isNaN(t)})),r=r.filter((function(t){return!Number.isNaN(t)}));var c=il(n),d=il(r),p=rl(n),f=rl(r);if(0===i.length)return{x:c,y:d,width:p-c,height:f-d};for(o=0;o<i.length;o++){var v;(a=(v=i[o]).currentPoint)[0]===c?c-=bd(v,e).xExtra:a[0]===p&&(p+=bd(v,e).xExtra),a[1]===d?d-=bd(v,e).yExtra:a[1]===f&&(f+=bd(v,e).yExtra)}return{x:c,y:d,width:p-c,height:f-d}}(t.get("segments")||Td(n),r),o=i.x,a=i.y,s={minX:o,minY:a,maxX:o+i.width,maxY:a+i.height};return{x:(s=od(t,s)).minX,y:s.minY,width:s.maxX-s.minX,height:s.maxY-s.minY}})),Mc("line",(function(t){var e=t.attr(),n=e.x1,r=e.y1,i=e.x2,o=e.y2,a={minX:Math.min(n,i),maxX:Math.max(n,i),minY:Math.min(r,o),maxY:Math.max(r,o)};return{x:(a=od(t,a)).minX,y:a.minY,width:a.maxX-a.minX,height:a.maxY-a.minY}})),Mc("ellipse",(function(t){var e=t.attr(),n=e.x,r=e.y,i=e.rx,o=e.ry;return{x:n-i,y:r-o,width:2*i,height:2*o}}));var Rd=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,Md=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,Ad=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,Bd=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function Dd(t,e){el(t.match(Bd),(function(t){var n=t.split(":");e.addColorStop(n[0],n[1])}))}function Nd(t,e,n){var r=e.getBBox();if(isNaN(r.x)||isNaN(r.y)||isNaN(r.width)||isNaN(r.height))return n;if(ol(n)){if("("===n[1]||"("===n[2]){if("l"===n[0])return function(t,e,n){var r,i,o=Rd.exec(n),a=parseFloat(o[1])%360*(Math.PI/180),s=o[2],l=e.getBBox();a>=0&&a<.5*Math.PI?(r={x:l.minX,y:l.minY},i={x:l.maxX,y:l.maxY}):.5*Math.PI<=a&&a<Math.PI?(r={x:l.maxX,y:l.minY},i={x:l.minX,y:l.maxY}):Math.PI<=a&&a<1.5*Math.PI?(r={x:l.maxX,y:l.maxY},i={x:l.minX,y:l.minY}):(r={x:l.minX,y:l.maxY},i={x:l.maxX,y:l.minY});var u=Math.tan(a),h=u*u,c=(i.x-r.x+u*(i.y-r.y))/(h+1)+r.x,d=u*(i.x-r.x+u*(i.y-r.y))/(h+1)+r.y,p=t.createLinearGradient(r.x,r.y,c,d);return Dd(s,p),p}(t,e,n);if("r"===n[0])return function(t,e,n){var r=Md.exec(n),i=parseFloat(r[1]),o=parseFloat(r[2]),a=parseFloat(r[3]),s=r[4];if(0===a){var l=s.match(Bd);return l[l.length-1].split(":")[1]}var u=e.getBBox(),h=u.maxX-u.minX,c=u.maxY-u.minY,d=Math.sqrt(h*h+c*c)/2,p=t.createRadialGradient(u.minX+h*i,u.minY+c*o,0,u.minX+h/2,u.minY+c/2,a*d);return Dd(s,p),p}(t,e,n);if("p"===n[0])return function(t,e,n){if(e.get("patternSource")&&e.get("patternSource")===n)return e.get("pattern");var r,i,o=Ad.exec(n),a=o[1],s=o[2];function l(){r=t.createPattern(i,a),e.set("pattern",r),e.set("patternSource",n)}switch(a){case"a":a="repeat";break;case"x":a="repeat-x";break;case"y":a="repeat-y";break;default:a="no-repeat"}return i=new Image,s.match(/^data:/i)||(i.crossOrigin="Anonymous"),i.src=s,i.complete?l():(i.onload=l,i.src=i.src),r}(t,e,n)}return n}return n instanceof CanvasPattern?n:void 0}function Pd(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function kd(t,e){return Pd(t)*Pd(e)?(t[0]*e[0]+t[1]*e[1])/(Pd(t)*Pd(e)):1}function zd(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(kd(t,e))}function Fd(t,e){var n=e[1],r=e[2],i=sl(ul(e[3]),2*Math.PI),o=e[4],a=e[5],s=t[0],l=t[1],u=e[6],h=e[7],c=Math.cos(i)*(s-u)/2+Math.sin(i)*(l-h)/2,d=-1*Math.sin(i)*(s-u)/2+Math.cos(i)*(l-h)/2,p=c*c/(n*n)+d*d/(r*r);p>1&&(n*=Math.sqrt(p),r*=Math.sqrt(p));var f=n*n*(d*d)+r*r*(c*c),v=f?Math.sqrt((n*n*(r*r)-f)/f):1;o===a&&(v*=-1),isNaN(v)&&(v=0);var g=r?v*n*d/r:0,y=n?v*-r*c/n:0,m=(s+u)/2+Math.cos(i)*g-Math.sin(i)*y,C=(l+h)/2+Math.sin(i)*g+Math.cos(i)*y,w=[(c-g)/n,(d-y)/r],x=[(-1*c-g)/n,(-1*d-y)/r],S=zd([1,0],w),E=zd(w,x);return kd(w,x)<=-1&&(E=Math.PI),kd(w,x)>=1&&(E=0),0===a&&E>0&&(E-=2*Math.PI),1===a&&E<0&&(E+=2*Math.PI),{cx:m,cy:C,rx:Id(t,[u,h])?0:n,ry:Id(t,[u,h])?0:r,startAngle:S,endAngle:S+E,xRotation:i,arcFlag:o,sweepFlag:a}}var Hd=Math.sin,Gd=Math.cos,Wd=Math.atan2,Yd=Math.PI;function Ud(t,e,n,r,i,o,a){var s=e.stroke,l=e.lineWidth,u=Wd(r-o,n-i),h=new Ap({type:"path",canvas:t.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*Gd(Yd/6)+","+10*Hd(Yd/6)+" L0,0 L"+10*Gd(Yd/6)+",-"+10*Hd(Yd/6),stroke:s,lineWidth:l}});h.translate(i,o),h.rotateAtPoint(i,o,u),t.set(a?"startArrowShape":"endArrowShape",h)}function Vd(t,e,n,r,i,o,a){var s=e.startArrow,l=e.endArrow,u=e.stroke,h=e.lineWidth,c=a?s:l,d=c.d,p=c.fill,f=c.stroke,v=c.lineWidth,g=Ts(c,["d","fill","stroke","lineWidth"]),y=Wd(r-o,n-i);d&&(i-=Gd(y)*d,o-=Hd(y)*d);var m=new Ap({type:"path",canvas:t.get("canvas"),isArrowShape:!0,attrs:Es(Es({},g),{stroke:f||u,lineWidth:v||h,fill:p})});m.translate(i,o),m.rotateAtPoint(i,o,y),t.set(a?"startArrowShape":"endArrowShape",m)}function jd(t,e,n,r,i){var o=Wd(r-e,n-t);return{dx:Gd(o)*i,dy:Hd(o)*i}}function Xd(t,e,n,r,i,o){"object"==typeof e.startArrow?Vd(t,e,n,r,i,o,!0):e.startArrow?Ud(t,e,n,r,i,o,!0):t.set("startArrowShape",null)}function Kd(t,e,n,r,i,o){"object"==typeof e.endArrow?Vd(t,e,n,r,i,o,!1):e.endArrow?Ud(t,e,n,r,i,o,!1):t.set("startArrowShape",null)}var $d={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function qd(t,e){var n=e.attr();for(var r in n){var i=n[r],o=$d[r]?$d[r]:r;"matrix"===o&&i?t.transform(i[0],i[1],i[3],i[4],i[6],i[7]):"lineDash"===o&&t.setLineDash?Js(i)&&t.setLineDash(i):("strokeStyle"===o||"fillStyle"===o?i=Nd(t,e,i):"globalAlpha"===o&&(i*=t.globalAlpha),t[o]=i)}}function Zd(t,e,n){for(var r=0;r<e.length;r++){var i=e[r];i.cfg.visible?i.draw(t,n):i.skipDraw()}}function Qd(t,e,n){var r=t.get("refreshElements");el(r,(function(e){if(e!==t)for(var n=e.cfg.parent;n&&n!==t&&!n.cfg.refresh;)n.cfg.refresh=!0,n=n.cfg.parent})),r[0]===t?ep(e):Jd(e,n)}function Jd(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.cfg.visible)if(r.cfg.hasChanged)r.cfg.refresh=!0,r.isGroup()&&ep(r.cfg.children);else if(r.cfg.refresh)r.isGroup()&&Jd(r.cfg.children,e);else{var i=np(r,e);r.cfg.refresh=i,i&&r.isGroup()&&Jd(r.cfg.children,e)}}}function tp(t){for(var e=0;e<t.length;e++){var n=t[e];n.cfg.hasChanged=!1,n.isGroup()&&!n.destroyed&&tp(n.cfg.children)}}function ep(t,e){for(var n=0;n<t.length;n++){var r=t[n];r.cfg.refresh=!0,r.isGroup()&&ep(r.get("children"))}}function np(t,e){var n=t.cfg.cacheCanvasBBox;return t.cfg.isInView&&n&&Od(n,e)}function rp(t,e,n,r){var i=n.path,o=n.startArrow,a=n.endArrow;if(i){var s=[0,0],l=[0,0],u={dx:0,dy:0};e.beginPath();for(var h=0;h<i.length;h++){var c=i[h],d=c[0];if(0===h&&o&&o.d)u=jd((p=t.getStartTangent())[0][0],p[0][1],p[1][0],p[1][1],o.d);else if(h===i.length-2&&"Z"===i[h+1][0]&&a&&a.d){if("Z"===i[h+1][0])u=jd((p=t.getEndTangent())[0][0],p[0][1],p[1][0],p[1][1],a.d)}else if(h===i.length-1&&a&&a.d){var p;if("Z"!==i[0])u=jd((p=t.getEndTangent())[0][0],p[0][1],p[1][0],p[1][1],a.d)}var f=u.dx,v=u.dy;switch(d){case"M":e.moveTo(c[1]-f,c[2]-v),l=[c[1],c[2]];break;case"L":e.lineTo(c[1]-f,c[2]-v);break;case"Q":e.quadraticCurveTo(c[1],c[2],c[3]-f,c[4]-v);break;case"C":e.bezierCurveTo(c[1],c[2],c[3],c[4],c[5]-f,c[6]-v);break;case"A":var g=void 0;r?(g=r[h])||(g=Fd(s,c),r[h]=g):g=Fd(s,c);var y=g.cx,m=g.cy,C=g.rx,w=g.ry,x=g.startAngle,S=g.endAngle,E=g.xRotation,T=g.sweepFlag;if(e.ellipse)e.ellipse(y,m,C,w,E,x,S,1-T);else{var b=C>w?C:w,_=C>w?1:C/w,L=C>w?w/C:1;e.translate(y,m),e.rotate(E),e.scale(_,L),e.arc(0,0,b,x,S,1-T),e.scale(1/_,1/L),e.rotate(-E),e.translate(-y,-m)}break;case"Z":e.closePath()}if("Z"===d)s=l;else{var O=c.length;s=[c[O-2],c[O-1]]}}}}function ip(t,e){var n=t.get("canvas");n&&("remove"===e&&(t._cacheCanvasBBox=t.get("cacheCanvasBBox")),t.get("hasChanged")||(t.set("hasChanged",!0),t.cfg.parent&&t.cfg.parent.get("hasChanged")||(n.refreshElement(t,e,n),n.get("autoDraw")&&n.draw())))}function op(t){var e,n,r;if(t.destroyed)e=t._cacheCanvasBBox;else{var i=t.get("cacheCanvasBBox"),o=i&&!(!i.width||!i.height),a=t.getCanvasBBox(),s=a&&!(!a.width||!a.height);o&&s?(r=a,e=(n=i)&&r?{minX:Math.min(n.minX,r.minX),minY:Math.min(n.minY,r.minY),maxX:Math.max(n.maxX,r.maxX),maxY:Math.max(n.maxY,r.maxY)}:n||r):o?e=i:s&&(e=a)}return e}var ap=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ss(e,t),e.prototype.onCanvasChange=function(t){ip(this,t)},e.prototype.getShapeBase=function(){return i},e.prototype.getGroupBase=function(){return e},e.prototype._applyClip=function(t,e){e&&(t.save(),qd(t,e),e.createPath(t),t.restore(),t.clip(),e._afterDraw())},e.prototype.cacheCanvasBBox=function(){var t=this.cfg.children,e=[],n=[];el(t,(function(t){var r=t.cfg.cacheCanvasBBox;r&&t.cfg.isInView&&(e.push(r.minX,r.maxX),n.push(r.minY,r.maxY))}));var r=null;if(e.length){var i=il(e),o=rl(e),a=il(n),s=rl(n);r={minX:i,minY:a,x:i,y:a,maxX:o,maxY:s,width:o-i,height:s-a};var l=this.cfg.canvas;if(l){var u=l.getViewRange();this.set("isInView",Od(r,u))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",r)},e.prototype.draw=function(t,e){var n=this.cfg.children,r=!e||this.cfg.refresh;n.length&&r&&(t.save(),qd(t,this),this._applyClip(t,this.getClip()),Zd(t,n,e),t.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},e}(Oc),sp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ss(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return Es(Es({},e),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.getShapeBase=function(){return i},e.prototype.getGroupBase=function(){return ap},e.prototype.onCanvasChange=function(t){ip(this,t)},e.prototype.calculateBBox=function(){var t=this.get("type"),e=this.getHitLineWidth(),n=function(t){return Rc.get(t)}(t),r=n(this),i=e/2,o=r.x-i,a=r.y-i,s=r.x+r.width+i,l=r.y+r.height+i;return{x:o,minX:o,y:a,minY:a,width:r.width+e,height:r.height+e,maxX:s,maxY:l}},e.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},e.prototype.isStroke=function(){return!!this.attrs.stroke},e.prototype._applyClip=function(t,e){e&&(t.save(),qd(t,e),e.createPath(t),t.restore(),t.clip(),e._afterDraw())},e.prototype.draw=function(t,e){var n=this.cfg.clipShape;if(e){if(!1===this.cfg.refresh)return void this.set("hasChanged",!1);if(!Od(e,this.getCanvasBBox()))return this.set("hasChanged",!1),void(this.cfg.isInView&&this._afterDraw())}t.save(),qd(t,this),this._applyClip(t,n),this.drawPath(t),t.restore(),this._afterDraw()},e.prototype.getCanvasViewBox=function(){var t=this.cfg.canvas;return t?t.getViewRange():null},e.prototype.cacheCanvasBBox=function(){var t=this.getCanvasViewBox();if(t){var e=this.getCanvasBBox(),n=Od(e,t);this.set("isInView",n),n?this.set("cacheCanvasBBox",e):this.set("cacheCanvasBBox",null)}},e.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},e.prototype.drawPath=function(t){this.createPath(t),this.strokeAndFill(t),this.afterDrawPath(t)},e.prototype.fill=function(t){t.fill()},e.prototype.stroke=function(t){t.stroke()},e.prototype.strokeAndFill=function(t){var e=this.attrs,n=e.lineWidth,r=e.opacity,i=e.strokeOpacity,o=e.fillOpacity;this.isFill()&&(Qs(o)||1===o?this.fill(t):(t.globalAlpha=o,this.fill(t),t.globalAlpha=r)),this.isStroke()&&n>0&&(Qs(i)||1===i||(t.globalAlpha=i),this.stroke(t)),this.afterDrawPath(t)},e.prototype.createPath=function(t){},e.prototype.afterDrawPath=function(t){},e.prototype.isInShape=function(t,e){var n=this.isStroke(),r=this.isFill(),i=this.getHitLineWidth();return this.isInStrokeOrPath(t,e,n,r,i)},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){return!1},e.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var t=this.attrs;return t.lineWidth+t.lineAppendWidth},e}(Ic),lp=sp,up=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ss(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return Es(Es({},e),{x:0,y:0,r:0})},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){var o=this.attr(),a=o.x,s=o.y,l=o.r,u=i/2,h=_d(a,s,t,e);return r&&n?h<=l+u:r?h<=l:!!n&&(h>=l-u&&h<=l+u)},e.prototype.createPath=function(t){var e=this.attr(),n=e.x,r=e.y,i=e.r;t.beginPath(),t.arc(n,r,i,0,2*Math.PI,!1),t.closePath()},e}(lp),hp=up;function cp(t,e,n,r){return t/(n*n)+e/(r*r)}var dp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ss(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return Es(Es({},e),{x:0,y:0,rx:0,ry:0})},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){var o=this.attr(),a=i/2,s=o.x,l=o.y,u=o.rx,h=o.ry,c=(t-s)*(t-s),d=(e-l)*(e-l);return r&&n?cp(c,d,u+a,h+a)<=1:r?cp(c,d,u,h)<=1:!!n&&(cp(c,d,u-a,h-a)>=1&&cp(c,d,u+a,h+a)<=1)},e.prototype.createPath=function(t){var e=this.attr(),n=e.x,r=e.y,i=e.rx,o=e.ry;if(t.beginPath(),t.ellipse)t.ellipse(n,r,i,o,0,0,2*Math.PI,!1);else{var a=i>o?i:o,s=i>o?1:i/o,l=i>o?o/i:1;t.save(),t.translate(n,r),t.scale(s,l),t.arc(0,0,a,0,2*Math.PI),t.restore(),t.closePath()}},e}(lp),pp=dp;function fp(t){return t instanceof HTMLElement&&ol(t.nodeName)&&"CANVAS"===t.nodeName.toUpperCase()}var vp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ss(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return Es(Es({},e),{x:0,y:0,width:0,height:0})},e.prototype.initAttrs=function(t){this._setImage(t.img)},e.prototype.isStroke=function(){return!1},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._afterLoading=function(){if(!0===this.get("toDraw")){var t=this.get("canvas");t?t.draw():this.createPath(this.get("context"))}},e.prototype._setImage=function(t){var e=this,n=this.attrs;if(ol(t)){var r=new Image;r.onload=function(){if(e.destroyed)return!1;e.attr("img",r),e.set("loading",!1),e._afterLoading();var t=e.get("callback");t&&t.call(e)},r.crossOrigin="Anonymous",r.src=t,this.set("loading",!0)}else t instanceof Image?(n.width||(n.width=t.width),n.height||(n.height=t.height)):fp(t)&&(n.width||(n.width=Number(t.getAttribute("width"))),n.height||(n.height,Number(t.getAttribute("height"))))},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),"img"===e&&this._setImage(n)},e.prototype.createPath=function(t){if(this.get("loading"))return this.set("toDraw",!0),void this.set("context",t);var e=this.attr(),n=e.x,r=e.y,i=e.width,o=e.height,a=e.sx,s=e.sy,l=e.swidth,u=e.sheight,h=e.img;(h instanceof Image||fp(h))&&(Qs(a)||Qs(s)||Qs(l)||Qs(u)?t.drawImage(h,n,r,i,o):t.drawImage(h,a,s,l,u,n,r,i,o))},e}(lp),gp=vp;function yp(t,e,n,r,i,o,a){var s=Math.min(t,n),l=Math.max(t,n),u=Math.min(e,r),h=Math.max(e,r),c=i/2;return o>=s-c&&o<=l+c&&a>=u-c&&a<=h+c&&Hc.pointToLine(t,e,n,r,o,a)<=i/2}var mp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ss(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return Es(Es({},e),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),this.setArrow()},e.prototype.setArrow=function(){var t=this.attr(),e=t.x1,n=t.y1,r=t.x2,i=t.y2,o=t.startArrow,a=t.endArrow;o&&Xd(this,t,r,i,e,n),a&&Kd(this,t,e,n,r,i)},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){if(!n||!i)return!1;var o=this.attr();return yp(o.x1,o.y1,o.x2,o.y2,i,t,e)},e.prototype.createPath=function(t){var e=this.attr(),n=e.x1,r=e.y1,i=e.x2,o=e.y2,a=e.startArrow,s=e.endArrow,l={dx:0,dy:0},u={dx:0,dy:0};a&&a.d&&(l=jd(n,r,i,o,e.startArrow.d)),s&&s.d&&(u=jd(n,r,i,o,e.endArrow.d)),t.beginPath(),t.moveTo(n+l.dx,r+l.dy),t.lineTo(i-u.dx,o-u.dy)},e.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),n=this.get("endArrowShape");e&&e.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr(),e=t.x1,n=t.y1,r=t.x2,i=t.y2;return Hc.length(e,n,r,i)},e.prototype.getPoint=function(t){var e=this.attr(),n=e.x1,r=e.y1,i=e.x2,o=e.y2;return Hc.pointAt(n,r,i,o,t)},e}(lp),Cp=mp,wp={circle:function(t,e,n){return[["M",t-n,e],["A",n,n,0,1,0,t+n,e],["A",n,n,0,1,0,t-n,e]]},square:function(t,e,n){return[["M",t-n,e-n],["L",t+n,e-n],["L",t+n,e+n],["L",t-n,e+n],["Z"]]},diamond:function(t,e,n){return[["M",t-n,e],["L",t,e-n],["L",t+n,e],["L",t,e+n],["Z"]]},triangle:function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e+r],["L",t,e-r],["L",t+n,e+r],["Z"]]},"triangle-down":function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e-r],["L",t+n,e-r],["L",t,e+r],["Z"]]}},xp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ss(e,t),e.prototype.initAttrs=function(t){this._resetParamsCache()},e.prototype._resetParamsCache=function(){this.set("paramsCache",{})},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),-1!==["symbol","x","y","r","radius"].indexOf(e)&&this._resetParamsCache()},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._getR=function(t){return Qs(t.r)?t.radius:t.r},e.prototype._getPath=function(){var t,n,r=this.attr(),i=r.x,o=r.y,a=r.symbol||"circle",s=this._getR(r);if(Zs(a))n=yd(n=(t=a)(i,o,s));else{if(!(t=e.Symbols[a]))return console.warn(a+" marker is not supported."),null;n=t(i,o,s)}return n},e.prototype.createPath=function(t){rp(this,t,{path:this._getPath()},this.get("paramsCache"))},e.Symbols=wp,e}(lp),Sp=xp;function Ep(t,e,n){var r=sd();return t.createPath(r),r.isPointInPath(e,n)}function Tp(t){return Math.abs(t)<1e-6?0:t<0?-1:1}function bp(t,e,n){return(n[0]-t[0])*(e[1]-t[1])==(e[0]-t[0])*(n[1]-t[1])&&Math.min(t[0],e[0])<=n[0]&&n[0]<=Math.max(t[0],e[0])&&Math.min(t[1],e[1])<=n[1]&&n[1]<=Math.max(t[1],e[1])}function _p(t,e,n){var r=!1,i=t.length;if(i<=2)return!1;for(var o=0;o<i;o++){var a=t[o],s=t[(o+1)%i];if(bp(a,s,[e,n]))return!0;Tp(a[1]-n)>0!=Tp(s[1]-n)>0&&Tp(e-(n-a[1])*(a[0]-s[0])/(a[1]-s[1])-a[0])<0&&(r=!r)}return r}function Lp(t,e,n,r,i,o,a,s){var l=(Math.atan2(s-e,a-t)+2*Math.PI)%(2*Math.PI);if(l<r||l>i)return!1;var u={x:t+n*Math.cos(l),y:e+n*Math.sin(l)};return _d(u.x,u.y,a,s)<=o/2}var Op=Su;var Ip=Es({hasArc:function(t){for(var e=!1,n=t.length,r=0;r<n;r++){var i=t[r][0];if("C"===i||"A"===i||"Q"===i){e=!0;break}}return e},extractPolygons:function(t){for(var e=t.length,n=[],r=[],i=[],o=0;o<e;o++){var a=t[o],s=a[0];"M"===s?(i.length&&(r.push(i),i=[]),i.push([a[1],a[2]])):"Z"===s?i.length&&(n.push(i),i=[]):i.push([a[1],a[2]])}return i.length>0&&r.push(i),{polygons:n,polylines:r}},isPointInStroke:function(t,e,n,r,i){for(var o=!1,a=e/2,s=0;s<t.length;s++){var l=t[s],u=l.currentPoint,h=l.params,c=l.prePoint,d=l.box;if(!d||Ld(d.x-a,d.y-a,d.width+e,d.height+e,n,r)){switch(l.command){case"L":case"Z":o=yp(c[0],c[1],u[0],u[1],e,n,r);break;case"Q":o=Xc.pointDistance(c[0],c[1],h[1],h[2],h[3],h[4],n,r)<=e/2;break;case"C":o=Jc.pointDistance(c[0],c[1],h[1],h[2],h[3],h[4],h[5],h[6],n,r,i)<=e/2;break;case"A":var p=l.arcParams,f=p.cx,v=p.cy,g=p.rx,y=p.ry,m=p.startAngle,C=p.endAngle,w=p.xRotation,x=[n,r,1],S=g>y?g:y;yu(x,x,Op(null,[["t",-f,-v],["r",-w],["s",1/(g>y?1:g/y),1/(g>y?y/g:1)]])),o=Lp(0,0,S,m,C,e,x[0],x[1])}if(o)break}}return o}},ql);function Rp(t,e,n){for(var r=!1,i=0;i<t.length;i++){if(r=_p(t[i],e,n))break}return r}var Mp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ss(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return Es(Es({},e),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this._setPathArr(t.path),this.setArrow()},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),"path"===e&&this._setPathArr(n),this.setArrow()},e.prototype._setPathArr=function(t){this.attrs.path=yd(t);var e=Ip.hasArc(t);this.set("hasArc",e),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},e.prototype.getSegments=function(){var t=this.get("segements");return t||(t=Td(this.attr("path")),this.set("segments",t)),t},e.prototype.setArrow=function(){var t,e=this.attr(),n=e.startArrow,r=e.endArrow;n&&Xd(this,e,(t=this.getStartTangent())[0][0],t[0][1],t[1][0],t[1][1]);r&&Kd(this,e,(t=this.getEndTangent())[0][0],t[0][1],t[1][0],t[1][1])},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){var o=this.getSegments(),a=this.get("hasArc"),s=!1;if(n){var l=this.getTotalLength();s=Ip.isPointInStroke(o,i,t,e,l)}if(!s&&r)if(a)s=Ep(this,t,e);else{var u=this.attr("path"),h=Ip.extractPolygons(u);s=Rp(h.polygons,t,e)||Rp(h.polylines,t,e)}return s},e.prototype.createPath=function(t){rp(this,t,this.attr(),this.get("paramsCache"))},e.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),n=this.get("endArrowShape");e&&e.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.get("totalLength");return Qs(t)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):t},e.prototype.getPoint=function(t){var e,n,r=this.get("tCache");r||(this._calculateCurve(),this._setTcache(),r=this.get("tCache"));var i=this.get("curve");if(!r||0===r.length)return i?{x:i[0][1],y:i[0][2]}:null;el(r,(function(r,i){t>=r[0]&&t<=r[1]&&(e=(t-r[0])/(r[1]-r[0]),n=i)}));var o=i[n];if(Qs(o)||Qs(n))return null;var a=o.length,s=i[n+1];return Jc.pointAt(o[a-2],o[a-1],s[1],s[2],s[3],s[4],s[5],s[6],e)},e.prototype._calculateCurve=function(){var t=this.attr().path;this.set("curve",Ip.pathToCurve(t))},e.prototype._setTcache=function(){var t,e,n,r,i=0,o=0,a=[],s=this.get("curve");s&&(el(s,(function(t,e){n=s[e+1],r=t.length,n&&(i+=Jc.length(t[r-2],t[r-1],n[1],n[2],n[3],n[4],n[5],n[6])||0)})),this.set("totalLength",i),0!==i?(el(s,(function(l,u){n=s[u+1],r=l.length,n&&((t=[])[0]=o/i,e=Jc.length(l[r-2],l[r-1],n[1],n[2],n[3],n[4],n[5],n[6]),o+=e||0,t[1]=o/i,a.push(t))})),this.set("tCache",a)):this.set("tCache",[]))},e.prototype.getStartTangent=function(){var t,e=this.getSegments();if(e.length>1){var n=e[0].currentPoint,r=e[1].currentPoint,i=e[1].startTangent;t=[],i?(t.push([n[0]-i[0],n[1]-i[1]]),t.push([n[0],n[1]])):(t.push([r[0],r[1]]),t.push([n[0],n[1]]))}return t},e.prototype.getEndTangent=function(){var t,e=this.getSegments(),n=e.length;if(n>1){var r=e[n-2].currentPoint,i=e[n-1].currentPoint,o=e[n-1].endTangent;t=[],o?(t.push([i[0]-o[0],i[1]-o[1]]),t.push([i[0],i[1]])):(t.push([r[0],r[1]]),t.push([i[0],i[1]]))}return t},e}(lp),Ap=Mp;function Bp(t,e,n,r,i){var o=t.length;if(o<2)return!1;for(var a=0;a<o-1;a++){if(yp(t[a][0],t[a][1],t[a+1][0],t[a+1][1],e,n,r))return!0}if(i){var s=t[0],l=t[o-1];if(yp(s[0],s[1],l[0],l[1],e,n,r))return!0}return!1}var Dp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ss(e,t),e.prototype.isInStrokeOrPath=function(t,e,n,r,i){var o=this.attr().points,a=!1;return n&&(a=Bp(o,i,t,e,!0)),!a&&r&&(a=_p(o,t,e)),a},e.prototype.createPath=function(t){var e=this.attr().points;if(!(e.length<2)){t.beginPath();for(var n=0;n<e.length;n++){var r=e[n];0===n?t.moveTo(r[0],r[1]):t.lineTo(r[0],r[1])}t.closePath()}},e}(lp),Np=Dp,Pp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ss(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return Es(Es({},e),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),this.setArrow(),-1!==["points"].indexOf(e)&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.setArrow=function(){var t=this.attr(),e=this.attrs,n=e.points,r=e.startArrow,i=e.endArrow,o=n.length,a=n[0][0],s=n[0][1],l=n[o-1][0],u=n[o-1][1];r&&Xd(this,t,n[1][0],n[1][1],a,s),i&&Kd(this,t,n[o-2][0],n[o-2][1],l,u)},e.prototype.isFill=function(){return!1},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){return!(!n||!i)&&Bp(this.attr().points,i,t,e,!1)},e.prototype.isStroke=function(){return!0},e.prototype.createPath=function(t){var e=this.attr(),n=e.points,r=e.startArrow,i=e.endArrow,o=n.length;if(!(n.length<2)){var a,s=n[0][0],l=n[0][1],u=n[o-1][0],h=n[o-1][1];if(r&&r.d)s+=(a=jd(s,l,n[1][0],n[1][1],r.d)).dx,l+=a.dy;if(i&&i.d)u-=(a=jd(n[o-2][0],n[o-2][1],u,h,i.d)).dx,h-=a.dy;t.beginPath(),t.moveTo(s,l);for(var c=0;c<o-1;c++){var d=n[c];t.lineTo(d[0],d[1])}t.lineTo(u,h)}},e.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),n=this.get("endArrowShape");e&&e.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr().points,e=this.get("totalLength");return Qs(e)?(this.set("totalLength",rd(t)),this.get("totalLength")):e},e.prototype.getPoint=function(t){var e,n,r=this.attr().points,i=this.get("tCache");return i||(this._setTcache(),i=this.get("tCache")),el(i,(function(r,i){t>=r[0]&&t<=r[1]&&(e=(t-r[0])/(r[1]-r[0]),n=i)})),Hc.pointAt(r[n][0],r[n][1],r[n+1][0],r[n+1][1],e)},e.prototype._setTcache=function(){var t=this.attr().points;if(t&&0!==t.length){var e=this.getTotalLength();if(!(e<=0)){var n,r,i=0,o=[];el(t,(function(a,s){t[s+1]&&((n=[])[0]=i/e,r=Hc.length(a[0],a[1],t[s+1][0],t[s+1][1]),i+=r,n[1]=i/e,o.push(n))})),this.set("tCache",o)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,e=[];return e.push([t[1][0],t[1][1]]),e.push([t[0][0],t[0][1]]),e},e.prototype.getEndTangent=function(){var t=this.attr().points,e=t.length-1,n=[];return n.push([t[e-1][0],t[e-1][1]]),n.push([t[e][0],t[e][1]]),n},e}(lp),kp=Pp;var zp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ss(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return Es(Es({},e),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.isInStrokeOrPath=function(t,e,n,r,i){var o=this.attr(),a=o.x,s=o.y,l=o.width,u=o.height,h=o.radius;if(h){var c=!1;return n&&(c=function(t,e,n,r,i,o,a,s){return yp(t+i,e,t+n-i,e,o,a,s)||yp(t+n,e+i,t+n,e+r-i,o,a,s)||yp(t+n-i,e+r,t+i,e+r,o,a,s)||yp(t,e+r-i,t,e+i,o,a,s)||Lp(t+n-i,e+i,i,1.5*Math.PI,2*Math.PI,o,a,s)||Lp(t+n-i,e+r-i,i,0,.5*Math.PI,o,a,s)||Lp(t+i,e+r-i,i,.5*Math.PI,Math.PI,o,a,s)||Lp(t+i,e+i,i,Math.PI,1.5*Math.PI,o,a,s)}(a,s,l,u,h,i,t,e)),!c&&r&&(c=Ep(this,t,e)),c}var d=i/2;return r&&n?Ld(a-d,s-d,l+d,u+d,t,e):r?Ld(a,s,l,u,t,e):n?function(t,e,n,r,i,o,a){var s=i/2;return Ld(t-s,e-s,n,i,o,a)||Ld(t+n-s,e-s,i,r,o,a)||Ld(t+s,e+r-s,n,i,o,a)||Ld(t-s,e+s,i,r,o,a)}(a,s,l,u,i,t,e):void 0},e.prototype.createPath=function(t){var e=this.attr(),n=e.x,r=e.y,i=e.width,o=e.height,a=e.radius;if(t.beginPath(),0===a)t.rect(n,r,i,o);else{var s=function(t){var e=0,n=0,r=0,i=0;return Js(t)?1===t.length?e=n=r=i=t[0]:2===t.length?(e=r=t[0],n=i=t[1]):3===t.length?(e=t[0],n=i=t[1],r=t[2]):(e=t[0],n=t[1],r=t[2],i=t[3]):e=n=r=i=t,[e,n,r,i]}(a),l=s[0],u=s[1],h=s[2],c=s[3];t.moveTo(n+l,r),t.lineTo(n+i-u,r),0!==u&&t.arc(n+i-u,r+u,u,-Math.PI/2,0),t.lineTo(n+i,r+o-h),0!==h&&t.arc(n+i-h,r+o-h,h,0,Math.PI/2),t.lineTo(n+c,r+o),0!==c&&t.arc(n+c,r+o-c,c,Math.PI/2,Math.PI),t.lineTo(n,r+l),0!==l&&t.arc(n+l,r+l,l,Math.PI,1.5*Math.PI),t.closePath()}},e}(lp),Fp=zp,Hp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ss(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return Es(Es({},e),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.isOnlyHitBox=function(){return!0},e.prototype.initAttrs=function(t){this._assembleFont(),t.text&&this._setText(t.text)},e.prototype._assembleFont=function(){var t=this.attrs;t.font=ud(t)},e.prototype._setText=function(t){var e=null;ol(t)&&-1!==t.indexOf("\n")&&(e=t.split("\n")),this.set("textArr",e)},e.prototype.onAttrChange=function(e,n,r){t.prototype.onAttrChange.call(this,e,n,r),e.startsWith("font")&&this._assembleFont(),"text"===e&&this._setText(n)},e.prototype._getSpaceingY=function(){var t=this.attrs,e=t.lineHeight,n=1*t.fontSize;return e?e-n:.14*n},e.prototype._drawTextArr=function(t,e,n){var r,i=this.attrs,o=i.textBaseline,a=i.x,s=i.y,l=1*i.fontSize,u=this._getSpaceingY(),h=ld(i.text,i.fontSize,i.lineHeight);el(e,(function(e,i){r=s+i*(u+l)-h+l,"middle"===o&&(r+=h-l-(h-l)/2),"top"===o&&(r+=h-l),Qs(e)||(n?t.fillText(e,a,r):t.strokeText(e,a,r))}))},e.prototype._drawText=function(t,e){var n=this.attr(),r=n.x,i=n.y,o=this.get("textArr");if(o)this._drawTextArr(t,o,e);else{var a=n.text;Qs(a)||(e?t.fillText(a,r,i):t.strokeText(a,r,i))}},e.prototype.strokeAndFill=function(t){var e=this.attrs,n=e.lineWidth,r=e.opacity,i=e.strokeOpacity,o=e.fillOpacity;this.isStroke()&&n>0&&(Qs(i)||1===i||(t.globalAlpha=r),this.stroke(t)),this.isFill()&&(Qs(o)||1===o?this.fill(t):(t.globalAlpha=o,this.fill(t),t.globalAlpha=r)),this.afterDrawPath(t)},e.prototype.fill=function(t){this._drawText(t,!0)},e.prototype.stroke=function(t){this._drawText(t,!1)},e}(lp),Gp=Hp;function Wp(t,e,n){var r,i,o=t.getTotalMatrix();if(o){var a=(r=[e,n,1],(i=o)?Tu(bu(i),r):r);return[a[0],a[1]]}return[e,n]}function Yp(t,e,n){if(t.isCanvas&&t.isCanvas())return!0;if(!nu(t)||!1===t.cfg.isInView)return!1;if(t.cfg.clipShape){var r=Wp(t,e,n),i=r[0],o=r[1];if(t.isClipped(i,o))return!1}var a=t.cfg.cacheCanvasBBox||t.getCanvasBBox();return e>=a.minX&&e<=a.maxX&&n>=a.minY&&n<=a.maxY}function Up(t,e,n){if(!Yp(t,e,n))return null;for(var r=null,i=t.getChildren(),o=i.length-1;o>=0;o--){var a=i[o];if(a.isGroup())r=Up(a,e,n);else if(Yp(a,e,n)){var s=a,l=Wp(a,e,n),u=l[0],h=l[1];s.isInShape(u,h)&&(r=a)}if(r)break}return r}var Vp,jp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ss(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.renderer="canvas",e.autoDraw=!0,e.localRefresh=!0,e.refreshElements=[],e.clipView=!0,e.quickHit=!1,e},e.prototype.onCanvasChange=function(t){"attr"!==t&&"sort"!==t&&"changeSize"!==t||(this.set("refreshElements",[this]),this.draw())},e.prototype.getShapeBase=function(){return i},e.prototype.getGroupBase=function(){return ap},e.prototype.getPixelRatio=function(){var t=this.get("pixelRatio")||(window?window.devicePixelRatio:1);return t>=1?Math.ceil(t):1},e.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},e.prototype.createDom=function(){var t=document.createElement("canvas"),e=t.getContext("2d");return this.set("context",e),t},e.prototype.setDOMSize=function(e,n){t.prototype.setDOMSize.call(this,e,n);var r=this.get("context"),i=this.get("el"),o=this.getPixelRatio();i.width=o*e,i.height=o*n,o>1&&r.scale(o,o)},e.prototype.clear=function(){t.prototype.clear.call(this),this._clearFrame();var e=this.get("context"),n=this.get("el");e.clearRect(0,0,n.width,n.height)},e.prototype.getShape=function(e,n){return this.get("quickHit")?Up(this,e,n):t.prototype.getShape.call(this,e,n,null)},e.prototype._getRefreshRegion=function(){var t,e=this.get("refreshElements"),n=this.getViewRange();e.length&&e[0]===this?t=n:(t=function(t){if(!t.length)return null;var e=[],n=[],r=[],i=[];return el(t,(function(t){var o=op(t);o&&(e.push(o.minX),n.push(o.minY),r.push(o.maxX),i.push(o.maxY))})),{minX:il(e),minY:il(n),maxX:rl(r),maxY:rl(i)}}(e),t&&(t.minX=Math.floor(t.minX),t.minY=Math.floor(t.minY),t.maxX=Math.ceil(t.maxX),t.maxY=Math.ceil(t.maxY),t.maxY+=1,this.get("clipView")&&(t=function(t,e){return t&&e&&Od(t,e)?{minX:Math.max(t.minX,e.minX),minY:Math.max(t.minY,e.minY),maxX:Math.min(t.maxX,e.maxX),maxY:Math.min(t.maxY,e.maxY)}:null}(t,n))));return t},e.prototype.refreshElement=function(t){this.get("refreshElements").push(t)},e.prototype._clearFrame=function(){var t,e=this.get("drawFrame");e&&(t=e,(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(t),this.set("drawFrame",null),this.set("refreshElements",[]))},e.prototype.draw=function(){var t=this.get("drawFrame");this.get("autoDraw")&&t||this._startDraw()},e.prototype._drawAll=function(){var t=this.get("context"),e=this.get("el"),n=this.getChildren();t.clearRect(0,0,e.width,e.height),qd(t,this),Zd(t,n),this.set("refreshElements",[])},e.prototype._drawRegion=function(){var t=this.get("context"),e=this.get("refreshElements"),n=this.getChildren(),r=this._getRefreshRegion();r?(t.clearRect(r.minX,r.minY,r.maxX-r.minX,r.maxY-r.minY),t.save(),t.beginPath(),t.rect(r.minX,r.minY,r.maxX-r.minX,r.maxY-r.minY),t.clip(),qd(t,this),Qd(this,n,r),Zd(t,n,r),t.restore()):e.length&&tp(e),el(e,(function(t){t.get("hasChanged")&&t.set("hasChanged",!1)})),this.set("refreshElements",[])},e.prototype._startDraw=function(){var t,e=this,n=this.get("drawFrame");n||(t=function(){e.get("localRefresh")?e._drawRegion():e._drawAll(),e.set("drawFrame",null)},n=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,16)})(t),this.set("drawFrame",n))},e.prototype.skipDraw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.width=0,t.height=0,t.parentNode.removeChild(t)},e}(Lc),Xp="<svg",Kp={},$p=function(t){function e(e){var n=t.call(this,e)||this;return n.hasSupportSuffix=function(t){return[".png",".jpg",".gif",".svg"].some((function(e){return null==t?void 0:t.endsWith(e)}))},n.render(),n}return Ss(e,t),e.prototype.getImage=function(t,e,n){var r=this;return new Promise((function(i,o){var a=new Image;a.onload=function(){Kp[e]=a,i(a)},a.onerror=function(t){o(t)};var s=Xs(t);s&&(s.includes("data:image/svg+xml")||r.hasSupportSuffix(s))?a.src=s:s&&(n&&(s=(s=s.replace(/fill=[\'\"]#?\w+[\'\"]/g,"")).replace(/fill>/g,">")),s=s.replace(Xp,"".concat(Xp,' fill="').concat(n,'"')).replace(/#/g,"%23"),a.src="data:image/svg+xml;utf-8,".concat(s))}))},e.prototype.render=function(){var t=this,e=this.cfg,n=e.name,r=e.fill,i=Mi(this.cfg),o=new gp({attrs:Ca(i,"fill")}),a="".concat(n,"-").concat(r),s=Kp[a];s?(o.attr("img",s),this.addShape("image",o)):this.getImage(n,a,r).then((function(e){o.attr("img",e),t.addShape("image",o)})).catch((function(t){console.warn("GuiIcon ".concat(n," load error"),t)})),this.image=o},e}(ap);t.CornerNodeType=void 0,(Vp=t.CornerNodeType||(t.CornerNodeType={})).ROW="row",Vp.Col="col";var qp=function(){function t(){this.store=new Map}return t.prototype.set=function(t,e){this.store.set(t,e)},t.prototype.get=function(t,e){var n;return null!==(n=this.store.get(t))&&void 0!==n?n:e},t.prototype.clear=function(){this.store.clear()},t.prototype.size=function(){return this.store.size},t}(),Zp=function(t,e){return t.sort((function(t,n){var r=e.indexOf(t),i=e.indexOf(n);return-1===r&&-1===i?0:-1===r?1:-1===i?-1:r-i}))},Qp=function(t){return Mo(t,(function(t){return!aa(t)&&"undefined"!==t}))},Jp=function(t){var e;return null===(e=Je(t))||void 0===e?void 0:e.reduce((function(e,n){var r=In(t,n);return Array.isArray(r)?e=e.concat(Jp(r)):null==e||e.push(r),e}),[])},tf=function(t){var e,n=[];return Array.isArray(t)?null===(e=Je(t))||void 0===e||e.forEach((function(e){var r,i,o=In(t,e);(null===(r=Je(o))||void 0===r?void 0:r.includes("undefined"))?null===(i=Je(o))||void 0===i||i.forEach((function(t){n.push(o[t])})):n=n.concat(o)})):n=n.concat(t),n},ef=function(t,e){var n=[];return null==t||t.forEach((function(t,r){void 0===t&&e[r]&&n.push(e[r])})),n},nf=function(t,e){return!Io(t,(function(t){return e[t]}))};function rf(t,e){var n=e.rows,r=e.columns;return ja(t,(function(t,e){return nf([].concat(n).concat(r),e)&&t.push(e),t}),[])}var of={en_US:["KMBTP".split(""),[1e3,1e3,1e3,1e3,1e3]],zh_CN:[["万","亿"],[1e4,1e4]]},af=function(t){return Number.parseFloat((Lt(t)||0).toPrecision(16))},sf=function(t){return t?t.map((function(t){return{key:t.key,title:t.title,children:sf(t.children),collapsed:t.collapsed,description:t.description}})):[]};function lf(t,e){var n;return null===(n=null==t?void 0:t.addShape)||void 0===n?void 0:n.call(t,"rect",{zIndex:1,attrs:e})}function uf(t,e){var n;return null===(n=null==t?void 0:t.addShape)||void 0===n?void 0:n.call(t,"polygon",{attrs:e})}function hf(t,e,n,r,i,o,a){var s;return!na(e)&&t&&_o(e,(function(e){t.contain(e)&&t.removeChild(e,!0)})),null===(s=null==t?void 0:t.addShape)||void 0===s?void 0:s.call(t,"text",{attrs:Es(Es({x:n,y:r,text:i},o),a)})}function cf(t,e,n){var r;return null===(r=null==t?void 0:t.addShape)||void 0===r?void 0:r.call(t,"line",{zIndex:100,attrs:Es(Es({},e),n)})}function df(t,e,n){t&&Xa(t,"attrs.".concat(e),n)}function pf(t,e){var n=new $p(e);return null==t||t.add(n),n}function ff(t,e,n,r,i){var o=new $p(Es(Es({name:r?"Plus":"Minus"},e),{fill:n}));return o.on("click",i),null==t||t.add(o),o}var vf=document.createElement("canvas").getContext("2d"),gf=wn((function(t,e){if(void 0===t&&(t=""),!e)return 0;var n=e,r=n.fontSize,i=n.fontFamily,o=n.fontWeight,a=n.fontStyle,s=n.fontVariant;return vf.font=[a,s,o,"".concat(r,"px"),i].join(" ").trim(),vf.measureText("".concat(t)).width}),(function(t,e){return Ls([t],_s(Xo(e)),!1).join("")})),yf=function(t,e,n){var r,i=gf("...",n);r=jo(t)?t:bn(t);var o,a,s=e,l=[];if(gf(t,n)<=e)return t;for(var u=!0;u;){if(o=r.substr(0,16),(a=gf(o,n))+i>s&&a>s){u=!1;break}if(l.push(o),s-=a,!(r=r.substr(16)))return l.join("")}for(var h=!0;h;){if(o=r.substr(0,1),(a=gf(o,n))+i>s){h=!1;break}if(l.push(o),s-=a,!(r=r.substr(1)))return l.join("")}return"".concat(l.join(""),"...")},mf=function(t,e){var n,r;void 0===e&&(e={});var i=gf("a",e),o=gf("蚂",e),a=0;if(!t)return a;try{for(var s=bs(t),l=s.next();!l.done;l=s.next()){var u=l.value.charCodeAt(0);a+=u>=0&&u<=255?i:o}}catch(t){n={error:t}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return a},Cf=function(t){var e=t.text,n=t.maxWidth,r=t.fontParam,i=t.priorityParam,o=t.placeholder,a={},s=null!=o?o:"-",l=oa(e)||""===e?s:e,u=i;if(r&&vt(r)?u=r:a=r||{},!u||!u.length)return yf(l,n,a);var h=[],c=[l];u.forEach((function(t){c.forEach((function(e,n){var r=-1,i=e.match(new RegExp(t));if(i){var o=i[0];r=i.index,h.push(o);var a=r+o.length,s=[e.slice(0,r),e.slice(a)].filter((function(t){return!!t}));c.splice.apply(c,Ls([n,1],_s(s),!1))}}))})),c=h.concat(c);var d=l,p=gf("...",a),f=n;return c.forEach((function(t){if(f<=0){var e=d.indexOf(t),n=d.slice(e-3,e);if(n&&"..."!==n){var r=gf(t,a);d=d.replace(t,r>p?"...":t)}else d=d.replace(t,"");f-=p}else{r=gf(t,a);if(f<r&&r>p){var i=yf(t,f,a);d=d.replace(t,i),f=0}else f-=r}})),d},wf=function(t){return ia(t)?t>=0:!/^-/.test(t)},xf=function(t,e,n){return t+e/2+(n||0)},Sf=function(t,e,n,r,i){var o=In(r,"style.cellCfg",{}),a=null==o?void 0:o.firstDerivedMeasureRowIndex,s=t===(null==o?void 0:o.minorMeasureRowIndex),l=e>=a,u=Mi(s?i.minorText:i.text),h=i.derivedMeasureText,c=s?null==h?void 0:h.minorUp:(null==h?void 0:h.mainUp)||i.icon.upIconColor,d=s?null==h?void 0:h.minorDown:(null==h?void 0:h.mainDown)||i.icon.downIconColor;if(l){var p=wf(n);return va(u,{fill:p?c:d})}return u},Ef=function(e){var n=e.getContentArea(),r=n.x,i=n.y,o=n.height,a=n.width,s=e.getMeta().fieldValue,l=e.getStyle(t.CellTypes.DATA_CELL),u=l.bolderText,h=l.cell.padding,c=a/(s.values[0].length+1),d=o/(s.values.length+1);hf(e,[],xf(r,h.right),i+d/2,Cf({text:s.label,maxWidth:a-h.left,fontParam:u}),u);for(var p,f,v,g=s.values,y=i+d/2,m=0,C=0;C<g.length;C+=1){y=i+d/2+d*(C+1),m=0;for(var w=0;w<g[C].length;w+=1){p=g[C][w]||"-";var x=Sf(C,w,p,null==e?void 0:e.getMeta().spreadsheet.options,l);v=0===w?2*c:c,f=xf(r,h.right,m),m+=v,hf(e,[],f,y,Cf({text:"".concat(p),maxWidth:v,fontParam:x}),x)}}};function Tf(t){return t?'"'.concat("string"==typeof t?t.replace(/"/g,'""'):t,'"'):t}var bf=function(t){try{var e=document.createElement("textarea");e.value=t,document.body.appendChild(e),e.select();var n=document.execCommand("copy");return document.body.removeChild(e),n}catch(t){return console.error(t),!1}},_f=function(t,e,n){if(!t)return"";var r=t.fieldValue,i=t.valueField;return St(r)?function(t){var e=(null==t?void 0:t.label)?[null==t?void 0:t.label]:[],n=null==t?void 0:t.values;return na(n)||_o(n,(function(t){e.push(t.join(" "))})),e.join("$")}(r):n?e.dataSet.getFieldFormatter(i)(r):"".concat(r)},Lf=function(t,e,n){var r=[];if(t){t.data;var i=t.fieldValue,o=t.valueField;if(n){var a=e.dataSet.getFieldFormatter(o);r.push(a(i))}else r.push(i)}else r.push("-");return r.join("    ")};function Of(t,e){return!(!t||!e)&&String(t).toLowerCase()===String(e).toLowerCase()}var If=function(t,e){var n=function(t,n){return t+(n?(r=function(t,e){var n,r=t.getMeta(),i=r.rowId;return(n=e.dataSet.getFieldMeta(i)?e.dataSet.getFieldFormatter(i):e.dataSet.getFieldFormatter(r.valueField))&&e.options.interaction.copyWithFormat?n(r.fieldValue):r.fieldValue}(n,e),/\t|\n/.test(r)?JSON.stringify(r):r):"")+"\t";var r};return t.reduce((function(t,e){return t+e.reduce(n,"").slice(0,-1)+"\n"}),"").slice(0,-1)},Rf=function(t){if(!(null==t?void 0:t.length))return[];var e=_s([{row:1/0,col:1/0},{row:0,col:0}],2),n=e[0],r=e[1];t.forEach((function(t){var e=t.getMeta(),i=e.rowIndex,o=e.colIndex;n.col=Math.min(o,n.col),n.row=Math.min(i,n.row),r.col=Math.max(o,r.col),r.row=Math.max(i,r.row)}));var i=_s([r.row-n.row+1,r.col-n.col+1],2),o=i[0],a=i[1],s=new Array(o).fill("").map((function(){return new Array(a).fill("")}));return t.forEach((function(t){var e=t.getMeta(),r=e.rowIndex,i=e.colIndex,o=_s([r-n.row,i-n.col],2),a=o[0],l=o[1];s[a][l]=t})),s},Mf=function(e){var n,r=e.interaction,i=r.getActiveCells(),o=i.filter((function(e){return e.cellType===t.CellTypes.COL_CELL})),a=i.filter((function(e){return e.cellType===t.CellTypes.ROW_CELL})),s=e.dataSet.getDisplayDataSet();if(r.getCurrentStateName()===t.InteractionStateName.ALL_SELECTED)n=function(t,e){var n=e.dataCfg.fields.columns;return t.reduce((function(t,e){return t+"\n"+n.reduce((function(t,n){return t+"\t"+e[n]}),"")}),"")}(s,e);else if(o.length)n=function(t,e){var n=e.map((function(t){return t.getMeta().field}));return t.reduce((function(t,e){return t+"\n"+n.reduce((function(t,n){return t+"\t"+e[n]}),"")}),"")}(s,o);else if(a.length)n=function(t,e){var n=e.map((function(t){return t.getMeta().rowIndex}));return t.filter((function(t,e){return n.includes(e)})).map((function(t){return Object.keys(t).map((function(e){return t[e]})).join("\t")})).join("\n")}(s,a);else{if(!i.length)return;n=If(Rf(i),e)}return n&&bf(n),n},Af=function(t,e){return"".concat(t).concat(A).concat(e)},Bf=function(t,e,n){var r,i=t.split(A);if(n)r=[t];else{r=[Af(i[0],i[1])];for(var o=2;o<i.length;o+=1)r.push(Af(r[o-2],i[o]))}var a=Mo(e,(function(t){var e;return r.includes(null===(e=t.getMeta())||void 0===e?void 0:e.id)}));return a},Df=function(t,e){var n=t.x,r=t.y,i=t.width,o=t.height,a=i-(null==e?void 0:e.left)-(null==e?void 0:e.right),s=o-(null==e?void 0:e.top)-(null==e?void 0:e.bottom);return{x:n+(null==e?void 0:e.left),y:r+(null==e?void 0:e.top),width:a,height:s}},Nf=function(t){return va({size:0,position:"right",margin:{left:0,right:0}},t)},Pf=function(t,e){return t-(e=Nf(e)).size-e.margin.right-e.margin.left},kf=function(t,e,n){var r=t.y,i=t.height;void 0===n&&(n=0);var o=0;switch(e){case"top":o=r;break;case"middle":o=r+i/2-n/2;break;default:o=r+i-n}return o},zf=function(t,e,n,r,i){void 0===n&&(n=0),void 0===i&&(i=1);var o,a,s=t.x,l=t.width,u=e.textAlign,h=e.textBaseline,c=Nf(r),d=c.size,p=c.margin,f=c.position,v=i*(d+p.left)+p.right;switch(u){case"left":o=s+("left"===f?v:0),a=s+("left"===f?p.left:n+p.left);break;case"center":var g=s+l/2-(v-("left"===f?p.left:p.right)+n)/2;o=g+n/2+("left"===f?v-p.left:0),a=g+("left"===f?0:n+p.left);break;default:o=s+l-("right"===f?v:0),a=s+l-("right"===f?v-p.left:n+v-p.left)}return{text:{x:o,y:kf(t,h,0)},icon:{x:a,y:kf(t,h,d)}}},Ff=function(t,e){return zf(t,e).text},Hf=function(t,e,n){var r,i=e.start+e.width,o=t.start+t.width;if(e.start<=t.start&&i>=o)r=t.start+t.width/2;else if(e.start<=t.start){r=(a=e.width-(t.start-e.start))<n?i-n/2:i-a/2}else if(i>=o){var a;r=(a=e.width-(i-o))<n?e.start+n/2:e.start+a/2}else r=e.start+e.width/2;return r},Gf=function(t){function e(e,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var o=t.call(this,{})||this;return o.actualTextWidth=0,o.stateShapes=new Map,o.meta=e,o.spreadsheet=n,o.theme=n.theme,o.handleRestOptions.apply(o,Ls([],_s(r),!1)),o.initCell(),o}return Ss(e,t),e.prototype.getMeta=function(){return this.meta},e.prototype.setMeta=function(t){this.meta=t},e.prototype.getIconStyle=function(){return this.theme[this.cellType].icon},e.prototype.getTextAndIconPosition=function(t){void 0===t&&(t=1);var e=this.getTextStyle(),n=this.getIconStyle();return zf(this.getContentArea(),e,this.actualTextWidth,n,t)},e.prototype.getActualText=function(){return this.actualText},e.prototype.handleRestOptions=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.getStyle=function(t){return this.theme[t||this.cellType]},e.prototype.getResizeAreaStyle=function(){return this.getStyle("resizeArea")},e.prototype.getCellArea=function(){var t=this.meta;return{x:t.x,y:t.y,height:t.height,width:t.width}},e.prototype.getContentArea=function(){var t,e=((null===(t=this.getStyle())||void 0===t?void 0:t.cell)||this.theme.dataCell.cell).padding;return Df(this.getCellArea(),e)},e.prototype.getIconPosition=function(t){return void 0===t&&(t=1),this.getTextAndIconPosition(t).icon},e.prototype.drawTextShape=function(){var t=this.getFormattedFieldValue().formattedValue,e=this.getMaxTextWidth(),n=this.getTextStyle(),r=Cf({text:t,maxWidth:e,fontParam:n,placeholder:this.spreadsheet.options.placeholder});this.actualText=r,this.actualTextWidth=gf(r,n);var i=this.getTextPosition();this.textShape=hf(this,[this.textShape],i.x,i.y,r,n)},e.prototype.drawLinkFieldShape=function(t,e){var n=this.getTextStyle().fill;if(t){var r=void 0;if(ys(this.spreadsheet.options.style.device))r=e;else{var i=this.textShape.getBBox(),o=i.minX,a=i.maxX,s=i.maxY;this.linkFieldShape=cf(this,{x1:o,y1:s+1,x2:a,y2:s+1},{stroke:n,lineWidth:1}),r=n}this.textShape.attr({fill:r,cursor:"pointer",appendInfo:{isRowHeaderText:!0,cellData:this.meta}})}},e.prototype.updateByState=function(t,e){var n=this;this.spreadsheet.interaction.setInteractedCells(e);var r=In(this.theme,"".concat(this.cellType,".cell.interactionState.").concat(t)),i=this.getCellArea(),o=i.x,a=i.y,s=i.height,l=i.width;_o(r,(function(t,e){var r=Je(function(t,e){if(null==t)return{};var n=ft(Zr(t),(function(t){return[t]}));return e=ro(e),xa(t,n,(function(t,n){return e(t,n[0])}))}($,(function(t){return $o(t,e)})));r.forEach((function(r){var i=n.stateShapes.has(r)?n.stateShapes.get(r):n[r];"interactiveBorderShape"===r&&"borderWidth"===e&&(ia(t)&&_o({x:Math.ceil(o+t/2),y:Math.ceil(a+t/2),width:l-t-1,height:s-t-1},(function(t,e){df(i,e,t)})));df(i,K[e],t)}))}))},e.prototype.hideInteractionShape=function(){this.stateShapes.forEach((function(t){df(t,K.backgroundOpacity,0),df(t,K.backgroundColor,"transparent"),df(t,K.borderOpacity,0),df(t,K.borderWidth,1),df(t,K.borderColor,"transparent")}))},e.prototype.clearUnselectedState=function(){df(this.backgroundShape,K.backgroundOpacity,1),df(this.textShape,K.textOpacity,1),df(this.linkFieldShape,K.opacity,1)},e}(ap),Wf=function(t,e){return e?e(t.$$extra$$,t.$$value$$):t.$$value$$},Yf=function(t,e){var n=e.getMeta().id;return t.some((function(t){return ra(t.id,n)}))},Uf=function(t,e){return"".concat(t,"-").concat(e)},Vf=function(t){var e;return null!==(e=null==t?void 0:t.position)&&void 0!==e?e:"right"},jf=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return Ss(n,e),Object.defineProperty(n.prototype,"cellType",{get:function(){return t.CellTypes.DATA_CELL},enumerable:!1,configurable:!0}),n.prototype.handlePrepareSelect=function(e){Yf(e,this)&&this.updateByState(t.InteractionStateName.PREPARE_SELECT)},n.prototype.handleSelect=function(e){var n;switch(null===(n=null==e?void 0:e[0])||void 0===n?void 0:n.type){case t.CellTypes.COL_CELL:this.changeRowColSelectState("colIndex");break;case t.CellTypes.ROW_CELL:this.changeRowColSelectState("rowIndex");break;case t.CellTypes.DATA_CELL:Yf(e,this)?this.updateByState(t.InteractionStateName.SELECTED):this.spreadsheet.options.interaction.selectedCellsSpotlight&&this.updateByState(t.InteractionStateName.UNSELECTED)}},n.prototype.handleHover=function(e){var n=Po(e);if(n.type===t.CellTypes.DATA_CELL){if(this.spreadsheet.options.interaction.hoverHighlight){var r=this.meta.colIndex,i=this.meta.rowIndex;r===(null==n?void 0:n.colIndex)||i===(null==n?void 0:n.rowIndex)?this.updateByState(t.InteractionStateName.HOVER):this.hideInteractionShape()}ra(n.id,this.getMeta().id)&&this.updateByState(t.InteractionStateName.HOVER_FOCUS)}else this.hideInteractionShape()},n.prototype.update=function(){var e,n,r=null===(e=this.spreadsheet.interaction)||void 0===e?void 0:e.getCurrentStateName(),i=null===(n=this.spreadsheet.interaction)||void 0===n?void 0:n.getCells();if(r!==t.InteractionStateName.ALL_SELECTED){if(!na(i)&&r)switch(r){case t.InteractionStateName.PREPARE_SELECT:this.handlePrepareSelect(i);break;case t.InteractionStateName.SELECTED:this.handleSelect(i);break;case t.InteractionStateName.HOVER_FOCUS:case t.InteractionStateName.HOVER:this.handleHover(i)}}else this.updateByState(t.InteractionStateName.SELECTED)},n.prototype.setMeta=function(t){e.prototype.setMeta.call(this,t),this.initCell()},n.prototype.initCell=function(){this.conditions=this.spreadsheet.options.conditions,this.drawBackgroundShape(),this.drawInteractiveBgShape(),this.drawConditionIntervalShape(),this.drawInteractiveBorderShape(),this.drawTextShape(),this.drawConditionIconShapes(),this.drawBorderShape(),this.update()},n.prototype.getTextStyle=function(){var t,e,n=this.meta.isTotals?this.theme.dataCell.bolderText:this.theme.dataCell.text,r=n.fill,i=this.findFieldCondition(null===(t=this.conditions)||void 0===t?void 0:t.text);return(null==i?void 0:i.mapping)&&(r=(null===(e=this.mappingValue(i))||void 0===e?void 0:e.fill)||n.fill),Es(Es({},n),{fill:r})},n.prototype.getIconStyle=function(){var t,e=this.theme.dataCell.icon,n=e.size,r=e.margin,i=this.findFieldCondition(null===(t=this.conditions)||void 0===t?void 0:t.icon);return i&&i.mapping&&{size:n,margin:r,position:Vf(i)}},n.prototype.getFormattedFieldValue=function(){var t=this.meta.rowId,e=(this.spreadsheet.dataSet.getFieldMeta(t)?this.spreadsheet.dataSet.getFieldFormatter(t):this.spreadsheet.dataSet.getFieldFormatter(this.meta.valueField))(this.meta.fieldValue);return{value:this.meta.fieldValue,formattedValue:e}},n.prototype.getMaxTextWidth=function(){var t=this.getContentArea().width;return Pf(t,this.getIconStyle())},n.prototype.getTextPosition=function(){return this.getTextAndIconPosition().text},n.prototype.drawConditionIconShapes=function(){var t,e=this.findFieldCondition(null===(t=this.conditions)||void 0===t?void 0:t.icon);if(e&&e.mapping){var n=this.mappingValue(e),r=this.getIconPosition(),i=this.getFormattedFieldValue().formattedValue,o=this.theme.dataCell.icon.size;!na(null==n?void 0:n.icon)&&i&&(this.conditionIconShape=pf(this,Es(Es({},r),{name:n.icon,width:o,height:o,fill:n.fill})))}},n.prototype.getIntervalScale=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),t=af(t),e=af(e);var n=t>=0?0:t,r=e-n||1;return function(t){return function(t,e,n){return void 0===n&&(n=e,e=void 0),void 0!==n&&(n=(n=Lt(n))==n?n:0),void 0!==e&&(e=(e=Lt(e))==e?e:0),Dr(Lt(t),e,n)}((t-n)/r,0,1)}},n.prototype.drawConditionIntervalShape=function(){var t,e,n=this.getCellArea(),r=n.x,i=n.y,o=n.height,a=n.width,s=this.getFormattedFieldValue().formattedValue,l=this.findFieldCondition(null===(t=this.conditions)||void 0===t?void 0:t.interval);if(l&&l.mapping&&s){var u=this.mappingValue(l);if(!u)return;var h=u.isCompare?u:this.spreadsheet.dataSet.getValueRangeByField(this.meta.valueField),c=h.minValue,d=h.maxValue,p=af(this.meta.fieldValue);if(p<c||p>d)return;var f=this.getIntervalScale(c,d),v=f(0),g=f(p),y=this.getStyle().cell.miniBarChartHeight,m=this.getStyle().cell.miniBarChartFillColor,C=null!==(e=u.fill)&&void 0!==e?e:m;this.conditionIntervalShape=lf(this,{x:r+a*v,y:i+o/2-y/2,width:a*(g-v),height:y,fill:C})}},n.prototype.getBackgroundColor=function(){var t,e=this.getStyle().cell.crossBackgroundColor,n=this.getStyle().cell.backgroundColor;this.spreadsheet.isPivotMode()&&e&&this.meta.rowIndex%2==0&&(n=e);var r=this.findFieldCondition(null===(t=this.conditions)||void 0===t?void 0:t.background);if(r&&r.mapping){var i=this.mappingValue(r);i&&(n=i.fill)}return{backgroundColor:n,strokeColor:"transparent"}},n.prototype.drawBackgroundShape=function(){var t=this.getBackgroundColor(),e=t.backgroundColor,n=t.strokeColor;this.backgroundShape=lf(this,Es(Es({},this.getCellArea()),{fill:e,stroke:n}))},n.prototype.drawInteractiveBorderShape=function(){var t=this.getCellArea(),e=t.x,n=t.y,r=t.height,i=t.width;this.stateShapes.set("interactiveBorderShape",lf(this,{x:e+1,y:n+1,width:i-2,height:r-2,fill:"transparent",stroke:"transparent"}))},n.prototype.drawInteractiveBgShape=function(){this.stateShapes.set("interactiveBgShape",lf(this,Es(Es({},this.getCellArea()),{fill:"transparent",stroke:"transparent"})))},n.prototype.changeRowColSelectState=function(e){var n=this.spreadsheet.interaction,r=In(this.meta,e),i=n.getState(),o=i.nodes,a=void 0===o?[]:o,s=i.cells,l=void 0===s?[]:s;Ls(Ls([],_s(a),!1),_s(l),!1).find((function(t){return In(t,e)===r}))?this.updateByState(t.InteractionStateName.SELECTED):this.spreadsheet.options.interaction.selectedCellsSpotlight?this.updateByState(t.InteractionStateName.UNSELECTED):this.hideInteractionShape()},n.prototype.drawBorderShape=function(){var t=this.getCellArea(),e=t.x,n=t.y,r=t.height,i=t.width,o=this.getStyle().cell,a=o.horizontalBorderColor,s=o.horizontalBorderWidth,l=o.horizontalBorderColorOpacity,u=o.verticalBorderColor,h=o.verticalBorderWidth,c=o.verticalBorderColorOpacity;cf(this,{x1:e,y1:n+r,x2:e+i,y2:n+r},{stroke:a,lineWidth:s,opacity:l}),cf(this,{x1:e+i,y1:n,x2:e+i,y2:n+r},{stroke:u,lineWidth:h,opacity:c})},n.prototype.findFieldCondition=function(t){var e=this;return No(t,(function(t){return t.field===e.meta.valueField}))},n.prototype.mappingValue=function(t){var e=this.meta.fieldValue;return null==t?void 0:t.mapping(e,this.meta.data)},n.prototype.updateByState=function(n){if(e.prototype.updateByState.call(this,n,this),n===t.InteractionStateName.UNSELECTED){var r=In(this.theme,"".concat(this.cellType,".cell.interactionState.").concat(n));r&&(df(this.conditionIntervalShape,K.backgroundOpacity,r.backgroundOpacity),df(this.conditionIconShape,K.opacity,r.opacity))}},n.prototype.clearUnselectedState=function(){e.prototype.clearUnselectedState.call(this),df(this.conditionIntervalShape,K.backgroundOpacity,1),df(this.conditionIconShape,K.opacity,1)},n}(Gf),Xf=function(e){function n(t,n,r){return e.call(this,r,t,n)||this}return Ss(n,e),n.prototype.handleRestOptions=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=_s(t,1),r=n[0];this.cells=r},Object.defineProperty(n.prototype,"cellType",{get:function(){return t.CellTypes.MERGED_CELL},enumerable:!1,configurable:!0}),n.prototype.update=function(){},n.prototype.initCell=function(){this.drawBackgroundShape(),this.drawTextShape()},n.prototype.drawBackgroundShape=function(){var t=Zf(this.cells),e=this.theme.dataCell.cell;this.backgroundShape=uf(this,{points:t,stroke:e.horizontalBorderColor,fill:e.backgroundColor,lineHeight:e.horizontalBorderWidth})},n.prototype.drawTextShape=function(){na(this.meta)||(St(this.meta.fieldValue)?Ef(this):e.prototype.drawTextShape.call(this))},n}(jf),Kf=function(t,e,n,r){var i=[t,e],o=[t+n,e],a=[t+n,e+r],s=[t,e+r];return[[i,o],[o,a],[a,s],[s,i]]},$f=function(t){var e=[];return _o(t,(function(n){var r=[n[1],n[0]];JSON.stringify(t).includes(JSON.stringify(r))||e.push(n)})),e},qf=function(t,e){return No(e,(function(e){return ra(e[0],t[1])}))},Zf=function(t){var e=[];t.forEach((function(t){var n=t.getMeta(),r=n.x,i=n.y,o=n.width,a=n.height;e=e.concat(Kf(r,i,o,a))}));for(var n=[],r=(e=$f(e))[0],i=r,o=[];!ra(r,o);)n=n.concat(i),i=o=qf(i,e);return n},Qf=function(t,e){var n,r=[];return _o(t,(function(t){var i,o,a,s=null===(o=null===(i=null==e?void 0:e.facet)||void 0===i?void 0:i.layoutResult)||void 0===o?void 0:o.getCellMeta(t.rowIndex,t.colIndex);if(s){var l=null===(a=null==e?void 0:e.facet)||void 0===a?void 0:a.cfg.dataCell(s);n=(null==t?void 0:t.showText)?s:n,r.push(l)}})),{cells:r,cellsMeta:n}},Jf=function(t,e){var n,r=[],i=[];return _o(t,(function(t){var o=No(e,(function(e){var n,r=null===(n=null==e?void 0:e.getMeta)||void 0===n?void 0:n.call(e);if((null==r?void 0:r.colIndex)===(null==t?void 0:t.colIndex)&&(null==r?void 0:r.rowIndex)===(null==t?void 0:t.rowIndex))return e}));o?(r.push(o),n=(null==t?void 0:t.showText)?null==o?void 0:o.getMeta():n):i.push(t)})),{cells:r,invisibleCellInfo:i,cellsMeta:n}},tv=function(t,e,n){var r;void 0===n&&(n=[]);var i=Jf(n,t),o=i.cellsMeta,a=i.cells,s=i.invisibleCellInfo,l=o,u=a;if((null==s?void 0:s.length)>0&&s.length<n.length){var h=Qf(s,e),c=h.cells,d=h.cellsMeta;l=l||d,u=a.concat(c)}return na(a)||l||(l=null===(r=u[0])||void 0===r?void 0:r.getMeta()),{cells:u,viewMeta:l}},ev=function(t){var e=t.interaction.getActiveCells(),n=[];return _o(e,(function(t){var e=t.getMeta();n.push({colIndex:null==e?void 0:e.colIndex,rowIndex:null==e?void 0:e.rowIndex})})),n},nv=function(t,e,n){var r,i=e||ev(t);if((null==i?void 0:i.length)<=1)console.error("then merged cells must be more than one");else{var o=Mo(t.panelScrollGroup.getChildren(),(function(t){return!(t instanceof Xf)})),a=tv(o,t,i),s=a.cells,l=a.viewMeta;if(!na(s)){var u=(null===(r=t.options)||void 0===r?void 0:r.mergedCellsInfo)||[];u.push(i),t.setOptions({mergedCellsInfo:u});var h=n?void 0:l;t.panelScrollGroup.add(new Xf(t,s,h))}}},rv=function(t,e){var n=zo(t.cells,(function(t){return{colIndex:t.getMeta().colIndex,rowIndex:t.getMeta().rowIndex}}));return Mo(e,(function(t){return!ra(t.map((function(t){return t.showText?{colIndex:t.colIndex,rowIndex:t.rowIndex}:t})),n)}))},iv=function(e,n){var r,i,o;if(n&&n.cellType===t.CellTypes.MERGED_CELL){var a=rv(n,null===(r=e.options)||void 0===r?void 0:r.mergedCellsInfo);(null==a?void 0:a.length)!==(null===(o=null===(i=e.options)||void 0===i?void 0:i.mergedCellsInfo)||void 0===o?void 0:o.length)&&(e.setOptions({mergedCellsInfo:a}),n.remove(!0))}else console.error("unmergeCell: the ".concat(n," is not a MergedCell"))},ov=function(t){var e,n=null===(e=t.options)||void 0===e?void 0:e.mergedCellsInfo;if(!na(n)){var r=Mo(t.panelScrollGroup.getChildren(),(function(t){return!(t instanceof Xf)}));if(!na(r)){var i=[];n.forEach((function(e){var n=tv(r,t,e);n.cells.length>0&&i.push(n)})),Mo(t.panelScrollGroup.getChildren(),(function(t){return t instanceof Xf})).forEach((function(t){t.remove(!0)})),i.forEach((function(e){var n=e.cells,r=e.viewMeta;t.panelScrollGroup.add(new Xf(t,n,r))}))}}},av=function(t){var e=t.getMeta();return{id:e.id,colIndex:e.colIndex,rowIndex:e.rowIndex,type:t.cellType}},sv=function(t){_o(t.store.get("visibleActionIcons"),(function(t){t.set("visible",!1)})),t.store.set("visibleActionIcons",[]);var e=t.interaction.getInteractedCells();na(e)||(_o(e,(function(t){t.hideInteractionShape()})),t.interaction.resetState(),t.options.interaction.selectedCellsSpotlight&&_o(t.interaction.getPanelGroupAllUnSelectedDataCells()||[],(function(t){t.clearUnselectedState()})))},lv=function(t,e){var n=null==e?void 0:e.stateName;t.interaction.isEqualStateName(n)||(sv(t),t.hideTooltip(),t.store.set(q,e))},uv=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(t,e){if(vt(t)&&vt(e))return e},r=Ls(Ls([],_s(t),!1),[n],!1);return xo.apply(void 0,Ls([],_s(r),!1))},hv=function(t){var e=va({},z,t);return na(e.fields.customTreeItems)&&!na(e.fields.values)||(e.fields.valueInCols=!1),e},cv=function(t){return va({},Q,t)},dv=function(t){return Number.isNaN(Number(t))};var pv=function(t,e){var n=ja(t,(function(t,n){var r=In(n,e,0);return function(t,e){var n,r,i,o=_s(null===(n=null==t?void 0:t.toString())||void 0===n?void 0:n.split("."),2),a=o[0],s=o[1],l=void 0===s?"":s,u=_s(null===(r=null==e?void 0:e.toString())||void 0===r?void 0:r.split("."),2),h=u[0],c=u[1],d=void 0===c?"":c,p=(null==l?void 0:l.length)||0,f=(null==d?void 0:d.length)||0,v=Math.pow(10,Math.max(p,f)),g=null===(i=Array(Math.abs(p-f)).fill("0"))||void 0===i?void 0:i.join(""),y=f>p?"".concat(a).concat(l).concat(g):"".concat(a).concat(l),m=p>f?"".concat(h).concat(d).concat(g):"".concat(h).concat(d);return(Number.parseInt(y,10)+Number.parseInt(m,10))/v}(t,dv(r)?0:Number.parseFloat(r)||Number(r))}),0);return n},fv=function(t){var e=t.spreadsheet,n=t.position,r=t.tooltipContainer,i=t.autoAdjustBoundary,o=n.x+ds.x,a=n.y+ds.y;if(!i)return{x:o,y:a};var s="body"===i,l=e.facet.panelBBox,u=l.maxX,h=l.maxY,c=e.options,d=c.width,p=c.height,f=e.container.get("el").getBoundingClientRect(),v=f.top,g=f.left,y=r.getBoundingClientRect(),m=y.width,C=y.height,w=document.body.getBoundingClientRect(),x=w.width,S=w.height,E=s?x:Math.min(d,u)+g,T=s?S:Math.min(p,h)+v;return o+m>=E&&(o=E-m),a+C>=T&&(a=T-C),{x:o,y:a}},vv=function(t){return Es({operator:{onClick:Zt,menus:[]},enterable:!0},t)},gv=function(t){return Es(Es({},null==t?void 0:t.colQuery),null==t?void 0:t.rowQuery)},yv=function(t,e){if(void 0===e&&(e={className:""}),t){var n=e.style,r=e.className;n&&Object.keys(n).forEach((function(e){t.style[e]=n[e]})),r&&t.classList.add(r)}},mv=function(t){var e=ia(t)&&Number.isNaN(t),n=""===t;return oa(t)||e||n?"-":t},Cv=function(t,e){var n,r=null===(n=null==t?void 0:t.dataSet)||void 0===n?void 0:n.getFieldFormatter(e);return function(t){return mv(r(t))}},wv=function(t,e,n,r){var i,o=null===(i=null==t?void 0:t.dataSet)||void 0===i?void 0:i.getFieldName(n),a=Cv(t,n),s=St(e[n])?JSON.stringify(e[n]):e[n];return{name:o,value:a(r||s)}},xv=function(t,e,n){return zo(Mo(Bi([],e),(function(t){return t!==l&&n[t]})),(function(e){return wv(t,n,e)}))},Sv=function(t,e,n){var r,i,o,a,s=(n||{}).isTotals,l=[],u=[];if(e){var h=null===(i=null===(r=null==t?void 0:t.dataSet)||void 0===r?void 0:r.fields)||void 0===i?void 0:i.columns,c=null===(a=null===(o=null==t?void 0:t.dataSet)||void 0===o?void 0:o.fields)||void 0===a?void 0:a.rows;l=xv(t,h,e),u=xv(t,c,e)}return na(l)&&na(u)&&s&&(l=[{value:ls("总计")}]),{cols:l,rows:u}},Ev=function(t,e,n){if(e){var r=n.isTotals,i=e.$$extra$$,o=e[i],a=[];if(r)a.push(wv(t,e,i,In(e,s)));else if(function(t){return St(t)&&"values"in t}(o)&&t.getTooltipDataItemMappingCallback()){var l=Wf(e,t.getTooltipDataItemMappingCallback());_o(l,(function(e,n){a.push(wv(t,l,n))}))}else a.push(wv(t,e,i));return a}},Tv=function(t,e,n){var r;if(n)return ls("总计");var i=null===(r=null==t?void 0:t.dataSet)||void 0===r?void 0:r.getFieldName(e);return i&&"undefined"!==i?i:""},bv=function(t,e,n){void 0===n&&(n=!0);var r=[];return _o(e,(function(e,i){_o(t,(function(t){n||-1===t.colIndex?n&&-1!==t.rowIndex&&r.push([t.rowIndex,i]):r.push([i,t.colIndex])}))})),r},_v=function(e,n){var r,i=n.rowLeafNodes,o=n.colLeafNodes,a=e.interaction.getState().nodes,s=void 0===a?[]:a,l=e.interaction.getCells(),u=null===(r=null==l?void 0:l[0])||void 0===r?void 0:r.type;return u===t.CellTypes.COL_CELL?bv(s,i,!1):u===t.CellTypes.ROW_CELL?bv(s,o):[]},Lv=function(t,e){var n,r=null===(n=t.facet)||void 0===n?void 0:n.layoutResult;return e?zo(_v(t,r),(function(t){var e=_s(t,2),n=e[0],i=e[1],o=r.getCellMeta(n,i);return(null==o?void 0:o.data)||gv(o)})):zo(t.interaction.getActiveCells(),(function(t){var e;return(null===(e=t.getMeta())||void 0===e?void 0:e.data)||gv(t.getMeta())}))},Ov=function(t){var e=t.spreadsheet,n=t.getShowValue,r=t.options,i=void 0===r?{}:r,o=[],a={},l=e.isTableMode();return l&&(null==i?void 0:i.showSingleTips)?[{selectedData:e.dataSet.getMultiData({}),name:"",value:""}]:(_o(Lv(e,i.showSingleTips),(function(t){var e;a[null==t?void 0:t.$$extra$$]?null===(e=a[null==t?void 0:t.$$extra$$])||void 0===e||e.push(t):a[null==t?void 0:t.$$extra$$]=[t]})),function(t,e){var n={};e=ro(e),so(t,(function(t,r,i){ve(n,e(t,r,i),t)}))}(a,(function(t,r){var a,u=Cv(e,r),h=Tv(e,r,null==i?void 0:i.isTotals);if(n&&(a=n(t,s)),l)a="";else if(Io(t,(function(t){return dv(In(t,s))})))a="-";else{var c=pv(t,s);a=parseFloat(c.toPrecision(16)),u&&(a=u(c))}o.push({selectedData:t,name:h,value:a})})),o)},Iv=function(t){var e,n,r=t.spreadsheet,i=t.cellInfos,o=void 0===i?[]:i,a=t.options,s=void 0===a?{}:a,l=t.getShowValue,u=null,h=null,c=null,d=o[0]||{};if(null==s?void 0:s.hideSummary)if(s.showSingleTips){var p=null===(n=No(null===(e=null==r?void 0:r.dataCfg)||void 0===e?void 0:e.meta,(function(t){return(null==t?void 0:t.field)===d.value})))||void 0===n?void 0:n.name,f=Cv(r,null==d?void 0:d.valueField);d.name=p||f(d.value)||""}else h=Sv(r,d,s),c=Ev(r,d,s);else u=Ov({spreadsheet:r,options:s,getShowValue:l});var v=d||{};return{summaries:u,interpretation:v.interpretation,infos:v.infos,tips:v.tips,name:v.name,headInfo:h,details:c}},Rv=function(t){return zo(t,(function(t){var e=t.getMeta();return nn({},e.query||{},Ha(e,["colIndex","rowIndex"]))}))},Mv=function(t){var e=[];return t.interaction.isSelectedState()?(t.interaction.getActiveCells().forEach((function(n){var r=t.dataCfg.fields.valueInCols,i=n.getMeta(),o=gv(i);if(!na(i)&&!na(o)){var a=Es(Es({},o),{colIndex:r?i.colIndex:null,rowIndex:r?null:i.rowIndex});e.find((function(t){return ra(a,t)}))||e.push(a)}})),e):[]},Av=function(e,n){void 0===e&&(e={});var r=function(t){return Es(Es({},e),t)},i=e.col,o=e.row,a=e.cell;return n===t.CellTypes.COL_CELL?r(i):n===t.CellTypes.ROW_CELL?r(o):n===t.CellTypes.DATA_CELL?r(a):Es({},e)},Bv=function(t,e){var n,r=null===(n=t.getCellType)||void 0===n?void 0:n.call(t,e.target);return Av(t.options.tooltip,r)},Dv=function(e){var n=e.type,r=e.id,i=e.theme,o=e.width,a=e.height,s=Ts(e,["type","id","theme","width","height"]),l=n===t.ResizeDirectionType.Horizontal?i.size:null,u=n===t.ResizeDirectionType.Vertical?i.size:null;return{fill:i.background,fillOpacity:i.backgroundOpacity,cursor:"".concat(n,"-resize"),width:l,height:u,appendInfo:Es(Es({},s),{isResizeArea:!0,type:n,id:r,width:o,height:a,size:i.size})}},Nv=function(t,e){if(t.foregroundGroup)return t.foregroundGroup.findById(e)||t.foregroundGroup.addGroup({id:e})},Pv=function(t,e,n){var r=null!=n?n:{},i=r.scrollX,o=void 0===i?0:i,a=r.scrollY,s=void 0===a?0:a,l=!(t.x-o>e.x+e.width||t.x+t.width-o<e.x),u=!(t.y-s>e.y+e.height||t.y+t.height-s<e.y);return l&&u},kv=function(t,e,n){if(!t)return!1;var r=t.iconNames,i=t.displayCondition,o=t.belongsCell;return!na(r)&&(o===n&&(!i||i(e)))};function zv(t,e,n){var r=[];return zo(e,(function(e){var i,o=t[e];r.push("".concat(o));var a=r.join("".concat(A));return n[e]?(null===(i=n[e])||void 0===i?void 0:i.includes(a))||n[e].push(a):n[e]=[a],o}))}function Fv(t){return t.map((function(t){var e=null==t?void 0:t.split(A);return e[(null==e?void 0:e.length)-1]||t}))}function Hv(t){var e=t.rowDimensionValues,n=t.colDimensionValues,r=t.careUndefined,i=t.isFirstCreate,o=t.rowFields,a=t.colFields,s=t.rowPivotMeta,l=t.colPivotMeta,u=function(t,e,n,s){void 0===e&&(e=!0);for(var l=e?n:s,u=e?o:a,h=[],c=0;c<t.length;c++){var d=t[c];if(!l.has(d))if(i)l.set(d,{level:l.size,children:new Map});else{var p=l.get(d);if(p&&h.push(p.level),!r)break}var f=l.get(d);aa(d)&&r?h.push(d):h.push(null==f?void 0:f.level),f&&(i&&(f.childField=null==u?void 0:u[c+1]),l=null==f?void 0:f.children)}return h},h=u(e,!0,s,l),c=u(n,!1,s,l);return h.concat.apply(h,Ls([],_s(c),!1))}function Gv(t,e){return ja(t,(function(t,n){return t.push(e[n]),t}),[])}function Wv(t){var e,n,r=t.rows,i=t.columns,o=t.originData,a=void 0===o?[]:o,s=t.indexesData,l=void 0===s?[]:s,u=t.totalData,h=void 0===u?[]:u,c=t.sortedDimensionValues,d=t.rowPivotMeta,p=t.colPivotMeta,f=[];try{for(var v=bs(Ls(Ls([],_s(a),!1),_s(h),!1)),g=v.next();!g.done;g=v.next()){var y=g.value,m=Hv({rowDimensionValues:zv(y,r,c),colDimensionValues:zv(y,i,c),rowPivotMeta:d,colPivotMeta:p,isFirstCreate:!0,careUndefined:(null==h?void 0:h.length)>0,rowFields:r,colFields:i});f.push(m),Xa(l,m,y)}}catch(t){e={error:t}}finally{try{g&&!g.done&&(n=v.return)&&n.call(v)}finally{if(e)throw e.error}}return{paths:f,indexesData:l,rowPivotMeta:d,colPivotMeta:p,sortedDimensionValues:c}}function Yv(t,e){if(t&&e){var n=e.split(A),r=bo(n),i=t;_o(n,(function(t){var e=i.get(t);e&&(t===r?(e.children=new Map,e.childField=void 0):i=e.children)}))}}var Uv,Vv=function(t){return"ASC"===qa(t)},jv=function(t,e,n){var r=Vv(e)?1:-1,i=["-",void 0];return null==t?void 0:t.sort((function(t,e){var o=t,a=e;if(n){if(o=t[n],a=e[n],Number(o)&&Number(a))return(Number(o)-Number(a))*r;if(o&&(null==i?void 0:i.includes(null==o?void 0:o.toString())))return-r;if(Number(o)&&(null==i?void 0:i.includes(null==a?void 0:a.toString())))return r}return o&&a?o.toString().localeCompare(a.toString(),"zh")*r:o?r:-r}))},Xv=function(t){var e=t.sortByValues,n=t.originValues,r=e.map((function(t){return(null==n?void 0:n.find((function(e){return function(t,e,n){t=bn(t),e=mt(e);var r=t.length,i=n=void 0===n?r:Dr(Rt(n),0,r);return(n-=e.length)>=0&&t.slice(n,i)==e}(e,t)})))||t}));return Zp(n,r)},Kv=function(t){var e=t.sortParam,n=t.measureValues,r=t.originValues,i=t.dataSet,o=e.sortByMeasure,a=e.query,s=e.sortFieldId,l=e.sortMethod,h=i.fields,c=h.rows,d=h.columns,p=c.includes(s),f=r;o?f=function(t,e,n){var r,i=e.slice(0,e.indexOf(t)+1);return null===(r=n.map((function(t){return i.map((function(e){return t[e]})).join("".concat(A))})))||void 0===r?void 0:r.filter((function(t){return t}))}(s,p?c:d,jv(n,l,o===u?a.$$extra$$:o)):f=zo(jv(n,l));return function(t,e,n){return n?function(t,e){var n;return null===(n=null==t?void 0:t.filter((function(t){return!(null==e?void 0:e.includes(t))})))||void 0===n?void 0:n.concat(e)}(e,ts(t)):Ls([],_s(new Set(Ls(Ls([],_s(t),!1),_s(e),!1))),!1)}(f,r,Vv(l))},$v=function(t){var e=t.sortParam,n=t.originValues,r=t.measureValues,i=t.dataSet,o=e.sortFunc,a=e.sortMethod,s=e.sortBy,l=[],u={originValues:n,measureValues:r,sortParam:e,dataSet:i};return o?l=function(t){var e=t.originValues,n=t.measureValues,r=t.sortParam;return(0,r.sortFunc)(Es({data:n},r))||e}(u):s?l=Xv({sortByValues:s,originValues:n}):a&&(l=Kv(u)),l},qv=function(t){var e,n,r,i=t.dataSet,o=t.sortParam,a=t.originValues,s=t.isSortByMeasure,h=i.fields,c=o.sortByMeasure,d=o.query,p=o.sortFieldId;if(s)if(c===u){var f=(null===(e=null==h?void 0:h.columns)||void 0===e?void 0:e.includes(p))&&1===(null===(n=Je(d))||void 0===n?void 0:n.length)&&Wo(d,l);r=i.getMultiData(d,!0,f)}else r=i.getMultiData(d);else r=a;return $v({sortParam:o,originValues:a,measureValues:r,dataSet:i})},Zv=function(t,e){if(null==t?void 0:t.sortMethod){if(Vv(null==t?void 0:t.sortMethod))return"groupAsc";if("DESC"===qa(null==t?void 0:t.sortMethod))return"groupDesc"}if(e)return"SortDown"},Qv=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return Ss(n,e),n.prototype.handleRestOptions=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=_s(t,1),r=n[0];this.headerConfig=Es({},r);var i=this.meta,o=i.value,a=i.query,s=this.spreadsheet.dataCfg.sortParams,l=this.isValueCell(),u=No(s.reverse(),(function(t){return l&&(null==t?void 0:t.sortByMeasure)===o&&ra(In(t,"query"),a)})),h=Zv(u,l);this.headerConfig.sortParam=Es(Es(Es({},this.headerConfig.sortParam),u||{query:a}),{type:h})},n.prototype.initCell=function(){this.actionIcons=[]},n.prototype.showActionIcons=function(t){return kv(t,this.meta,this.cellType)},n.prototype.getActionIconCfg=function(){var t=this;return No(this.spreadsheet.options.headerActionIcons,(function(e){return t.showActionIcons(e)}))},n.prototype.showSortIcon=function(){if(this.spreadsheet.options.showDefaultHeaderActionIcon){var t=this.headerConfig.sortParam,e=this.meta.query;return e&&ra(In(t,"query"),e)&&In(t,"type")&&"none"!==In(t,"type")}return!1},n.prototype.getActionIconsCount=function(){if(this.showSortIcon())return 1;var t=this.getActionIconCfg();return t?t.iconNames.length:0},n.prototype.getActionIconsWidth=function(){var t=this.getStyle().icon;return(t.size+t.margin.left)*this.getActionIconsCount()},n.prototype.drawSortIcons=function(){var e=this;if(this.showSortIcon()){var n=this.getStyle(),r=n.icon,i=n.text,o=this.headerConfig.sortParam,a=this.getIconPosition(),s=new $p(Es(Es({name:In(o,"type","none")},a),{width:r.size,height:r.size,fill:i.fill}));s.on("click",(function(n){e.spreadsheet.emit(t.S2Event.GLOBAL_ACTION_ICON_CLICK,n),e.spreadsheet.handleGroupSort(n,e.meta)})),this.add(s),this.actionIcons.push(s)}},n.prototype.defaultHideActionIcons=function(){var t=this.getActionIconCfg();return null==t?void 0:t.defaultHide},n.prototype.addActionIcon=function(e,n,r,i,o,a){var s=this,l=this.getStyle().text,u=new $p({name:e,x:n,y:r,width:i,height:i,fill:l.fill});u.set("visible",!a),u.on("mouseover",(function(e){s.spreadsheet.emit(t.S2Event.GLOBAL_ACTION_ICON_HOVER,e)})),u.on("click",(function(n){s.spreadsheet.emit(t.S2Event.GLOBAL_ACTION_ICON_CLICK,n),o({iconName:e,meta:s.meta,event:n})})),this.actionIcons.push(u),this.add(u)},n.prototype.drawActionIcons=function(){var t=this;if(this.showSortIcon())this.drawSortIcons();else{var e=this.getActionIconCfg();if(e){var n=e.iconNames,r=e.action,i=e.defaultHide,o=this.getIconPosition(n.length),a=this.getStyle().icon,s=a.size,l=a.margin;_o(n,(function(e,n){var a=o.x+n*s+n*l.left;t.addActionIcon(e,a,o.y,s,r,i)}))}}},n.prototype.isValueCell=function(){return this.meta.key===l},n.prototype.handleHover=function(e){Yf(e,this)&&(this.updateByState(t.InteractionStateName.HOVER),this.defaultHideActionIcons()&&this.toggleActionIcon(null==e?void 0:e[0].id))},n.prototype.handleSelect=function(e,n){Yf(e,this)&&this.updateByState(t.InteractionStateName.SELECTED),$o(zo(n,"id"),this.meta.id)&&this.updateByState(t.InteractionStateName.SELECTED)},n.prototype.toggleActionIcon=function(t){if(this.getMeta().id===t){var e=[];_o(this.actionIcons,(function(t){t.set("visible",!0),e.push(t)})),this.spreadsheet.store.set("visibleActionIcons",e)}},n.prototype.update=function(){var e=this.spreadsheet.interaction,n=null==e?void 0:e.getState(),r=null==e?void 0:e.getCells();if(Po(r))switch(null==n?void 0:n.stateName){case t.InteractionStateName.SELECTED:this.handleSelect(r,null==n?void 0:n.nodes);break;case t.InteractionStateName.HOVER_FOCUS:case t.InteractionStateName.HOVER:this.handleHover(r)}},n.prototype.updateByState=function(t){e.prototype.updateByState.call(this,t,this)},n.prototype.hideInteractionShape=function(){e.prototype.hideInteractionShape.call(this)},n}(Gf),Jv=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return Ss(n,e),Object.defineProperty(n.prototype,"cellType",{get:function(){return t.CellTypes.COL_CELL},enumerable:!1,configurable:!0}),n.prototype.initCell=function(){e.prototype.initCell.call(this),this.drawBackgroundShape(),this.drawInteractiveBgShape(),this.drawTextShape(),this.drawActionIcons(),this.drawRightBorder(),this.drawResizeArea(),this.update()},n.prototype.drawBackgroundShape=function(){var t=this.getStyle().cell,e=t.backgroundColor,n=t.horizontalBorderColor;this.backgroundShape=lf(this,Es(Es({},this.getCellArea()),{fill:e,stroke:n}))},n.prototype.drawInteractiveBgShape=function(){this.stateShapes.set("interactiveBgShape",lf(this,Es(Es({},this.getCellArea()),{fill:"transparent",stroke:"transparent"})))},n.prototype.getTextStyle=function(){var t,e,n=this.meta,r=n.isLeaf,i=n.isTotals,o=this.getStyle(),a=o.text,s=o.bolderText,l=r&&!i?a:s;return r?(t=this.theme.dataCell.text.textAlign,e=this.theme.dataCell.text.textBaseline):(t="center",e="middle"),Es(Es({},l),{textAlign:t,textBaseline:e})},n.prototype.getFormattedFieldValue=function(){var t=this.meta,e=t.label,n=t.key;return{formattedValue:this.headerConfig.formatter(n)(e),value:e}},n.prototype.getMaxTextWidth=function(){return this.getContentArea().width-this.getActionIconsWidth()},n.prototype.getIconPosition=function(){var t=this.meta.isLeaf,n=this.getIconStyle();if(t)return e.prototype.getIconPosition.call(this,this.getActionIconsCount());var r=this.textAndIconPositionWhenHorizontalScrolling,i=this.actualTextWidth+this.getActionIconsWidth()-n.margin.right;return{x:r.x-i/2+this.actualTextWidth+n.margin.left,y:r.y-n.size/2}},n.prototype.getTextPosition=function(){var t=this.meta.isLeaf,e=this.headerConfig,n=e.width,r=e.scrollContainsRowHeader,i=e.cornerWidth,o=e.scrollX,a=this.getTextStyle(),s=this.getContentArea(),l=this.getIconStyle();if(t)return zf(s,a,this.actualTextWidth,l,this.getActionIconsCount()).text;var u={start:o-(r?i:0),width:n+(r?i:0)},h=this.actualTextWidth+this.getActionIconsWidth()-l.margin.right,c=Hf(u,{start:s.x,width:s.width},h),d=s.y+s.height/2;return this.textAndIconPositionWhenHorizontalScrolling={x:c,y:d},{x:c-h/2+this.actualTextWidth/2,y:d}},n.prototype.getActionIconsWidth=function(){var t=this.getStyle().icon,e=t.size,n=t.margin,r=this.getActionIconsCount();return(e+n.left)*r+r>0?n.right:0},n.prototype.getColResizeAreaKey=function(){return this.meta.key},n.prototype.getColResizeArea=function(){return Nv(this.spreadsheet,T)},n.prototype.getHorizontalResizeAreaName=function(){return"".concat(R).concat(this.meta.key)},n.prototype.drawHorizontalResizeArea=function(){var e=this.headerConfig,n=e.cornerWidth,r=e.width,i=this.meta,o=i.y,a=i.height,s=this.getResizeAreaStyle(),l=this.getColResizeArea(),u=this.getHorizontalResizeAreaName();if(!l.find((function(t){return t.attrs.name===u}))){var h=n+r;l.addShape("rect",{attrs:Es(Es({},Dv({theme:s,type:t.ResizeDirectionType.Vertical,id:this.getColResizeAreaKey(),effect:t.ResizeAreaEffect.Field,offsetX:0,offsetY:o,width:h,height:a})),{name:u,x:0,y:o+a-s.size/2,width:h})})}},n.prototype.drawVerticalResizeArea=function(){if(this.meta.isLeaf){var e=this.meta,n=e.x,r=e.y,i=e.label,o=e.width,a=e.height,s=e.parent,l=this.headerConfig,u=l.scrollX,h=l.scrollY,c=l.position,d=l.scrollContainsRowHeader,p=l.cornerWidth,f=l.height,v=l.width,g=this.getResizeAreaStyle(),y=this.getColResizeArea(),m={x:n+o-g.size/2,y:r,width:g.size,height:a};if(Pv(m,{x:d?-p:0,y:0,width:d?p+v:v,height:f},{scrollX:u,scrollY:h})){var C=c.x+n-u,w=c.y+r;y.addShape("rect",{attrs:Es(Es({},Dv({theme:g,type:t.ResizeDirectionType.Horizontal,effect:t.ResizeAreaEffect.Cell,id:s.isTotals?"":i,offsetX:C,offsetY:w,width:o,height:a})),{x:C+o-g.size/2,y:w,height:a})})}}},n.prototype.drawResizeArea=function(){this.drawHorizontalResizeArea(),this.drawVerticalResizeArea()},n.prototype.drawRightBorder=function(){if(!this.meta.isLeaf){var t=this.headerConfig,e=t.height,n=t.viewportHeight,r=this.meta,i=r.x,o=r.y,a=r.width;cf(this,{x1:i+a,y1:o+r.height,x2:i+a,y2:o+e+n},{stroke:this.theme.colCell.cell.horizontalBorderColor,lineWidth:1})}},n}(Qv),tg=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.textShapes=[],t}return Ss(n,e),Object.defineProperty(n.prototype,"cellType",{get:function(){return t.CellTypes.CORNER_CELL},enumerable:!1,configurable:!0}),n.prototype.update=function(){},n.prototype.initCell=function(){e.prototype.initCell.call(this),this.textShapes=[],this.drawBackgroundShape(),this.drawTreeIcon(),this.drawCellText(),this.drawActionIcons(),this.drawBorderShape(),this.drawResizeArea()},n.prototype.drawCellText=function(){if(!ra(this.meta.label,l)){var t=this.getContentArea().x,e=this.getCellArea(),n=e.y,r=e.height,i=this.getTextStyle(),o=this.getFormattedFieldValue().formattedValue,a=this.getMaxTextWidth(),s=Cf({text:o,maxWidth:a,fontParam:i,placeholder:this.spreadsheet.options.placeholder});this.actualText=s;var u=s.indexOf("..."),h=s,c="";if(-1!==u&&this.spreadsheet.isHierarchyTreeType()){var d=u+(ms()?1:0);h=o.substr(0,d),c=o.slice(d),c=Cf({text:c,maxWidth:a,fontParam:i})}var p=Ff({x:t+this.getTreeIconWidth(),y:n,width:a,height:r},i).x,f=n+(na(c)?r/2:r/4);this.textShapes.push(hf(this,[this.textShapes[0]],p,f,h,i)),na(c)||this.textShapes.push(hf(this,[this.textShapes[1]],p,n+.75*r,c,i)),this.actualTextWidth=da([gf(h,i),gf(c,i)])}},n.prototype.drawTreeIcon=function(){var e=this;if(this.showTreeIcon()&&this.meta.cornerType===t.CornerNodeType.ROW){var n=this.headerConfig.hierarchyCollapse,r=this.getStyle().icon.size,i=this.getTextStyle(),o=i.textBaseline,a=i.fill,s=this.getContentArea();this.treeIcon=ff(this,{x:s.x,y:kf(s,o,r),width:r,height:r},a,n,(function(){e.headerConfig.spreadsheet.store.set("scrollY",0),e.headerConfig.spreadsheet.emit(t.S2Event.LAYOUT_TREE_ROWS_COLLAPSE_ALL,n)}))}},n.prototype.drawBackgroundShape=function(){var t=this.getStyle().cell.backgroundColorOpacity,e=Es(Es({},this.getCellArea()),{opacity:t});this.backgroundShape=lf(this,e)},n.prototype.drawBorderShape=function(){var t=this.getCellArea(),e=t.x,n=t.y,r=t.width,i=t.height,o=this.getStyle().cell,a=o.horizontalBorderColor,s=o.horizontalBorderWidth,l=o.horizontalBorderColorOpacity,u=o.verticalBorderColor,h=o.verticalBorderWidth,c=o.verticalBorderColorOpacity;cf(this,{x1:e,y1:n,x2:e+r,y2:n},{stroke:a,lineWidth:s,opacity:l}),cf(this,{x1:e+r,y1:n,x2:e+r,y2:n+i},{stroke:u,lineWidth:h,opacity:c})},n.prototype.isLastRowCornerCell=function(){var e=this.meta,n=e.cornerType,r=e.field,i=this.headerConfig.rows;return n===t.CornerNodeType.ROW&&(this.spreadsheet.isHierarchyTreeType()||bo(i)===r)},n.prototype.getResizeAreaEffect=function(){return this.meta.key===I?t.ResizeAreaEffect.Series:this.isLastRowCornerCell()&&this.spreadsheet.isHierarchyTreeType()?t.ResizeAreaEffect.Tree:t.ResizeAreaEffect.Field},n.prototype.drawResizeArea=function(){var e=this.getResizeAreaStyle(),n=Nv(this.spreadsheet,E),r=this.headerConfig,i=r.position,o=r.scrollX,a=r.scrollY,s=r.width,l=r.height,u=this.meta,h=u.x,c=u.y,d=u.width,p=u.height,f=u.field,v=u.cornerType,g={x:h+d-e.size/2,y:c,width:e.size,height:p},y={x:0,y:0,width:s,height:l};if(v!==t.CornerNodeType.Col&&Pv(g,y,{scrollX:o,scrollY:a})){var m=i.x+h-o,C=i.y+(this.isLastRowCornerCell()?0:c);n.addShape("rect",{attrs:Es(Es({},Dv({theme:e,id:f,type:t.ResizeDirectionType.Horizontal,effect:this.getResizeAreaEffect(),offsetX:m,offsetY:C,width:d,height:p})),{x:m+d-e.size/2,y:C,height:this.isLastRowCornerCell()?l:p})})}},n.prototype.showTreeIcon=function(){var t;return this.headerConfig.spreadsheet.isHierarchyTreeType()&&0===(null===(t=this.meta)||void 0===t?void 0:t.x)},n.prototype.getIconPosition=function(){var t,e,n=null===(e=null===(t=this.textShapes)||void 0===t?void 0:t[0])||void 0===e?void 0:e.cfg.attrs,r=this.getTextStyle(),i=r.textBaseline,o=r.textAlign,a=this.getStyle().icon,s=a.size,l=a.margin;return{x:(null==n?void 0:n.x)+("center"===o?this.actualTextWidth/2:this.actualTextWidth)+l.left,y:kf(this.getContentArea(),i,s)}},n.prototype.getTreeIconWidth=function(){var t=this.getStyle().icon,e=t.size,n=t.margin;return this.showTreeIcon()?e+n.right:0},n.prototype.getTextStyle=function(){var e=this.getStyle().bolderText,n=this.meta.cornerType===t.CornerNodeType.ROW?e.textAlign:"right";return Es(Es({},e),{textAlign:n,textBaseline:"middle"})},n.prototype.getFormattedFieldValue=function(){return{formattedValue:this.meta.label,value:this.meta.label}},n.prototype.getMaxTextWidth=function(){return this.getContentArea().width-this.getTreeIconWidth()-this.getActionIconsWidth()},n.prototype.getTextPosition=function(){return{x:0,y:0}},n}(Qv),eg=function(){function t(t){this.EVENT="gesture",this.gm=t}return t.prototype.do=function(t){switch(t.type){case"touchstart":this.onTouchStart(t);break;case"touchmove":this.onTouchMove(t);break;case"touchend":this.onTouchEnd(t);break;case"touchcancel":this.onTouchCancel(t);break;default:return}},t.prototype.emit=function(t){this.gm.emit(this.EVENT,t)},t}(),ng=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.EVENT="pan",e}return Ss(e,t),e.prototype.onTouchCancel=function(t){},e.prototype.onTouchEnd=function(t){},e.prototype.onTouchMove=function(t){var e=t.x,n=t.y,r=e-this.preX,i=n-this.preY;this.preX=e,this.preY=n,this.emit({x:e,y:n,deltaX:r,deltaY:i,event:t})},e.prototype.onTouchStart=function(t){var e=t.x,n=t.y;this.preX=e,this.preY=n},e}(eg),rg="object"==typeof performance&&performance.now?performance:Date,ig=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.EVENT="press",e}return Ss(e,t),e.prototype.onTouchCancel=function(t){this.clearTimeout()},e.prototype.onTouchEnd=function(t){this.clearTimeout()},e.prototype.onTouchMove=function(t){var e=t.x,n=t.y;(e-this.touchStartX>10||n-this.touchStartY>10)&&this.clearTimeout()},e.prototype.onTouchStart=function(t){var e=this;this.clearTimeout();var n=t.x,r=t.y;this.touchStartTime=rg.now(),this.touchStartX=n,this.touchStartY=r,this.pressTimeout=window.setTimeout((function(){e.emit({x:n,y:r,event:t})}),300)},e.prototype.clearTimeout=function(){window.clearTimeout(this.pressTimeout)},e}(eg),og=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.EVENT="swipe",e.latestMoveTime=0,e.ms=0,e.speedX=0,e.speedY=0,e.preX=0,e.preY=0,e}return Ss(e,t),e.prototype.onTouchCancel=function(t){},e.prototype.onTouchEnd=function(t){var e=this.speedX,n=this.speedY;if(rg.now()-this.latestMoveTime<100){var r=t.x,i=t.y;this.emit({x:r,y:i,speedX:e,speedY:n,event:t})}},e.prototype.onTouchMove=function(t){var e=t.x,n=t.y,r=rg.now(),i=e-this.preX,o=n-this.preY,a=r-this.ms;this.speedX=i/a,this.speedY=o/a,this.latestMoveTime=r},e.prototype.onTouchStart=function(t){var e=t.x,n=t.y;this.speedX=this.speedY=0,this.preX=e,this.preY=n,this.ms=rg.now()},e}(eg),ag=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.EVENT="tap",e}return Ss(e,t),e.prototype.onTouchCancel=function(t){},e.prototype.onTouchEnd=function(t){var e=t.x,n=t.y;e-this.touchStartX<2&&n-this.touchStartY<2&&rg.now()-this.touchStartTime<300&&this.emit({x:e,y:n,event:t})},e.prototype.onTouchMove=function(t){},e.prototype.onTouchStart=function(t){var e=t.x,n=t.y;this.touchStartTime=rg.now(),this.touchStartX=e,this.touchStartY=n},e}(eg),sg={Pan:ng,Press:ig,Swipe:og,Tap:ag},lg=function(t){function e(e,n){void 0===n&&(n={});var r=t.call(this)||this;return r.onTouchStart=function(t){r.preventEvent(t),r.element.on("touchmove",r.onTouchMove),r.element.on("touchend",r.onTouchEnd),r.element.on("touchcancel",r.onTouchCancel),r.emit("touchdown",t),r.doGestures(t)},r.onTouchMove=function(t){r.preventEvent(t),r.emit("touchmove",t),r.doGestures(t)},r.onTouchEnd=function(t){r.preventEvent(t),r.emit("touchend",t),r.element.off("touchmove",r.onTouchMove),r.element.off("touchend",r.onTouchEnd),r.element.off("touchcancel",r.onTouchCancel),r.doGestures(t)},r.onTouchCancel=function(t){r.preventEvent(t),r.emit("touchcancel",t),r.element.off("touchmove",r.onTouchMove),r.element.off("touchend",r.onTouchEnd),r.element.off("touchcancel",r.onTouchCancel),r.doGestures(t)},r.element=e,r.options=n,r.initialGestures(),r.bindTouchStart(),r}return Ss(e,t),e.prototype.destroy=function(){this.element.off("touchstart",this.onTouchStart),this.off()},e.prototype.initialGestures=function(){var t=this,e=this.options.gestures||["Pan","Press","Swipe","Tap"];this.gestures=e.map((function(e){return new(0,sg[e])(t)}))},e.prototype.bindTouchStart=function(){this.element.on("touchstart",this.onTouchStart)},e.prototype.preventEvent=function(t){var e=t.type;(this.options.prevents||[]).includes(e)&&t.preventDefault()},e.prototype.doGestures=function(t){this.gestures.forEach((function(e){e.do(t)}))},e}(Ql),ug=nh,hg="wheel",cg=function(t){function e(e){var n=t.call(this)||this;return n.rafMs=0,n.onPan=function(t){var e=t.deltaX,r=t.deltaY,i=n.getWrapperEvent(t,e,r);n.emit(hg,i)},n.onSwipe=function(t){var e=t.speedX,r=t.speedY;n.rafMs=rg.now(),n.ms=n.rafMs,0===e&&0===r||n.rafInertia(t)},n.element=e,n.gm=new lg(e,{gestures:["Pan","Swipe"]}),n.gm.on("swipe",n.onSwipe),n.gm.on("pan",n.onPan),n}return Ss(e,t),e.prototype.destroy=function(){window.cancelAnimationFrame(this.raf),this.gm.destroy(),this.off()},e.prototype.rafInertia=function(t){var e=this,n=t.speedX,r=t.speedY;this.raf=window.requestAnimationFrame((function(){var i=rg.now(),o=(i-e.ms)/800;if(o<1){o=ug(1-o);var a=i-e.rafMs,s=n*o*a,l=r*o*a,u=e.getWrapperEvent(t,s,l);e.emit(hg,u),e.rafMs=i,e.rafInertia(t)}}))},e.prototype.getWrapperEvent=function(t,e,n){return Es(Es({},t),{deltaX:-e,deltaY:-n})},e}(Ql),dg=function(t,e,n,r,i){var o=n+r;return t+i>=o?t:o<t+(e+i)/2?n+r-i:n>t+(e-i)/2?t+e-n>i?n:t+e-i:t+(e-i)/2},pg=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return Ss(n,e),Object.defineProperty(n.prototype,"cellType",{get:function(){return t.CellTypes.ROW_CELL},enumerable:!1,configurable:!0}),n.prototype.destroy=function(){var t;e.prototype.destroy.call(this),null===(t=this.gm)||void 0===t||t.destroy()},n.prototype.initCell=function(){e.prototype.initCell.call(this),this.drawBackgroundShape(),this.drawInteractiveBgShape(),this.drawTreeIcon(),this.drawTextShape(),this.drawRectBorder(),this.drawResizeAreaInLeaf(),this.drawActionIcons(),this.update()},n.prototype.drawBackgroundShape=function(){var t=this.getStyle().cell,e=t.backgroundColor,n=t.backgroundColorOpacity;this.backgroundShape=lf(this,Es(Es({},this.getCellArea()),{fill:e,stroke:"transparent",opacity:n}))},n.prototype.drawInteractiveBgShape=function(){this.stateShapes.set("interactiveBgShape",lf(this,Es(Es({},this.getCellArea()),{fill:"transparent",stroke:"transparent"})))},n.prototype.showTreeIcon=function(){return this.spreadsheet.isHierarchyTreeType()&&!this.meta.isLeaf},n.prototype.drawTreeIcon=function(){var e=this;if(this.showTreeIcon()){var n=this.meta,r=n.isCollapsed,i=n.id,o=n.hierarchy,a=this.getContentArea().x,s=this.getTextStyle().fill,l=this.getStyle().icon.size,u=a+this.getContentIndent(),h=this.getIconYPosition();this.treeIcon=ff(this,{x:u,y:h,width:l,height:l},s,r,(function(){if(!r){var n=e.spreadsheet.store.get("scrollY"),a=e.spreadsheet.facet.panelBBox.height||0,s=(h=e.meta,c=0,null==(d=h.children)||d.forEach((function(t){c+=t.height||0})),c),l=o.height-s;if(n>0&&n+a>l){var u=l-a;e.spreadsheet.store.set("scrollY",u>0?u:0)}}var h,c,d;e.spreadsheet.emit(t.S2Event.ROW_CELL_COLLAPSE_TREE_ROWS,{id:i,isCollapsed:!r,node:e.meta})})),this.gm=new lg(this,{gestures:["Tap"]}),this.gm.on("tap",(function(){e.spreadsheet.emit(t.S2Event.ROW_CELL_COLLAPSE_TREE_ROWS,{id:i,isCollapsed:!r,node:e.meta})}))}},n.prototype.getFormattedValue=function(t){var e=t,n=this.spreadsheet.dataSet.getFieldFormatter(this.meta.field);return n&&(e=n(t)),e},n.prototype.drawTextShape=function(){e.prototype.drawTextShape.call(this),this.drawLinkFieldShape()},n.prototype.drawLinkFieldShape=function(){var t=this.headerConfig.linkFields,n=void 0===t?[]:t,r=this.getTextStyle().linkTextFill;e.prototype.drawLinkFieldShape.call(this,n.includes(this.meta.key),r)},n.prototype.drawRectBorder=function(){var t=this.headerConfig,e=t.position,n=t.width,r=t.viewportWidth,i=t.scrollX,o=this.getStyle().cell,a=o.horizontalBorderColor,s=o.horizontalBorderWidth,l=o.horizontalBorderColorOpacity,u=o.verticalBorderColor,h=o.verticalBorderWidth,c=o.verticalBorderColorOpacity,d=this.getCellArea(),p=d.x,f=d.y,v=d.height,g=d.width,y=this.getContentIndent();cf(this,{x1:p+y,y1:f+v,x2:e.x+n+r+i,y2:f+v},{stroke:a,lineWidth:s,opacity:l}),cf(this,{x1:p+y+g,y1:f,x2:p+y+g,y2:f+v},{stroke:u,lineWidth:h,opacity:c})},n.prototype.drawResizeAreaInLeaf=function(){if(this.meta.isLeaf){var e=this.getCellArea(),n=e.x,r=e.y,i=e.width,o=e.height,a=this.getResizeAreaStyle(),s=Nv(this.spreadsheet,x),l=this.headerConfig,u=l.position,h=l.seriesNumberWidth,c=l.width,d=l.height,p=l.scrollX,f=l.scrollY,v={x:n,y:r+o-a.size/2,width:i,height:a.size};if(Pv(v,{x:0,y:0,width:c,height:d},{scrollX:p,scrollY:f})){var g=u.x+n-p+h,y=u.y+r-f,m=this.spreadsheet.isFrozenRowHeader()?c-h-(n-p):i;s.addShape("rect",{attrs:Es(Es({},Dv({theme:a,type:t.ResizeDirectionType.Vertical,effect:t.ResizeAreaEffect.Cell,offsetX:g,offsetY:y,width:i,height:o})),{x:g,y:y+o-a.size/2,width:m})})}}},n.prototype.getContentIndent=function(){if(!this.spreadsheet.isHierarchyTreeType())return 0;for(var t=this.getStyle().icon,e=t.size+t.margin.right,n=this.meta.parent,r=0;n;)0!==n.height&&(r+=e),n=n.parent;return r},n.prototype.getTextIndent=function(){var t=this.getStyle().icon,e=t.size,n=t.margin;return this.getContentIndent()+(this.showTreeIcon()?e+n.right:0)},n.prototype.getTextStyle=function(){var t=this.meta,e=t.isLeaf,n=t.isTotals,r=this.getStyle(),i=r.text,o=r.bolderText,a=e&&!n?i:o,s=i.textAlign;return Es(Es({},a),{textAlign:s,textBaseline:"top"})},n.prototype.getFormattedFieldValue=function(){var t=this.meta.label,e=t,n=this.spreadsheet.dataSet.getFieldFormatter(this.meta.field);return n&&(e=n(t)),{formattedValue:e,value:t}},n.prototype.getIconPosition=function(){var t=this.textShape.cfg.attrs,e=t.x,n=t.y;return{x:e+("center"===t.textAlign?this.actualTextWidth/2:this.actualTextWidth)+this.getStyle().icon.margin.left,y:n}},n.prototype.getMaxTextWidth=function(){return this.getContentArea().width-this.getTextIndent()-this.getActionIconsWidth()},n.prototype.getTextPosition=function(){var t=this.getContentArea(),e=t.y,n=t.height,r=this.headerConfig,i=r.scrollY,o=r.height,a=this.getTextStyle().fontSize,s=this.getTextIndent(),l=dg(e,n,i,o,a);return{x:Ff(this.getContentArea(),this.getTextStyle()).x+s,y:l}},n.prototype.getIconYPosition=function(){var t=this.getTextPosition().y,e=this.getStyle().icon.size;return t+(this.getTextStyle().fontSize-e)/2},n}(Qv),fg=function(t,e){return e>0&&t<e},vg=function(t,e,n){return e>0&&t>=n-e},gg=function(t,e,n){return n>0&&t<e+n},yg=function(t,e,n){return n>0&&t>=e+1-n},mg=function(t,e,n,r,i,o){var a=Bo(n,(function(e,r){var i=t-(oa(o)?0:o);return i>=e&&i<n[r+1]}),0);a=Math.max(a,0);var s=Bo(n,(function(e,r){var o=i.width+t;return o>=e&&o<n[r+1]}),a);s=Math.min(-1===s?1/0:s,n.length-2);var l=r.getIndexRange(e,i.height+e);return[a,s,l.start,l.end]},Cg=function(t,e,n){var r,i,o=null==t?void 0:t.getMatrix(),a=null!==(r=null==o?void 0:o[6])&&void 0!==r?r:0,s=null!==(i=null==o?void 0:o[7])&&void 0!==i?i:0;null==t||t.translate(e-a,n-s)},wg=function(t,e){var n,r=null==t?void 0:t.getMatrix(),i=null!==(n=null==r?void 0:r[6])&&void 0!==n?n:0;null==t||t.translate(e-i,0)},xg=function(t,e){var n,r=null==t?void 0:t.getMatrix(),i=null!==(n=null==r?void 0:r[7])&&void 0!==n?n:0;null==t||t.translate(0,e-i)},Sg=function(t,e,n){var r,i,o=(null===(r=n.icon.margin)||void 0===r?void 0:r.left)||0,a=(null===(i=n.icon.margin)||void 0===i?void 0:i.right)||0,s=t.store.get("hiddenColumnsDetail",[]),l=!1,u=!1;s.forEach((function(t){var n,r,i,o;(null===(r=null===(n=null==t?void 0:t.displaySiblingNode)||void 0===n?void 0:n.prev)||void 0===r?void 0:r.field)===e&&(l=!0),(null===(o=null===(i=null==t?void 0:t.displaySiblingNode)||void 0===i?void 0:i.next)||void 0===o?void 0:o.field)===e&&(u=!0)}));var h=In(n,"icon.size");return{left:u?h+a:0,right:l?h+o:0}},Eg=function(e,n,r){var i=In(r,"cell.padding"),o=Sg(e,n.field,r);return i.left+i.right+function(t,e,n,r){var i,o,a=In(r,"size"),s=In(r,"margin"),l=0;return(l=t.options.showDefaultHeaderActionIcon?1:(null!==(o=null===(i=No(t.options.headerActionIcons,(function(t){return kv(t,e,n)})))||void 0===i?void 0:i.iconNames)&&void 0!==o?o:[]).length)*(a+s.left)+(l>0?s.right:0)}(e,n,t.CellTypes.COL_CELL,In(r,"icon"))+o.left+o.right},Tg=function(t,e){void 0===e&&(e=[]);var n=t.getInitColumnNodes();return Ai(e.map((function(t){return n.find((function(e){return e.field===t}))})))},bg=function(e,n,r){void 0===n&&(n=[]),void 0===r&&(r=!1);var i=e.store.get("hiddenColumnsDetail",[]),o=e.options.interaction.hiddenColumnFields;if(!ra(n,o)||r){var a=ts(Ls(Ls([],_s(n),!1),_s(o),!1));e.setOptions({interaction:{hiddenColumnFields:a}});var s=function(t,e){void 0===e&&(e=[]);var n=t.getInitColumnNodes(),r=Tg(t,e).map((function(t){return null==t?void 0:t.colIndex})),i=Math.max.apply(Math,Ls([],_s(r),!1)),o=Math.min.apply(Math,Ls([],_s(r),!1)),a=n.find((function(t){return t.colIndex===i+1}));return{prev:n.find((function(t){return t.colIndex===o-1}))||null,next:a||null}}(e,n),l={hideColumnNodes:Tg(e,n),displaySiblingNode:s},u=Ls(Ls([],_s(i),!1),[l],!1);e.emit(t.S2Event.LAYOUT_TABLE_COL_HIDDEN,l,u),e.store.set("hiddenColumnsDetail",u),e.interaction.reset(),e.render(!1)}},_g=function(t,e,n){void 0===e&&(e=[]),void 0===n&&(n=!1),t.store.set("hiddenColumnsDetail",[]);var r=function(t,e){if(na(e))return[];var n=Number.NEGATIVE_INFINITY;return t.reduce((function(t,r,i){if(!e.includes(r))return t;if(i===n+1)bo(t).push(r);else{var o=[r];t.push(o)}return n=i,t}),[])}(t.dataCfg.fields.columns,e);r.forEach((function(e){bg(t,e,n)}))},Lg=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return Ss(n,e),n.prototype.handleRestOptions=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=_s(t,1),r=n[0];this.headerConfig=Es({},r);var i=this.meta.field,o=this.spreadsheet.dataCfg.sortParams,a=No(o,(function(t){return(null==t?void 0:t.sortFieldId)===i})),s=Zv(a,!0);this.headerConfig.sortParam=Es(Es(Es({},this.headerConfig.sortParam),a||{}),{type:s})},n.prototype.isFrozenCell=function(){var t=this.spreadsheet.options,e=t.frozenColCount,n=t.frozenTrailingColCount,r=this.meta.colIndex,i=this.spreadsheet.facet.layoutResult.colLeafNodes;return fg(r,e)||vg(r,n,i.length)},n.prototype.getColResizeArea=function(){return this.isFrozenCell()?Nv(this.spreadsheet,b):e.prototype.getColResizeArea.call(this)},n.prototype.isValueCell=function(){return!0},n.prototype.showSortIcon=function(){return this.spreadsheet.options.showDefaultHeaderActionIcon},n.prototype.getTextStyle=function(){return In(this.getStyle(),"bolderText")},n.prototype.initCell=function(){e.prototype.initCell.call(this),this.addExpandColumnIconShapes()},n.prototype.hasHiddenColumnCell=function(){var t=this,e=this.spreadsheet.options,n=e.interaction.hiddenColumnFields,r=void 0===n?[]:n,i=e.tooltip.operation;return!(na(r)||!i.hiddenColumns)&&!!this.spreadsheet.store.get("hiddenColumnsDetail",[]).find((function(e){var n,r=(null==e?void 0:e.displaySiblingNode)||{},i=r.prev,o=r.next||i;return(null==o?void 0:o.field)===(null===(n=t.meta)||void 0===n?void 0:n.field)}))},n.prototype.getContentArea=function(){var t,e=((null===(t=this.getStyle())||void 0===t?void 0:t.cell)||this.theme.dataCell.cell).padding,n=Es({},e),r=Sg(this.spreadsheet,this.meta.field,this.getStyle());return r.left&&(n.left=(n.left||0)+r.left),r.right&&(n.right=(n.right||0)+r.right),Df(this.getCellArea(),n)},n.prototype.getExpandIconTheme=function(){return this.getStyle().icon},n.prototype.addExpandColumnSplitLine=function(){var t=this.meta,e=t.x,n=t.y,r=t.width,i=t.height,o=this.theme.splitLine,a=o.horizontalBorderColor,s=o.horizontalBorderWidth,l=o.horizontalBorderColorOpacity,u=this.isLastColumn()?e+r-s:e;cf(this,{x1:u,y1:n,x2:u,y2:n+i},{stroke:a,lineWidth:s,strokeOpacity:l})},n.prototype.addExpandColumnIconShapes=function(){this.hasHiddenColumnCell()&&(this.addExpandColumnSplitLine(),this.addExpandColumnIcon())},n.prototype.addExpandColumnIcon=function(){var e=this,n=this.getExpandColumnIconConfig();pf(this,Es(Es({},n),{name:"ExpandColIcon",cursor:"pointer"})).on("click",(function(){e.spreadsheet.emit(t.S2Event.LAYOUT_TABLE_COL_EXPANDED,e.meta)}))},n.prototype.getExpandColumnIconConfig=function(){var t=this.getExpandIconTheme().size,e=this.getCellArea(),n=e.x,r=e.y,i=e.width,o=e.height,a=n-t;return{x:this.isLastColumn()?a+i:a,y:r+o/2-t/2,width:2*t,height:t}},n.prototype.isLastColumn=function(){return t=this.spreadsheet,e=this.meta.field,n=t.getColumnNodes(),r=t.getInitColumnNodes(),bo(n).field===e&&bo(r).field!==e;var t,e,n,r},n.prototype.getHorizontalResizeAreaName=function(){return"".concat(R).concat("table-col-cell")},n}(Jv),Og=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ss(e,t),e.prototype.getStyle=function(t){return t?this.theme[t]:In(this,"theme.cornerCell")},e.prototype.showSortIcon=function(){return!1},e}(Lg),Ig=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ss(e,t),e.prototype.drawTextShape=function(){t.prototype.drawTextShape.call(this),this.drawLinkFieldShape()},e.prototype.drawLinkFieldShape=function(){var e=this.spreadsheet.options.interaction.linkFields,n=void 0===e?[]:e,r=this.theme.rowCell.text.linkTextFill;t.prototype.drawLinkFieldShape.call(this,n.includes(this.meta.valueField),r)},e}(jf),Rg=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return Ss(n,e),Object.defineProperty(n.prototype,"cellType",{get:function(){return t.CellTypes.ROW_CELL},enumerable:!1,configurable:!0}),n.prototype.getTextStyle=function(){return this.theme.rowCell.text},n}(jf),Mg=function(t){this.spreadsheet=t,this.bindEvents()},Ag=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return Ss(n,e),n.prototype.bindEvents=function(){this.bindDataCellClick()},n.prototype.bindDataCellClick=function(){var e=this;this.spreadsheet.on(t.S2Event.DATA_CELL_CLICK,(function(n){n.stopPropagation();var r=e.spreadsheet.interaction;if(!r.hasIntercepts([t.InterceptType.CLICK])){e.emitLinkFieldClickEvent(n);var i=e.spreadsheet.getCell(n.target),o=i.getMeta();o&&(r.addIntercepts([t.InterceptType.HOVER]),r.isSelectedCell(i)?r.reset():(r.clearState(),r.changeState({cells:[av(i)],stateName:t.InteractionStateName.SELECTED}),e.spreadsheet.emit(t.S2Event.GLOBAL_SELECTED,[i]),e.showTooltip(n,o)))}}))},n.prototype.getTooltipOperator=function(e){var n=this;return this.spreadsheet.options.tooltip.operation.trend&&{onClick:function(){n.spreadsheet.emit(t.S2Event.DATA_CELL_TREND_ICON_CLICK,e),n.spreadsheet.hideTooltip()},menus:ps.Trend}},n.prototype.showTooltip=function(t,e){var n=e.data,r=e.isTotals,i=void 0!==r&&r,o=e.value,a=e.fieldValue,s=e.field,l=e.valueField,u=n,h=this.spreadsheet.isTableMode(),c=[(h?Es(Es({},u),{value:o||a,valueField:s||l}):u)||Es(Es({},e.rowQuery),e.colQuery)],d=this.getTooltipOperator(e);this.spreadsheet.showTooltipWithInfo(t,c,{isTotals:i,operator:d,enterable:!0,hideSummary:!0,showSingleTips:h})},n.prototype.emitLinkFieldClickEvent=function(e){var n=In(e.target,"attrs.appendInfo",{});if(n.isRowHeaderText){var r=n.cellData,i=r.valueField,o=r.data;this.spreadsheet.emit(t.S2Event.GLOBAL_LINK_FIELD_JUMP,{key:i,record:o})}},n}(Mg),Bg=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return Ss(n,e),n.prototype.bindEvents=function(){this.bindDataCellClick()},n.prototype.bindDataCellClick=function(){var e=this;this.spreadsheet.on(t.S2Event.MERGED_CELLS_CLICK,(function(n){n.stopPropagation();var r=e.spreadsheet.interaction;r.hasIntercepts([t.InterceptType.CLICK])||r.addIntercepts([t.InterceptType.HOVER])}))},n}(Mg),Dg=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.isMultiSelection=!1,n.handleRowColClick=function(e,r){void 0===r&&(r=!1),e.stopPropagation();var i=n.spreadsheet.interaction,o=i.getState(),a=n.spreadsheet.getCell(e.target),s=null==a?void 0:a.getMeta();if(i.isSelectedCell(a))i.reset();else if(!oa(s.x)){i.addIntercepts([t.InterceptType.HOVER]);var l=r?Os.getAllLeavesOfNode(s).filter((function(t){return t.rowIndex===s.rowIndex})):Os.getAllChildrenNode(s),u=[av(a)];n.isMultiSelection&&i.isSelectedState()&&(u=na(null==o?void 0:o.cells)?u:Bi(null==o?void 0:o.cells,u),l=na(null==o?void 0:o.nodes)?l:Bi(null==o?void 0:o.nodes,l)),i.changeState({cells:u,nodes:l,stateName:t.InteractionStateName.SELECTED});var h=u.map((function(t){return t.id}));i.updateCells(i.getRowColActiveCells(h)),r||l.forEach((function(e){var n;null===(n=null==e?void 0:e.belongsCell)||void 0===n||n.updateByState(t.InteractionStateName.SELECTED,e.belongsCell)})),n.spreadsheet.emit(t.S2Event.GLOBAL_SELECTED,i.getActiveCells()),n.showTooltip(e)}},n}return Ss(n,e),n.prototype.bindEvents=function(){this.bindKeyboardDown(),this.bindKeyboardUp(),this.bindColCellClick(),this.bindRowCellClick(),this.bindTableColExpand()},n.prototype.bindKeyboardDown=function(){var e=this;this.spreadsheet.on(t.S2Event.GLOBAL_KEYBOARD_DOWN,(function(n){n.key===t.InteractionKeyboardKey.META&&(e.isMultiSelection=!0)}))},n.prototype.bindKeyboardUp=function(){var e=this;this.spreadsheet.on(t.S2Event.GLOBAL_KEYBOARD_UP,(function(n){n.key===t.InteractionKeyboardKey.META&&(e.isMultiSelection=!1,e.spreadsheet.interaction.removeIntercepts([t.InterceptType.CLICK]))}))},n.prototype.bindRowCellClick=function(){var e=this;this.spreadsheet.on(t.S2Event.ROW_CELL_CLICK,(function(t){e.handleRowColClick(t,e.spreadsheet.isHierarchyTreeType())}))},n.prototype.bindColCellClick=function(){var e=this;this.spreadsheet.on(t.S2Event.COL_CELL_CLICK,(function(t){e.handleRowColClick(t)}))},n.prototype.showTooltip=function(t){var e=this,n=Bv(this.spreadsheet,t),r=n.operation;if(n.showTooltip){var i=this.spreadsheet.interaction,o=i.isSelectedState()?Rv(i.getActiveCells()):[],a=this.spreadsheet.isTableMode()&&r.hiddenColumns&&{onClick:function(){e.hideSelectedColumns()},menus:ps.HiddenColumns};this.spreadsheet.showTooltipWithInfo(t,o,{showSingleTips:!0,operator:a})}},n.prototype.bindTableColExpand=function(){var e=this;this.spreadsheet.on(t.S2Event.LAYOUT_TABLE_COL_EXPANDED,(function(t){e.handleExpandIconClick(t)}))},n.prototype.hideSelectedColumns=function(){var t=this.spreadsheet,e=t.interaction,n=t.options,r=e.getActiveCells().map((function(t){return t.getMeta().field})),i=Ls(Ls([],_s(n.interaction.hiddenColumnFields),!1),_s(r),!1);_g(this.spreadsheet,i,!0)},n.prototype.handleExpandIconClick=function(t){var e=this.spreadsheet.options.interaction.hiddenColumnFields,n=this.spreadsheet.store.get("hiddenColumnsDetail",[]),r=(n.find((function(e){var n,r=e.displaySiblingNode;return(null===(n=null==r?void 0:r.next)||void 0===n?void 0:n.field)===t.field}))||{}).hideColumnNodes,i=(void 0===r?[]:r).map((function(t){return t.field}));this.spreadsheet.setOptions({interaction:{hiddenColumnFields:To(e,i)}}),this.spreadsheet.store.set("hiddenColumnsDetail",n.filter((function(e){var n,r=e.displaySiblingNode;return(null===(n=null==r?void 0:r.next)||void 0===n?void 0:n.field)!==t.field}))),this.spreadsheet.interaction.reset(),this.spreadsheet.render(!1)},n}(Mg),Ng=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.getRowData=function(e){for(var n=e,r={};n.parent;)r[n.key]=n.value,n=n.parent;var i=t.getRowIndex(e),o=t.getOriginalRowData(e,i);return Es(Es(Es({},o),r),{rowIndex:i})},t.getOriginalRowData=function(e,n){var r,i=t.spreadsheet.options,o=(null===(r=null==i?void 0:i.totals)||void 0===r?void 0:r.row)||{},a=o.showGrandTotals,s=o.showSubTotals,l=o.reverseLayout,u=o.reverseSubLayout,h=a&&l?1:0,c=s&&u?1:0,d=Math.max(0,n-h-c);return No(t.spreadsheet.dataCfg.data,(function(t,n){return t[e.key]===e.value&&n===d}))},t.getRowIndex=function(e){var n,r;if("tree"===t.spreadsheet.options.hierarchyType){for(var i=e;!na(i.children);)i=Po(i.children);return null!==(n=e.rowIndex)&&void 0!==n?n:i.rowIndex}var o=Math.floor(e.y/e.height);return null!==(r=e.rowIndex)&&void 0!==r?r:o},t}return Ss(n,e),n.prototype.bindEvents=function(){this.bindRowCellClick()},n.prototype.bindRowCellClick=function(){var e=this;this.spreadsheet.on(t.S2Event.ROW_CELL_CLICK,(function(n){if(!e.spreadsheet.interaction.hasIntercepts([t.InterceptType.CLICK])){var r=In(n.target,"attrs.appendInfo",{});if(r.isRowHeaderText){var i=r.cellData,o=i.key,a=e.getRowData(i);e.spreadsheet.emit(t.S2Event.GLOBAL_LINK_FIELD_JUMP,{key:o,record:a})}}}))},n}(Mg),Pg=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return Ss(n,e),n.prototype.bindEvents=function(){this.bindDataCellHover(),this.bindRowCellHover(),this.bindColCellHover()},n.prototype.updateRowColCells=function(e){var n=e.rowId,r=e.colId,i=this.spreadsheet.interaction;r&&_o(Bf(r,i.getAllColHeaderCells()),(function(e){e.updateByState(t.InteractionStateName.HOVER)}));n&&_o(Bf(n,i.getAllRowHeaderCells(),this.spreadsheet.isHierarchyTreeType()),(function(e){e.updateByState(t.InteractionStateName.HOVER)}))},n.prototype.changeStateToHoverFocus=function(e,n,r){var i=this,o=this.spreadsheet.interaction;o.clearHoverTimer();var a=setTimeout((function(){o.changeState({cells:[av(e)],stateName:t.InteractionStateName.HOVER_FOCUS});var a=i.spreadsheet.isTableMode(),s={isTotals:r.isTotals,enterable:!0,hideSummary:!0,showSingleTips:a},l=i.getCellInfo(r,a);i.spreadsheet.showTooltipWithInfo(n,l,s)}),800);o.setHoverTimer(a)},n.prototype.handleHeaderHover=function(e){var n=this.spreadsheet.getCell(e.target);if(!na(n)){var r=this.spreadsheet.interaction,i=r.getActiveCells();if(r.clearHoverTimer(),!ra(null==i?void 0:i[0],n)){var o=n.getMeta();if(r.changeState({cells:[av(n)],stateName:t.InteractionStateName.HOVER}),n.update(),n.getActualText()!==o.value){var a={isTotals:o.isTotals,enterable:!0,hideSummary:!0,showSingleTips:true},s=this.getCellInfo(o,true);this.spreadsheet.showTooltipWithInfo(e,s,a)}}}},n.prototype.getCellInfo=function(t,e){void 0===t&&(t={});var n=t.data,r=t.query,i=t.value,o=t.field,a=t.fieldValue,s=t.valueField,l=t.rowQuery,u=t.colQuery,h=n;return e?[Es(Es({},r),{value:i||a,valueField:o||s})]:[h||Es(Es({},l),u)]},n.prototype.bindDataCellHover=function(){var e=this;this.spreadsheet.on(t.S2Event.DATA_CELL_HOVER,(function(n){var r=e.spreadsheet.getCell(n.target);if(!na(r)){var i=e.spreadsheet.interaction,o=null==r?void 0:r.getMeta();i.changeState({cells:[av(r)],stateName:t.InteractionStateName.HOVER}),e.spreadsheet.options.interaction.hoverHighlight&&(e.updateRowColCells(o),e.changeStateToHoverFocus(r,n,o))}}))},n.prototype.bindRowCellHover=function(){var e=this;this.spreadsheet.on(t.S2Event.ROW_CELL_HOVER,(function(t){e.handleHeaderHover(t)}))},n.prototype.bindColCellHover=function(){var e=this;this.spreadsheet.on(t.S2Event.COL_CELL_HOVER,(function(t){e.handleHeaderHover(t)}))},n}(Mg),kg=function(){function e(e){var n=this;this.canvasEventHandlers=[],this.domEventListeners=[],this.onCanvasMousedown=function(e){if(n.target=e.target,n.spreadsheet.interaction.clearHoverTimer(),n.isResizeArea(e))n.spreadsheet.emit(t.S2Event.LAYOUT_RESIZE_MOUSE_DOWN,e);else switch(n.spreadsheet.getCellType(e.target)){case t.CellTypes.DATA_CELL:n.spreadsheet.emit(t.S2Event.DATA_CELL_MOUSE_DOWN,e);break;case t.CellTypes.ROW_CELL:n.spreadsheet.emit(t.S2Event.ROW_CELL_MOUSE_DOWN,e);break;case t.CellTypes.COL_CELL:n.spreadsheet.emit(t.S2Event.COL_CELL_MOUSE_DOWN,e);break;case t.CellTypes.CORNER_CELL:n.spreadsheet.emit(t.S2Event.CORNER_CELL_MOUSE_DOWN,e);break;case t.CellTypes.MERGED_CELL:n.spreadsheet.emit(t.S2Event.MERGED_CELLS_MOUSE_DOWN,e)}},this.onCanvasMousemove=function(e){if(n.isResizeArea(e))return n.activeResizeArea(e),void n.spreadsheet.emit(t.S2Event.LAYOUT_RESIZE_MOUSE_MOVE,e);n.resetResizeArea();var r=n.spreadsheet.getCell(e.target);if(r){var i=r.cellType;switch(i){case t.CellTypes.DATA_CELL:n.spreadsheet.emit(t.S2Event.DATA_CELL_MOUSE_MOVE,e);break;case t.CellTypes.ROW_CELL:n.spreadsheet.emit(t.S2Event.ROW_CELL_MOUSE_MOVE,e);break;case t.CellTypes.COL_CELL:n.spreadsheet.emit(t.S2Event.COL_CELL_MOUSE_MOVE,e);break;case t.CellTypes.CORNER_CELL:n.spreadsheet.emit(t.S2Event.CORNER_CELL_MOUSE_MOVE,e);break;case t.CellTypes.MERGED_CELL:n.spreadsheet.emit(t.S2Event.MERGED_CELLS_MOUSE_MOVE,e)}if(!n.spreadsheet.interaction.hasIntercepts([t.InterceptType.HOVER,t.InterceptType.BRUSH_SELECTION]))switch(n.spreadsheet.emit(t.S2Event.GLOBAL_HOVER,e),i){case t.CellTypes.DATA_CELL:n.spreadsheet.emit(t.S2Event.DATA_CELL_HOVER,e);break;case t.CellTypes.ROW_CELL:n.spreadsheet.emit(t.S2Event.ROW_CELL_HOVER,e);break;case t.CellTypes.COL_CELL:n.spreadsheet.emit(t.S2Event.COL_CELL_HOVER,e);break;case t.CellTypes.CORNER_CELL:n.spreadsheet.emit(t.S2Event.CORNER_CELL_HOVER,e);break;case t.CellTypes.MERGED_CELL:n.spreadsheet.emit(t.S2Event.MERGED_CELLS_HOVER,e)}}},this.onCanvasMouseup=function(e){if(n.isResizeArea(e))n.spreadsheet.emit(t.S2Event.LAYOUT_RESIZE_MOUSE_UP,e);else{n.spreadsheet.on(t.S2Event.GLOBAL_ACTION_ICON_CLICK,(function(){n.spreadsheet.interaction.addIntercepts([t.InterceptType.HOVER]),n.spreadsheet.interaction.clearState()}));var r=n.spreadsheet.getCell(e.target);if(r){var i=r.cellType;if(n.target===e.target)switch(i){case t.CellTypes.DATA_CELL:n.spreadsheet.emit(t.S2Event.DATA_CELL_CLICK,e);break;case t.CellTypes.ROW_CELL:if(n.getTargetType()===D)break;n.spreadsheet.emit(t.S2Event.ROW_CELL_CLICK,e);break;case t.CellTypes.COL_CELL:if(n.getTargetType()===D)break;n.spreadsheet.emit(t.S2Event.COL_CELL_CLICK,e);break;case t.CellTypes.CORNER_CELL:if(n.getTargetType()===D)break;n.spreadsheet.emit(t.S2Event.CORNER_CELL_CLICK,e);break;case t.CellTypes.MERGED_CELL:n.spreadsheet.emit(t.S2Event.MERGED_CELLS_CLICK,e)}switch(i){case t.CellTypes.DATA_CELL:n.spreadsheet.emit(t.S2Event.DATA_CELL_MOUSE_UP,e);break;case t.CellTypes.ROW_CELL:n.spreadsheet.emit(t.S2Event.ROW_CELL_MOUSE_UP,e);break;case t.CellTypes.COL_CELL:n.spreadsheet.emit(t.S2Event.COL_CELL_MOUSE_UP,e);break;case t.CellTypes.CORNER_CELL:n.spreadsheet.emit(t.S2Event.CORNER_CELL_MOUSE_UP,e);break;case t.CellTypes.MERGED_CELL:n.spreadsheet.emit(t.S2Event.MERGED_CELLS_MOUSE_UP,e)}}}},this.onCanvasDoubleClick=function(e){var r=n.spreadsheet;if(n.isResizeArea(e))r.emit(t.S2Event.LAYOUT_RESIZE_MOUSE_UP,e);else{var i=r.getCell(e.target);if(i){var o=i.cellType;if(n.target===e.target)switch(o){case t.CellTypes.DATA_CELL:r.emit(t.S2Event.DATA_CELL_DOUBLE_CLICK,e);break;case t.CellTypes.ROW_CELL:r.emit(t.S2Event.ROW_CELL_DOUBLE_CLICK,e);break;case t.CellTypes.COL_CELL:r.emit(t.S2Event.COL_CELL_DOUBLE_CLICK,e);break;case t.CellTypes.CORNER_CELL:r.emit(t.S2Event.CORNER_CELL_DOUBLE_CLICK,e);break;case t.CellTypes.MERGED_CELL:r.emit(t.S2Event.MERGED_CELLS_DOUBLE_CLICK,e)}}}},this.onCanvasMouseout=function(){if(n.isAutoResetSheetStyle){var e=n.spreadsheet.interaction;e.isSelectedState()||e.hasIntercepts([t.InterceptType.HOVER])||e.reset()}},this.onCanvasContextMenu=function(e){var r=n.spreadsheet;n.isResizeArea(e)?r.emit(t.S2Event.LAYOUT_RESIZE_MOUSE_UP,e):r.emit(t.S2Event.GLOBAL_CONTEXT_MENU,e)},this.spreadsheet=e,this.bindEvents()}return Object.defineProperty(e.prototype,"canvasContainer",{get:function(){return this.spreadsheet.container},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isAutoResetSheetStyle",{get:function(){return this.spreadsheet.options.interaction.autoResetSheetStyle},enumerable:!1,configurable:!0}),e.prototype.bindEvents=function(){var e=this;this.clearAllEvents(),this.addCanvasEvent(t.OriginEventType.MOUSE_DOWN,this.onCanvasMousedown),this.addCanvasEvent(t.OriginEventType.MOUSE_MOVE,this.onCanvasMousemove),this.addCanvasEvent(t.OriginEventType.MOUSE_OUT,this.onCanvasMouseout),this.addCanvasEvent(t.OriginEventType.MOUSE_UP,this.onCanvasMouseup),this.addCanvasEvent(t.OriginEventType.DOUBLE_CLICK,this.onCanvasDoubleClick),this.addCanvasEvent(t.OriginEventType.CONTEXT_MENU,this.onCanvasContextMenu),this.addDomEventListener(document,t.OriginEventType.CLICK,(function(t){e.resetSheetStyle(t)})),this.addDomEventListener(window,t.OriginEventType.KEY_DOWN,(function(n){e.onKeyboardCopy(n),e.onKeyboardEsc(n),e.spreadsheet.emit(t.S2Event.GLOBAL_KEYBOARD_DOWN,n)})),this.addDomEventListener(window,t.OriginEventType.KEY_UP,(function(n){e.spreadsheet.emit(t.S2Event.GLOBAL_KEYBOARD_UP,n)})),this.addDomEventListener(window,t.OriginEventType.MOUSE_UP,(function(n){e.spreadsheet.emit(t.S2Event.GLOBAL_MOUSE_UP,n)}))},e.prototype.getTargetType=function(){return In(this,"target.cfg.type")},e.prototype.onKeyboardCopy=function(e){if(this.spreadsheet.options.interaction.enableCopy&&Of(e.key,t.InteractionKeyboardKey.COPY)&&(e.metaKey||e.ctrlKey)){var n=Mf(this.spreadsheet);oa(n)||this.spreadsheet.emit(t.S2Event.GLOBAL_COPIED,n)}},e.prototype.onKeyboardEsc=function(e){Of(e.key,t.InteractionKeyboardKey.ESC)&&this.resetSheetStyle(e)},e.prototype.resetSheetStyle=function(e){if(this.isAutoResetSheetStyle){var n=this.spreadsheet.interaction;n.hasIntercepts([t.InterceptType.BRUSH_SELECTION])?n.removeIntercepts([t.InterceptType.BRUSH_SELECTION]):this.isMouseOnTheTooltip(e)||this.isMouseOnTheCanvasContainer(e)||(this.spreadsheet.emit(t.S2Event.GLOBAL_RESET,e),n.reset())}},e.prototype.isMouseOnTheCanvasContainer=function(t){if(t instanceof MouseEvent){var e=this.spreadsheet.container.get("el"),n=e.getBoundingClientRect()||{},r=n.x,i=n.y,o=this.getContainerRect(),a=o.width,s=o.height;return e.contains(t.target)&&t.clientX<=r+a&&t.clientY<=i+s}return!1},e.prototype.getContainerRect=function(){var t=this.spreadsheet.facet.panelBBox,e=t.maxX,n=t.maxY,r=this.spreadsheet.options,i=r.width,o=r.height;return{width:Math.min(i,e),height:Math.min(o,n)}},e.prototype.isMouseOnTheTooltip=function(t){var e,n,r;if(!Bv(this.spreadsheet,t).showTooltip)return!1;var i=(null===(r=null===(n=null===(e=this.spreadsheet.tooltip)||void 0===e?void 0:e.container)||void 0===n?void 0:n.getBoundingClientRect)||void 0===r?void 0:r.call(n))||{},o=i.x,a=i.y,s=i.width,l=i.height;return t instanceof MouseEvent&&(t.clientX>=o&&t.clientX<=o+s&&t.clientY>=a&&t.clientY<=a+l)},e.prototype.isResizeArea=function(t){var e=In(t.target,"attrs.appendInfo");return null==e?void 0:e.isResizeArea},e.prototype.activeResizeArea=function(t){this.resetResizeArea();var e=t.target;this.spreadsheet.store.set("activeResizeArea",e),e.attr(K.backgroundOpacity,this.spreadsheet.theme.resizeArea.interactionState.hover.backgroundOpacity)},e.prototype.resetResizeArea=function(){var t=this.spreadsheet.store.get("activeResizeArea");na(t)||t.attr(K.backgroundOpacity,this.spreadsheet.theme.resizeArea.backgroundOpacity),this.spreadsheet.store.set("activeResizeArea",t)},e.prototype.clear=function(){this.unbindEvents()},e.prototype.unbindEvents=function(){this.clearAllEvents()},e.prototype.addCanvasEvent=function(t,e){var n;null===(n=this.canvasContainer)||void 0===n||n.on(t,e),this.canvasEventHandlers.push({type:t,handler:e})},e.prototype.addDomEventListener=function(t,e,n){t.addEventListener?(t.addEventListener(e,n),this.domEventListeners.push({target:t,type:e,handler:n})):console.error("Please make sure ".concat(t," has addEventListener function"))},e.prototype.clearAllEvents=function(){var t=this;_o(this.canvasEventHandlers,(function(e){var n,r=e.type,i=e.handler;null===(n=t.canvasContainer)||void 0===n||n.off(r,i)})),_o(this.domEventListeners,(function(t){t.target.removeEventListener(t.type,t.handler)})),this.canvasEventHandlers=[],this.domEventListeners=[]},e}(),zg=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.isShiftMultiSelection=!1,n.handleRowColClick=function(e){e.stopPropagation();var r=n.spreadsheet.interaction,i=n.spreadsheet.getCell(e.target),o=null==i?void 0:i.getMeta();if(!oa(null==o?void 0:o.x)){r.addIntercepts([t.InterceptType.HOVER]);var a=[av(i)],s=n.spreadsheet.store.get("lastClickedCell");if(n.isShiftMultiSelection&&s&&s.cellType===i.cellType&&s.getMeta().level===i.getMeta().level){var l=_s([n.spreadsheet.facet.layoutResult.rowsHierarchy.maxLevel,n.spreadsheet.facet.layoutResult.colsHierarchy.maxLevel],2),u=l[0],h=l[1],c=n.getShiftSelectRange(s.getMeta(),i.getMeta()),d=c.start,p=c.end;i instanceof jf?a=n.handleSeriesNumberRowSelected(d.rowIndex,p.rowIndex,i):i.cellType===t.CellTypes.ROW_CELL&&i.getMeta().level===u?a=n.handleRowSelected(d.rowIndex,p.rowIndex,i):i.cellType===t.CellTypes.COL_CELL&&i.getMeta().level===h&&(a=n.handleColSelected(d.colIndex,p.colIndex,i)),r.changeState({cells:a,stateName:t.InteractionStateName.SELECTED})}else n.spreadsheet.store.set("lastClickedCell",i);var f=a.map((function(t){return t.id}));r.updateCells(r.getRowColActiveCells(f)),n.spreadsheet.emit(t.S2Event.GLOBAL_SELECTED,r.getActiveCells())}},n}return Ss(n,e),n.prototype.bindEvents=function(){this.bindKeyboardDown(),this.bindDataCellClick(),this.bindRowColCellClick(),this.bindKeyboardUp()},n.prototype.bindKeyboardDown=function(){var e=this;this.spreadsheet.on(t.S2Event.GLOBAL_KEYBOARD_DOWN,(function(n){n.key===t.InteractionKeyboardKey.SHIFT&&(e.isShiftMultiSelection=!0,e.spreadsheet.interaction.addIntercepts([t.InterceptType.CLICK]))}))},n.prototype.bindKeyboardUp=function(){var e=this;this.spreadsheet.on(t.S2Event.GLOBAL_KEYBOARD_UP,(function(n){n.key===t.InteractionKeyboardKey.SHIFT&&(e.isShiftMultiSelection=!1,e.spreadsheet.interaction.removeIntercepts([t.InterceptType.CLICK]))}))},n.prototype.bindRowColCellClick=function(){var e=this;this.spreadsheet.on(t.S2Event.ROW_CELL_CLICK,(function(t){e.handleRowColClick(t)})),this.spreadsheet.on(t.S2Event.COL_CELL_CLICK,(function(t){e.handleRowColClick(t)}))},n.prototype.getShiftSelectRange=function(t,e){var n=Math.min(t.rowIndex,e.rowIndex),r=Math.max(t.rowIndex,e.rowIndex);return{start:{rowIndex:n,colIndex:Math.min(t.colIndex,e.colIndex)},end:{rowIndex:r,colIndex:Math.max(t.colIndex,e.colIndex)}}},n.prototype.bindDataCellClick=function(){var e=this;this.spreadsheet.on(t.S2Event.DATA_CELL_CLICK,(function(n){n.stopPropagation();var r=e.spreadsheet.getCell(n.target),i=r.getMeta(),o=e.spreadsheet.interaction;if(i){var a=e.spreadsheet.store.get("lastClickedCell");if(e.isShiftMultiSelection&&(null==a?void 0:a.cellType)===r.cellType){var s=e.getShiftSelectRange(a.getMeta(),r.getMeta()),l=s.start,u=s.end,h=Ua(l.colIndex,u.colIndex+1).flatMap((function(t){var n=e.spreadsheet.facet.layoutResult.colLeafNodes[t].id;return Ua(l.rowIndex,u.rowIndex+1).map((function(i){return{id:(e.spreadsheet.facet.getSeriesNumberWidth()?String(i):e.spreadsheet.facet.layoutResult.rowLeafNodes[i].id)+"-"+n,colIndex:t,rowIndex:i,type:r.cellType}}))}));o.addIntercepts([t.InterceptType.CLICK,t.InterceptType.HOVER]),e.spreadsheet.hideTooltip(),o.changeState({cells:h,stateName:t.InteractionStateName.SELECTED})}else e.spreadsheet.store.set("lastClickedCell",r)}}))},n.prototype.handleSeriesNumberRowSelected=function(t,e,n){var r=this.spreadsheet.facet.layoutResult.colLeafNodes[0].id;return Ua(t,e+1).map((function(t){return{id:String(t)+"-"+r,colIndex:0,rowIndex:t,type:n.cellType}}))},n.prototype.handleRowSelected=function(t,e,n){return this.spreadsheet.facet.layoutResult.rowNodes.filter((function(n){return Vo(n.rowIndex,t,e+1)})).map((function(t){return{id:t.id,colIndex:t.colIndex,rowIndex:t.rowIndex,type:n.cellType}}))},n.prototype.handleColSelected=function(t,e,n){return this.spreadsheet.facet.layoutResult.colLeafNodes.filter((function(n){return Vo(n.colIndex,t,e+1)})).map((function(t){return{id:t.id,colIndex:t.colIndex,rowIndex:t.rowIndex,type:n.cellType}}))},n}(Mg),Fg=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.displayedDataCells=[],n.brushRangeDataCells=[],n.brushSelectionStage=t.InteractionBrushSelectionStage.UN_DRAGGED,n.brushSelectionMinimumMoveDistance=5,n.showPrepareSelectedCells=function(){var e=n.getBrushRangeDataCells();n.spreadsheet.interaction.changeState({cells:e.map((function(t){return av(t)})),stateName:t.InteractionStateName.PREPARE_SELECT,force:!0}),n.brushRangeDataCells=e},n}return Ss(n,e),n.prototype.bindEvents=function(){this.bindMouseDown(),this.bindMouseMove(),this.bindMouseUp()},n.prototype.getPrepareSelectMaskTheme=function(){var t;return null===(t=this.spreadsheet.theme)||void 0===t?void 0:t.prepareSelectMask},n.prototype.initPrepareSelectMaskShape=function(){var t=this.spreadsheet.foregroundGroup;if(t){t.removeChild(this.prepareSelectMaskShape);var e=this.getPrepareSelectMaskTheme();this.prepareSelectMaskShape=t.addShape("rect",{visible:!1,attrs:{width:0,height:0,x:0,y:0,fill:null==e?void 0:e.backgroundColor,fillOpacity:null==e?void 0:e.backgroundOpacity,zIndex:5},capture:!1})}},n.prototype.setBrushSelectionStage=function(t){this.brushSelectionStage=t},n.prototype.bindMouseDown=function(){var e=this;this.spreadsheet.on(t.S2Event.DATA_CELL_MOUSE_DOWN,(function(n){n.preventDefault(),e.spreadsheet.interaction.hasIntercepts([t.InterceptType.CLICK])||(e.setBrushSelectionStage(t.InteractionBrushSelectionStage.CLICK),e.initPrepareSelectMaskShape(),e.setDisplayedDataCells(),e.startBrushPoint=e.getBrushPoint(n))}))},n.prototype.bindMouseMove=function(){var e=this;this.spreadsheet.on(t.S2Event.DATA_CELL_MOUSE_MOVE,(function(n){if(n.preventDefault(),e.brushSelectionStage!==t.InteractionBrushSelectionStage.UN_DRAGGED){var r=e.spreadsheet.interaction;e.setBrushSelectionStage(t.InteractionBrushSelectionStage.DRAGGED),e.endBrushPoint=e.getBrushPoint(n),r.addIntercepts([t.InterceptType.HOVER]),r.clearStyleIndependent(),e.updatePrepareSelectMask(),e.showPrepareSelectedCells()}}))},n.prototype.bindMouseUp=function(){var e=this;this.spreadsheet.on(t.S2Event.GLOBAL_MOUSE_UP,(function(n){n.preventDefault(),e.isValidBrushSelection()&&(e.spreadsheet.interaction.addIntercepts([t.InterceptType.BRUSH_SELECTION]),e.updateSelectedCells(),e.spreadsheet.showTooltipWithInfo(n,Mv(e.spreadsheet))),e.hidePrepareSelectMaskShape(),e.setBrushSelectionStage(t.InteractionBrushSelectionStage.UN_DRAGGED)}))},n.prototype.isValidBrushSelection=function(){if(this.brushSelectionStage!==t.InteractionBrushSelectionStage.DRAGGED)return!1;var e=this.getBrushRange(),n=e.start,r=e.end;return r.x-n.x>this.brushSelectionMinimumMoveDistance||r.y-n.y>this.brushSelectionMinimumMoveDistance},n.prototype.setDisplayedDataCells=function(){this.displayedDataCells=this.spreadsheet.interaction.getPanelGroupAllDataCells()},n.prototype.updatePrepareSelectMask=function(){var t=this.getBrushRange();this.prepareSelectMaskShape.attr({x:t.start.x,y:t.start.y,width:t.width,height:t.height}),this.prepareSelectMaskShape.show()},n.prototype.hidePrepareSelectMaskShape=function(){var t;null===(t=this.prepareSelectMaskShape)||void 0===t||t.hide()},n.prototype.getBrushPoint=function(t){var e=t.originalEvent,n={x:e.layerX,y:e.layerY},r=this.spreadsheet.getCell(t.target).getMeta(),i=r.colIndex,o=r.rowIndex;return Es(Es({},n),{rowIndex:o,colIndex:i})},n.prototype.getBrushRange=function(){var t=Math.min(this.startBrushPoint.rowIndex,this.endBrushPoint.rowIndex),e=Math.max(this.startBrushPoint.rowIndex,this.endBrushPoint.rowIndex),n=Math.min(this.startBrushPoint.colIndex,this.endBrushPoint.colIndex),r=Math.max(this.startBrushPoint.colIndex,this.endBrushPoint.colIndex),i=Math.min(this.startBrushPoint.x,this.endBrushPoint.x),o=Math.max(this.startBrushPoint.x,this.endBrushPoint.x),a=Math.min(this.startBrushPoint.y,this.endBrushPoint.y),s=Math.max(this.startBrushPoint.y,this.endBrushPoint.y);return{start:{rowIndex:t,colIndex:n,x:i,y:a},end:{rowIndex:e,colIndex:r,x:o,y:s},width:o-i,height:s-a}},n.prototype.isInBrushRange=function(t){var e=this.getBrushRange(),n=e.start,r=e.end,i=t.rowIndex,o=t.colIndex;return i>=n.rowIndex&&i<=r.rowIndex&&o>=n.colIndex&&o<=r.colIndex},n.prototype.getBrushRangeDataCells=function(){var t=this;return this.displayedDataCells.filter((function(e){var n=e.getMeta();return t.isInBrushRange(n)}))},n.prototype.updateSelectedCells=function(){var e=this.spreadsheet.interaction;e.changeState({cells:this.brushRangeDataCells.map((function(t){return av(t)})),stateName:t.InteractionStateName.SELECTED}),this.spreadsheet.emit(t.S2Event.DATE_CELL_BRUSH_SELECTION,this.brushRangeDataCells),this.spreadsheet.emit(t.S2Event.GLOBAL_SELECTED,this.brushRangeDataCells),na(this.brushRangeDataCells)&&e.removeIntercepts([t.InterceptType.HOVER])},n}(Mg),Hg=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.isMultiSelection=!1,t}return Ss(n,e),n.prototype.bindEvents=function(){this.bindKeyboardDown(),this.bindDataCellClick(),this.bindKeyboardUp()},n.prototype.bindKeyboardDown=function(){var e=this;this.spreadsheet.on(t.S2Event.GLOBAL_KEYBOARD_DOWN,(function(n){n.key===t.InteractionKeyboardKey.META&&(e.isMultiSelection=!0,e.spreadsheet.interaction.addIntercepts([t.InterceptType.CLICK]))}))},n.prototype.bindKeyboardUp=function(){var e=this;this.spreadsheet.on(t.S2Event.GLOBAL_KEYBOARD_UP,(function(n){n.key===t.InteractionKeyboardKey.META&&(e.isMultiSelection=!1,e.spreadsheet.interaction.removeIntercepts([t.InterceptType.CLICK]))}))},n.prototype.getSelectedCells=function(e){var n=e.getMeta().id,r=this.spreadsheet.interaction,i=r.getCells();return r.getCurrentStateName()!==t.InteractionStateName.SELECTED&&(i=[]),i.find((function(t){return t.id===n}))?i.filter((function(t){return t.id!==n})):Ls(Ls([],_s(i),!1),[av(e)],!1)},n.prototype.bindDataCellClick=function(){var e=this;this.spreadsheet.on(t.S2Event.DATA_CELL_CLICK,(function(n){n.stopPropagation();var r=e.spreadsheet.getCell(n.target),i=r.getMeta(),o=e.spreadsheet.interaction;if(e.isMultiSelection&&i){var a=e.getSelectedCells(r);if(na(a))return o.clearState(),void e.spreadsheet.hideTooltip();o.addIntercepts([t.InterceptType.CLICK,t.InterceptType.HOVER]),e.spreadsheet.hideTooltip(),o.changeState({cells:a,stateName:t.InteractionStateName.SELECTED}),e.spreadsheet.showTooltipWithInfo(n,Mv(e.spreadsheet))}}))},n}(Mg),Gg=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.resizeStartPosition={},n.resizeMouseMove=function(e){var r;if(null===(r=n.resizeReferenceGroup)||void 0===r?void 0:r.get("visible")){e.preventDefault();var i=e.originalEvent,o=n.getResizeInfo(),a=n.resizeReferenceGroup.get("children");if(!na(a)){var s=_s(a,2)[1],l=_s(Mi(s.attr("path")),2),u=l[0],h=l[1];o.type===t.ResizeDirectionType.Horizontal?n.updateHorizontalResizingEndGuideLinePosition(i,o,u,h):n.updateVerticalResizingEndGuideLinePosition(i,o,u,h),s.attr("path",[u,h])}}},n}return Ss(n,e),n.prototype.bindEvents=function(){this.bindMouseDown(),this.bindMouseMove(),this.bindMouseUp()},n.prototype.initResizeGroup=function(){if(!this.resizeReferenceGroup){this.resizeReferenceGroup=this.spreadsheet.foregroundGroup.addGroup();var t=this.spreadsheet.options,e=t.width,n=t.height,r=this.getResizeAreaTheme(),i=r.guideLineColor,o={path:"",lineDash:r.guideLineDash,stroke:i,strokeWidth:r.size};this.resizeReferenceGroup.addShape("path",{id:fs,attrs:o}),this.resizeReferenceGroup.addShape("path",{id:vs,attrs:o}),this.resizeReferenceGroup.addShape("rect",{id:gs,attrs:{appendInfo:{isResizeArea:!0},x:0,y:0,width:e,height:n,fill:"transparent"}})}},n.prototype.getResizeAreaTheme=function(){return this.spreadsheet.theme.resizeArea},n.prototype.setResizeTarget=function(t){this.resizeTarget=t},n.prototype.getGuideLineWidthAndHeight=function(){var t=this.spreadsheet.options,e=t.width,n=t.height,r=this.spreadsheet.facet.panelBBox,i=r.maxY,o=r.maxX;return{width:Math.min(o,e),height:Math.min(i,n)}},n.prototype.updateResizeGuideLinePosition=function(e,n){var r=this.resizeReferenceGroup.get("children");if(!na(r)){var i=_s(r,3),o=i[0],a=i[1],s=i[2],l=n.type,u=n.offsetX,h=n.offsetY,c=n.width,d=n.height,p=this.getGuideLineWidthAndHeight(),f=p.width,v=p.height;if(s.attr("cursor","".concat(l,"-resize")),l===t.ResizeDirectionType.Horizontal)return o.attr("path",[["M",u,h],["L",u,v]]),a.attr("path",[["M",u+c,h],["L",u+c,v]]),void(this.resizeStartPosition.offsetX=e.offsetX);o.attr("path",[["M",u,h],["L",f,h]]),a.attr("path",[["M",u,h+d],["L",f,h+d]]),this.resizeStartPosition.offsetY=e.offsetY}},n.prototype.bindMouseDown=function(){var e=this;this.spreadsheet.on(t.S2Event.LAYOUT_RESIZE_MOUSE_DOWN,(function(n){var r=n.target,i=null==r?void 0:r.attr("appendInfo"),o=n.originalEvent;e.spreadsheet.store.set("resized",!1),(null==i?void 0:i.isResizeArea)&&(e.spreadsheet.hideTooltip(),e.spreadsheet.interaction.addIntercepts([t.InterceptType.RESIZE]),e.setResizeTarget(r),e.showResizeGroup(),e.updateResizeGuideLinePosition(o,i))}))},n.prototype.bindMouseMove=function(){var e=this;this.spreadsheet.on(t.S2Event.LAYOUT_RESIZE_MOUSE_MOVE,(function(t){!function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return St(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),fo(t,e,{leading:r,maxWait:e,trailing:i})}(e.resizeMouseMove,33)(t)}))},n.prototype.getResizeGuideLinePosition=function(){var t=_s(this.resizeReferenceGroup.getChildren()||[],2),e=t[0],n=t[1],r=(null==e?void 0:e.attr("path"))||[],i=(null==n?void 0:n.attr("path"))||[],o=_s(r[0]||[],3),a=o[1],s=void 0===a?0:a,l=o[2],u=void 0===l?0:l,h=_s(i[0]||[],3),c=h[1],d=void 0===c?0:c,p=h[2];return{start:{x:s,y:u},end:{x:d,y:void 0===p?0:p}}},n.prototype.getResizeWidthDetail=function(){var e,n,r=this.getResizeGuideLinePosition(),i=r.start,o=r.end,a=Math.floor(o.x-i.x),s=this.getResizeInfo();switch(s.effect){case t.ResizeAreaEffect.Field:return{eventType:t.S2Event.LAYOUT_RESIZE_ROW_WIDTH,style:{rowCfg:{widthByField:(e={},e[s.id]=a,e)}}};case t.ResizeAreaEffect.Tree:return{eventType:t.S2Event.LAYOUT_RESIZE_TREE_WIDTH,style:{rowCfg:{treeRowsWidth:a}}};case t.ResizeAreaEffect.Cell:return{eventType:t.S2Event.LAYOUT_RESIZE_COL_WIDTH,style:{colCfg:{widthByFieldValue:(n={},n[s.id]=a,n)}}};case t.ResizeAreaEffect.Series:return{eventType:t.S2Event.LAYOUT_RESIZE_SERIES_WIDTH,seriesNumberWidth:a};default:return null}},n.prototype.getResizeHeightDetail=function(){var e,n=this.spreadsheet.theme.rowCell.cell.padding,r=this.getResizeGuideLinePosition(),i=r.start,o=r.end,a=Math.floor(o.y-i.y),s=a-n.top-n.bottom,l=this.getResizeInfo();switch(l.effect){case t.ResizeAreaEffect.Field:return{eventType:t.S2Event.LAYOUT_RESIZE_COL_HEIGHT,style:{colCfg:{heightByField:(e={},e[l.id]=a,e)}}};case t.ResizeAreaEffect.Cell:return{eventType:t.S2Event.LAYOUT_RESIZE_ROW_HEIGHT,style:{cellCfg:{height:s}}};default:return null}},n.prototype.getResizeDetail=function(){return this.getResizeInfo().type===t.ResizeDirectionType.Horizontal?this.getResizeWidthDetail():this.getResizeHeightDetail()},n.prototype.showResizeGroup=function(){this.initResizeGroup(),this.resizeReferenceGroup.set("visible",!0)},n.prototype.hideResizeGroup=function(){this.resizeReferenceGroup.set("visible",!1)},n.prototype.bindMouseUp=function(){var e=this;this.spreadsheet.on(t.S2Event.GLOBAL_MOUSE_UP,(function(){var t;e.resizeReferenceGroup&&!na(null===(t=e.resizeReferenceGroup)||void 0===t?void 0:t.getChildren())&&(e.hideResizeGroup(),e.renderResizedResult())}))},n.prototype.isResizeMoreThanMaxCornerWidthLimit=function(e){var n=this.getResizeInfo().effect!==t.ResizeAreaEffect.Cell&&this.spreadsheet.isFrozenRowHeader(),r=this.spreadsheet.options.width,i=Math.floor(.5*r);return n&&e>=i},n.prototype.updateHorizontalResizingEndGuideLinePosition=function(t,e,n,r){if(!this.isResizeMoreThanMaxCornerWidthLimit(t.offsetX)){var i=t.offsetX-this.resizeStartPosition.offsetX;e.width+i<28&&(i=-(e.width-28));var o=e.offsetX+e.width+i;n[1]=o,r[1]=o,this.resizeTarget.attr({x:o-e.size/2})}},n.prototype.updateVerticalResizingEndGuideLinePosition=function(t,e,n,r){var i=t.offsetY-this.resizeStartPosition.offsetY;e.height+i<16&&(i=-(e.height-16));var o=e.offsetY+e.height+i;n[2]=o,r[2]=o,this.resizeTarget.attr({y:o-e.size/2})},n.prototype.renderResizedResult=function(){var e=this.getResizeInfo(),n=this.getResizeDetail()||{},r=n.style,i=n.seriesNumberWidth,o=n.eventType,a={info:e,style:r};this.spreadsheet.emit(t.S2Event.LAYOUT_RESIZE,a),this.spreadsheet.emit(o,a),r?this.spreadsheet.setOptions({style:r}):this.spreadsheet.theme.rowCell.seriesNumberWidth=i,this.spreadsheet.store.set("resized",!0),this.render()},n.prototype.getResizeInfo=function(){var t;return null===(t=this.resizeTarget)||void 0===t?void 0:t.attr("appendInfo")},n.prototype.render=function(){this.resizeStartPosition={},this.resizeTarget=null,this.resizeReferenceGroup=null,this.spreadsheet.render(!1)},n}(Mg),Wg=function(t){function e(e){var n=t.call(this,e)||this;return n.isHeaderCellInViewport=function(t,e,n,r){return t+e>=n&&n+r>=t},n.headerConfig=e,n}return Ss(e,t),e.prototype.clearResizeAreaGroup=function(t){var e=this.get("parent"),n=null==e?void 0:e.findById(t);null==n||n.clear()},e.prototype.render=function(t){this.clearResizeAreaGroup(t),this.clear(),this.layout(),this.offset(),this.clip()},e.prototype.onScrollXY=function(t,e,n){this.headerConfig.scrollX=t,this.headerConfig.scrollY=e,this.render(n)},e.prototype.onRowScrollX=function(t,e){this.headerConfig.scrollX=t,this.render(e)},e.prototype.clear=function(){t.prototype.clear.call(this)},e}(ap),Yg=function(t){function e(e){var n=t.call(this,e)||this;return n.scrollGroup=n.addGroup({name:_,zIndex:3}),n}return Ss(e,t),e.prototype.onColScroll=function(t,e){this.headerConfig.scrollX!==t&&(this.headerConfig.scrollX=t,this.render(e))},e.prototype.clip=function(){var t=this.headerConfig,e=t.width,n=t.height,r=t.scrollX,i=t.spreadsheet.isFrozenRowHeader()?r:0;this.scrollGroup.setClip({type:"rect",attrs:{x:i,y:0,width:e+i,height:n}})},e.prototype.clear=function(){var t;this.scrollGroup.clear(),null===(t=this.background)||void 0===t||t.remove(!0)},e.prototype.getCellInstance=function(t,e,n){return new Jv(t,e,n)},e.prototype.getCellGroup=function(t){return this.scrollGroup},e.prototype.isColCellInRect=function(t){var e=this.headerConfig,n=e.spreadsheet,r=e.cornerWidth,i=e.width,o=e.scrollX;return i+o>t.x&&o-(n.isFrozenRowHeader()?0:r)<t.x+t.width},e.prototype.layout=function(){var t,e,n=this,r=this.headerConfig,i=r.data,o=r.spreadsheet,a=null===(e=null===(t=null==o?void 0:o.facet)||void 0===t?void 0:t.cfg)||void 0===e?void 0:e.colCell;_o(i,(function(t){var e=t;if(n.isColCellInRect(e)){var r=void 0;a&&(r=a(e,o,n.headerConfig)),na(r)&&(r=n.getCellInstance(e,o,n.headerConfig)),e.belongsCell=r,n.getCellGroup(e).add(r)}}))},e.prototype.offset=function(){var t=this.headerConfig,e=t.position,n=t.scrollX;wg(this.scrollGroup,e.x-n)},e}(Wg),Ug=function(t){function e(e){return t.call(this,e)||this}return Ss(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.gm&&this.gm.destroy()},e.prototype.layout=function(){var t,e,n=this,r=this.headerConfig,i=r.data,o=r.spreadsheet,a=r.width,s=r.height,l=r.seriesNumberWidth,u=r.scrollY,h=r.scrollX,c=null===(e=null===(t=null==o?void 0:o.facet)||void 0===t?void 0:t.cfg)||void 0===e?void 0:e.rowCell;_o(i,(function(t){if(function(t){return s+u>t.y&&u<t.y+t.height&&a-l+h>t.x&&h-l<t.x+t.width}(t)&&0!==t.height){var e=void 0;c&&(e=c(t,o,n.headerConfig)),na(e)&&o.isPivotMode()&&(e=new pg(t,o,n.headerConfig)),t.belongsCell=e,n.add(e)}}))},e.prototype.offset=function(){var t=this.headerConfig,e=t.scrollX,n=t.scrollY,r=t.position,i=t.seriesNumberWidth;Cg(this,r.x-e+i,r.y-n)},e.prototype.clip=function(){var t=this.headerConfig,e=t.width,n=t.height,r=t.scrollX,i=t.scrollY,o=t.seriesNumberWidth;this.setClip({type:"rect",attrs:{x:r-o,y:i,width:e,height:n}})},e}(Wg),Vg=function(e){function n(t){return e.call(this,t)||this}return Ss(n,e),n.getCornerHeader=function(t,e,r,i,o,a){var s=t.width,l=t.height,u=e.originalWidth,h=e.originalHeight,c=e.width,d=e.height;return new n({data:this.getCornerNodes({x:e.x,y:e.y},u,h,i.rows,i.columns,o.rowsHierarchy,o.colsHierarchy,i.dataSet,r,a),position:{x:e.x,y:e.y},width:c,height:d,originalHeight:h,originalWidth:u,viewportWidth:s,viewportHeight:l,hierarchyType:i.hierarchyType,hierarchyCollapse:i.hierarchyCollapse,rows:i.rows,columns:i.columns,seriesNumberWidth:r,spreadsheet:a})},n.getCornerNodes=function(e,n,r,i,o,a,s,l,u,h){var c,d,p,f,v=[];if(u&&(null==s?void 0:s.sampleNodeForLastLevel)){var g=new Os({id:"",key:I,value:ls("序号")});g.x=null==e?void 0:e.x,g.y=null===(c=null==s?void 0:s.sampleNodeForLastLevel)||void 0===c?void 0:c.y,g.width=u,g.height=null===(d=null==s?void 0:s.sampleNodeForLastLevel)||void 0===d?void 0:d.height,g.isPivotMode=!0,g.cornerType=t.CornerNodeType.ROW,v.push(g)}if(null==s?void 0:s.sampleNodeForLastLevel)if(h.isHierarchyTreeType()){var y=h.store.get("drillDownFieldInLevel",[]).map((function(t){return t.drillField})),m=new Os({key:"",id:"",value:i.filter((function(t){return!$o(y,t)})).map((function(t){return l.getFieldName(t)})).join("/")});m.x=e.x+u,m.y=null===(p=null==s?void 0:s.sampleNodeForLastLevel)||void 0===p?void 0:p.y,m.width=n-u,m.height=null===(f=null==s?void 0:s.sampleNodeForLastLevel)||void 0===f?void 0:f.height,m.seriesNumberWidth=u,m.isPivotMode=!0,m.spreadsheet=h,m.cornerType=t.CornerNodeType.ROW,v.push(m)}else a.sampleNodesForAllLevels.forEach((function(e){var n=i[e.level],r=new Os({key:n,id:"",value:l.getFieldName(n)});r.x=e.x+u,r.y=s.sampleNodeForLastLevel.y,r.width=e.width,r.height=s.sampleNodeForLastLevel.height,r.field=n,r.isPivotMode=!0,r.cornerType=t.CornerNodeType.ROW,r.spreadsheet=h,v.push(r)}));return s.sampleNodesForAllLevels.forEach((function(r){if(r.level<s.maxLevel){var i=o[r.level],a=new Os({key:i,id:"",value:l.getFieldName(i)});a.x=e.x,a.y=r.y,a.width=n,a.height=r.height,a.field=i,a.isPivotMode=!0,a.cornerType=t.CornerNodeType.Col,a.spreadsheet=h,v.push(a)}})),v},n.prototype.onCorScroll=function(t,e){this.headerConfig.scrollX=t,this.render(e)},n.prototype.destroy=function(){e.prototype.destroy.call(this)},n.prototype.layout=function(){this.renderCells()},n.prototype.renderCells=function(){var t,e,n,r,i=this,o=this.headerConfig,a=o.data,s=o.spreadsheet,l=null===(e=null===(t=null==s?void 0:s.facet)||void 0===t?void 0:t.cfg)||void 0===e?void 0:e.cornerHeader,u=null===(r=null===(n=null==s?void 0:s.facet)||void 0===n?void 0:n.cfg)||void 0===r?void 0:r.cornerCell;l?l(this,s,this.headerConfig):(this.addBgRect(),a.forEach((function(t){var e;u&&(e=u(t,i.headerConfig.spreadsheet,i.headerConfig)),na(e)&&(e=new tg(t,i.headerConfig.spreadsheet,i.headerConfig)),i.add(e)})))},n.prototype.offset=function(){var t=this.headerConfig.scrollX;wg(this,-t)},n.prototype.clip=function(){var t=this.headerConfig,e=t.width,n=t.height,r=t.scrollX;this.setClip({type:"rect",attrs:{x:r,y:0,width:e,height:n}})},n.prototype.addBgRect=function(){var t=this.headerConfig,e=t.originalWidth,n=t.originalHeight,r=t.position;this.addShape("rect",{attrs:{x:r.x,y:r.y,width:e,height:n,fill:In(this.headerConfig,"spreadsheet.theme.cornerCell.cell.backgroundColor")}})},n}(Wg),jg=function(t){function e(e){return t.call(this,e)||this}return Ss(e,t),e.getSeriesNumberHeader=function(t,n,r,i,o){var a=t.width,s=t.height,l=[],u=i.isHierarchyTreeType();return r.forEach((function(t){if(!t.isTotals||u){var e=new Os({id:"",key:"",value:"".concat(l.length+1)});e.x=t.x,e.y=t.y,e.height=t.height,e.width=n,l.push(e)}})),new e({width:o,height:s,viewportWidth:a,viewportHeight:s,position:{x:0,y:t.y},data:l,spreadsheet:i})},e.prototype.clip=function(){},e.prototype.layout=function(){var t=this,e=this.headerConfig,n=e.data,r=e.scrollY,i=e.height;e.spreadsheet.isPivotMode&&this.addBackGround();var o=this.addGroup();_o(n,(function(e){var n=e.y,a=e.height,s=e.isLeaf;if(t.isHeaderCellInViewport(n,a,r,i)){var l=t.addGroup();t.addText(l,e),t.add(l),s||t.addBottomBorder(o,e)}}))},e.prototype.offset=function(){var t=this.headerConfig,e=t.scrollY,n=t.scrollX,r=t.position;Cg(this,r.x-n,r.y-e),this.backgroundShape&&this.backgroundShape.translate(r.x,r.y+e)},e.prototype.addBackGround=function(){var t=this.headerConfig.spreadsheet.theme.rowCell.cell,e=this.headerConfig,n=e.position,r=e.width,i=e.height;this.backgroundShape=lf(this,{x:n.x,y:-n.y,width:r,height:i,fill:t.backgroundColor,stroke:"transparent",opacity:t.backgroundColorOpacity})},e.prototype.addBottomBorder=function(t,e){var n=this.headerConfig,r=n.position,i=n.width,o=e.x,a=e.y;t.addShape("line",{attrs:{x1:o,y1:a,x2:r.x+i,y2:a,stroke:this.headerConfig.spreadsheet.theme.rowCell.cell.horizontalBorderColor,lineWidth:1}})},e.prototype.addText=function(t,e){var n=this.headerConfig,r=n.scrollY,i=n.height,o=this.headerConfig.spreadsheet.theme.rowCell,a=e.label,s=e.x,l=e.y,u=e.width,h=e.height,c=e.isLeaf,d=e.isTotals,p=this.getTextPadding(a,u),f=c&&!d?o.text:o.bolderText,v=dg(l+p.top,h-p.top-p.bottom,r,i,f.fontSize);t.addShape("text",{attrs:Es(Es({x:s+p.left,y:v+f.fontSize/2,text:a},f),{cursor:"pointer"})})},e.prototype.getTextPadding=function(t,e){var n=this.headerConfig.spreadsheet.theme.rowCell,r=gf(t,n.text),i=Math.max(Math.abs((e-r)/2),4);return Es(Es({},n.cell.padding),{left:i,right:i})},e}(Wg),Xg=function(t){function e(e){var n=t.call(this,e)||this;return n.render(),n}return Ss(e,t),e.prototype.layout=function(){this.addCornerBottomBorder(),this.addCornerRightBorder(),this.addSplitLineRightShadow()},e.prototype.render=function(){this.clear(),this.layout()},e.prototype.onBorderScroll=function(t){this.cfg.scrollX=t;var e=this.cfg.position;Cg(this,e.x-t,0),this.render()},e.prototype.onChangeShadowVisibility=function(t,e,n){var r=t<e;n?this.cfg.showCornerRightShadow=r:this.cfg.showViewPortRightShadow=r,this.render()},e.prototype.addCornerRightBorder=function(){var t,e=this.cfg;if(e.isPivotMode){var n=e.width,r=e.height,i=e.viewportHeight,o=e.position,a=null===(t=e.spreadsheet.theme)||void 0===t?void 0:t.splitLine,s=o.x+n,l=o.y,u=o.y+r+i;this.addShape("line",{attrs:{x1:s,y1:l,x2:s,y2:u,stroke:a.verticalBorderColor,lineWidth:a.verticalBorderWidth,opacity:a.verticalBorderColorOpacity}})}},e.prototype.addCornerBottomBorder=function(){var t,e=this.cfg,n=e.width,r=e.height,i=e.viewportWidth,o=e.position,a=e.scrollX,s=e.scrollContainsRowHeader,l=null===(t=e.spreadsheet.theme)||void 0===t?void 0:t.splitLine,u=o.x,h=u+n+i+(s?a:0),c=o.y+r-1;this.addShape("line",{attrs:{x1:u,y1:c,x2:h,y2:c,stroke:l.horizontalBorderColor,lineWidth:l.horizontalBorderWidth,opacity:l.horizontalBorderColorOpacity}})},e.prototype.addSplitLineRightShadow=function(){var t,e,n,r=this.cfg,i=r.width,o=r.height,a=r.viewportHeight,s=r.position,l=r.isPivotMode,u=r.spreadsheet,h=r.showViewPortRightShadow;if(l){var c=null===(t=u.theme)||void 0===t?void 0:t.splitLine;if(c.showShadow&&h&&this.cfg.spreadsheet.isFrozenRowHeader()){var d=s.x+i,p=s.y;this.addShape("rect",{attrs:{x:d,y:p,width:c.shadowWidth,height:a+o,fill:"l (0) 0:".concat(null===(e=c.shadowColors)||void 0===e?void 0:e.left," 1:").concat(null===(n=c.shadowColors)||void 0===n?void 0:n.right)}})}}},e}(ap),Kg=function(t){void 0===t&&(t=[]);var e=[];return t.forEach((function(t){(t instanceof jf&&e.push(t),t instanceof ap)&&t.getChildren().forEach((function(t){t instanceof jf&&e.push(t)}))})),e},$g=function(){function e(e){var n=this;this.interactions=new Map,this.intercepts=new Set,this.hoverTimer=null,this.defaultState={cells:[],force:!1},this.selectAll=function(){n.changeState({stateName:t.InteractionStateName.ALL_SELECTED})},this.mergeCells=function(t,e){nv(n.spreadsheet,t,e)},this.unmergeCell=function(t){iv(n.spreadsheet,t)},this.spreadsheet=e,this.registerEventController(),this.registerInteractions()}return e.prototype.destroy=function(){this.interactions.clear(),this.intercepts.clear(),this.eventController.clear(),this.clearHoverTimer(),this.resetState()},e.prototype.reset=function(){this.clearState(),this.clearHoverTimer(),this.intercepts.clear(),this.spreadsheet.hideTooltip()},e.prototype.setState=function(t){lv(this.spreadsheet,t)},e.prototype.getState=function(){return this.spreadsheet.store.get(q)||this.defaultState},e.prototype.setInteractedCells=function(t){var e=this.getInteractedCells().concat([t]),n=this.getState();n.interactedCells=e,this.setState(n)},e.prototype.getInteractedCells=function(){var t=this.getState();return(null==t?void 0:t.interactedCells)||[]},e.prototype.resetState=function(){this.spreadsheet.store.set(q,this.defaultState)},e.prototype.getCurrentStateName=function(){return this.getState().stateName},e.prototype.isEqualStateName=function(t){return this.getCurrentStateName()===t},e.prototype.isSelectedState=function(){var e=this.getState();return(null==e?void 0:e.stateName)===t.InteractionStateName.SELECTED},e.prototype.isActiveCell=function(t){return this.getCells().find((function(e){return t.getMeta().id===e.id}))},e.prototype.isSelectedCell=function(t){return this.isSelectedState()&&this.isActiveCell(t)},e.prototype.getCells=function(){var t=this.getState();return(null==t?void 0:t.cells)||[]},e.prototype.getActiveCells=function(){var t=this.getCells().map((function(t){return t.id}));return this.getAllCells().filter((function(e){return t.includes(e.getMeta().id)}))},e.prototype.clearStyleIndependent=function(){var e=this.getState();(null==e?void 0:e.stateName)!==t.InteractionStateName.SELECTED&&(null==e?void 0:e.stateName)!==t.InteractionStateName.HOVER||this.getPanelGroupAllDataCells().forEach((function(t){t.hideInteractionShape()}))},e.prototype.getPanelGroupAllUnSelectedDataCells=function(){var t=this;return this.getPanelGroupAllDataCells().filter((function(e){return!t.isActiveCell(e)}))},e.prototype.getPanelGroupAllDataCells=function(){var t,e;return Kg(null===(e=null===(t=this.spreadsheet)||void 0===t?void 0:t.panelGroup)||void 0===e?void 0:e.get("children"))},e.prototype.getAllRowHeaderCells=function(){var e,n,r,i,o,a,s,l=null===(r=Mo(null===(n=null===(e=this.spreadsheet)||void 0===e?void 0:e.foregroundGroup)||void 0===n?void 0:n.getChildren(),(function(t){return t instanceof Ug})))||void 0===r?void 0:r[0],u=null===(i=null==l?void 0:l.cfg)||void 0===i?void 0:i.children;if(na(u))return[];for(;!(null===(o=null==u?void 0:u[0])||void 0===o?void 0:o.cellType);)u=null===(s=null===(a=null==u?void 0:u[0])||void 0===a?void 0:a.cfg)||void 0===s?void 0:s.children;return(u||[]).filter((function(e){return e.cellType===t.CellTypes.ROW_CELL}))},e.prototype.getAllColHeaderCells=function(){var e,n,r,i,o,a,s=Mo(null===(n=null===(e=this.spreadsheet)||void 0===e?void 0:e.foregroundGroup)||void 0===n?void 0:n.getChildren(),(function(t){return t instanceof Yg}))[0],l=null===(r=null==s?void 0:s.cfg)||void 0===r?void 0:r.children;if(na(l))return[];for(;!(null===(i=null==l?void 0:l[0])||void 0===i?void 0:i.cellType);)l=null===(a=null===(o=null==l?void 0:l[0])||void 0===o?void 0:o.cfg)||void 0===a?void 0:a.children;return l.filter((function(e){return e.cellType===t.CellTypes.COL_CELL}))},e.prototype.getRowColActiveCells=function(t){return Bi(this.getAllRowHeaderCells(),this.getAllColHeaderCells()).filter((function(e){return t.includes(e.getMeta().id)}))},e.prototype.getAllCells=function(){return Bi(this.getPanelGroupAllDataCells(),this.getAllRowHeaderCells(),this.getAllColHeaderCells())},e.prototype.hideColumns=function(t){void 0===t&&(t=[]),_g(this.spreadsheet,t)},e.prototype.registerInteractions=function(){var e,n=this;this.interactions.clear(),this.interactions.set(t.InteractionName.DATA_CELL_CLICK,new Ag(this.spreadsheet)),this.interactions.set(t.InteractionName.ROW_COLUMN_CLICK,new Dg(this.spreadsheet)),this.interactions.set(t.InteractionName.ROW_TEXT_CLICK,new Ng(this.spreadsheet)),this.interactions.set(t.InteractionName.MERGED_CELLS_CLICK,new Bg(this.spreadsheet)),this.interactions.set(t.InteractionName.HOVER,new Pg(this.spreadsheet)),ys()||(this.interactions.set(t.InteractionName.BRUSH_SELECTION,new Fg(this.spreadsheet)),this.interactions.set(t.InteractionName.COL_ROW_RESIZE,new Gg(this.spreadsheet)),this.interactions.set(t.InteractionName.COL_ROW_MULTI_SELECTION,new Hg(this.spreadsheet)),this.interactions.set(t.InteractionName.COL_ROW_SHIFT_MULTI_SELECTION,new zg(this.spreadsheet)));var r=null===(e=this.spreadsheet.options)||void 0===e?void 0:e.interaction.customInteractions;na(r)||_o(r,(function(t){var e=t.interaction;n.interactions.set(t.key,new e(n.spreadsheet))}))},e.prototype.registerEventController=function(){this.eventController=new kg(this.spreadsheet)},e.prototype.draw=function(){this.spreadsheet.container.draw()},e.prototype.clearState=function(){sv(this.spreadsheet),this.draw()},e.prototype.changeState=function(e){var n=this.spreadsheet.interaction,r=e.cells,i=e.force,o=e.stateName;na(r)&&o===t.InteractionStateName.SELECTED?i&&n.changeState({cells:[],stateName:t.InteractionStateName.UNSELECTED}):(this.clearState(),this.setState(e),this.updatePanelGroupAllDataCells(),this.draw())},e.prototype.updatePanelGroupAllDataCells=function(){this.updateCells(this.getPanelGroupAllDataCells())},e.prototype.updateCells=function(t){void 0===t&&(t=[]),t.forEach((function(t){t.update()}))},e.prototype.addIntercepts=function(t){var e=this;void 0===t&&(t=[]),t.forEach((function(t){e.intercepts.add(t)}))},e.prototype.hasIntercepts=function(t){var e=this;return void 0===t&&(t=[]),t.some((function(t){return e.intercepts.has(t)}))},e.prototype.removeIntercepts=function(t){var e=this;void 0===t&&(t=[]),t.forEach((function(t){e.intercepts.delete(t)}))},e.prototype.clearHoverTimer=function(){clearTimeout(this.hoverTimer)},e.prototype.setHoverTimer=function(t){this.hoverTimer=t},e.prototype.getHoverTimer=function(){return this.hoverTimer},e}(),qg=function(){function t(t){var e=this;this.viewport=window,this.init=function(){e.initDevicePixelRatioListener(),e.initDeviceZoomListener()},this.destroy=function(){e.removeDevicePixelRatioListener(),e.removeDeviceZoomListener()},this.removeDevicePixelRatioListener=function(){var t;(null===(t=e.devicePixelRatioMedia)||void 0===t?void 0:t.removeEventListener)?e.devicePixelRatioMedia.removeEventListener("change",e.renderByDevicePixelRatioChanged):e.devicePixelRatioMedia.removeListener(e.renderByDevicePixelRatioChanged)},this.initDeviceZoomListener=function(){var t,n;ys()||null===(n=null===(t=e.viewport)||void 0===t?void 0:t.visualViewport)||void 0===n||n.addEventListener("resize",e.renderByZoomScale)},this.removeDeviceZoomListener=function(){var t,n;ys()||null===(n=null===(t=e.viewport)||void 0===t?void 0:t.visualViewport)||void 0===n||n.removeEventListener("resize",e.renderByZoomScale)},this.renderByDevicePixelRatioChanged=function(){e.renderByDevicePixelRatio()},this.renderByDevicePixelRatio=function(t){void 0===t&&(t=window.devicePixelRatio);var n=e.spreadsheet,r=n.container,i=n.options,o=i.width,a=i.height;r.set("pixelRatio",t),r.changeSize(o,a),e.spreadsheet.render(!1)},this.renderByZoomScale=fo((function(t){var n=Math.ceil(t.target.scale);n>1&&e.renderByDevicePixelRatio(n)}),350),this.spreadsheet=t}return t.prototype.initDevicePixelRatioListener=function(){var t;this.devicePixelRatioMedia=window.matchMedia("(resolution: ".concat(window.devicePixelRatio,"dppx)")),(null===(t=this.devicePixelRatioMedia)||void 0===t?void 0:t.addEventListener)?this.devicePixelRatioMedia.addEventListener("change",this.renderByDevicePixelRatioChanged):this.devicePixelRatioMedia.addListener(this.renderByDevicePixelRatioChanged)},t}(),Zg=function(){function t(t){this.position={x:0,y:0},this.spreadsheet=t}return t.prototype.show=function(t){var e=t.position,n=t.options,r=t.content,i=vv(n).enterable,o=this.getContainer(),a=(this.spreadsheet.options.tooltip||{}).autoAdjustBoundary;this.options=t,this.renderContent(r);var s=fv({spreadsheet:this.spreadsheet,position:e,tooltipContainer:o,autoAdjustBoundary:a}),l=s.x,u=s.y;this.position={x:l,y:u},yv(o,{style:{left:"".concat(l,"px"),top:"".concat(u,"px"),pointerEvents:i?"all":"none"},className:"".concat(hs,"-show")})},t.prototype.hide=function(){var t=this.getContainer();yv(t,{style:{pointerEvents:"none"},className:"".concat(hs,"-hide")}),this.resetPosition()},t.prototype.destroy=function(){var t=this.getContainer();t&&(this.resetPosition(),null==t||t.remove())},t.prototype.renderContent=function(t){this.clearContent();var e=(this.spreadsheet.options.tooltip||{}).content,n=this.getContainer(),r=null!=t?t:e;oa(r)||("string"!=typeof r?r instanceof Element&&n.appendChild(r):n.innerHTML=r)},t.prototype.clearContent=function(){this.getContainer().innerHTML=""},t.prototype.disablePointerEvent=function(){this.container&&"none"!==this.container.style.pointerEvents&&yv(this.container,{style:{pointerEvents:"none"}})},t.prototype.resetPosition=function(){this.position={x:0,y:0}},t.prototype.getContainer=function(){if(!this.container){var t=document.createElement("div");return document.body.appendChild(t),this.container=t,this.container}return this.container.className="".concat(us,"-container"),this.container},t}(),Qg=function(e){function n(t,n,r){var i=e.call(this)||this;return i.store=new qp,i.untypedOn=i.on,i.untypedEmit=i.emit,i.on=function(t,e){return i.untypedOn(t,e)},i.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return i.untypedEmit.apply(i,Ls([t],_s(e),!1))},i.initHiddenColumnsDetail=Sa((function(){var t=i.options.interaction.hiddenColumnFields;na(t)||_g(i,t,!0)})),i.dom=i.getMountContainer(t),i.dataCfg=hv(n),i.options=cv(r),i.dataSet=i.getDataSet(i.options),i.initTooltip(),i.initGroups(),i.bindEvents(),i.initInteraction(),i.initTheme(),i.initHdAdapter(),i.registerIcons(),i.setDebug(),i}return Ss(n,e),n.prototype.setDebug=function(){Ys.getInstance().setDebug(this.options.debug)},n.prototype.initTheme=function(){this.setThemeCfg({name:"default"})},n.prototype.getMountContainer=function(t){var e=jo(t)?document.getElementById(t):t;if(!e)throw new Error("Target mount container is not a DOM element");return e},n.prototype.initHdAdapter=function(){this.options.hdAdapter&&(this.hdAdapter=new qg(this),this.hdAdapter.init())},n.prototype.initInteraction=function(){this.interaction=new $g(this)},n.prototype.initTooltip=function(){var t,e;this.tooltip=this.renderTooltip(),this.tooltip instanceof Zg||console.warn("[Custom Tooltip]: ".concat(null===(e=null===(t=this.tooltip)||void 0===t?void 0:t.constructor)||void 0===e?void 0:e.toString()," should be extends from BaseTooltip"))},n.prototype.renderTooltip=function(){var t,e;return(null===(e=null===(t=this.options.tooltip)||void 0===t?void 0:t.renderTooltip)||void 0===e?void 0:e.call(t,this))||new Zg(this)},n.prototype.showTooltip=function(t){var e,n;null===(n=(e=this.tooltip).show)||void 0===n||n.call(e,t)},n.prototype.showTooltipWithInfo=function(t,e,n){var r=Bv(this,t),i=r.showTooltip,o=r.content;if(i){var a=Iv({spreadsheet:this,cellInfos:e,options:n});this.showTooltip({data:a,position:{x:t.clientX,y:t.clientY},options:Es({enterable:!0},n),content:o})}},n.prototype.hideTooltip=function(){var t,e;null===(e=(t=this.tooltip).hide)||void 0===e||e.call(t)},n.prototype.destroyTooltip=function(){var t,e;null===(e=(t=this.tooltip).destroy)||void 0===e||e.call(t)},n.prototype.registerIcons=function(){var t=this.options.customSVGIcons;na(t)||_o(t,(function(t){na(Xs(t.name))&&js(t.name,t.svg)}))},n.prototype.setDataCfg=function(t){this.store.set("originalDataCfg",t);var e=Mi(t),n=this.store.get("sortParam"),r=e.sortParams;e.sortParams=[].concat(n||[],r||[]),this.dataCfg=hv(e),this.store.set(P,k)},n.prototype.setOptions=function(t){this.hideTooltip(),this.options=uv(this.options,t),this.registerIcons()},n.prototype.render=function(e){void 0===e&&(e=!0),this.emit(t.S2Event.LAYOUT_BEFORE_RENDER),e&&(this.clearDrillDownData("",!0),this.dataSet.setDataCfg(this.dataCfg)),this.buildFacet(),this.emit(t.S2Event.LAYOUT_AFTER_RENDER),this.initHiddenColumnsDetail()},n.prototype.destroy=function(){var t;this.facet.destroy(),null===(t=this.hdAdapter)||void 0===t||t.destroy(),this.interaction.destroy(),this.store.clear(),this.destroyTooltip()},n.prototype.setThemeCfg=function(t){var e=(null==t?void 0:t.theme)||{};this.theme=va({},ws(Es(Es({},t),{spreadsheet:this})),e)},n.prototype.updatePagination=function(t){this.options=va({},this.options,{pagination:t}),this.store.set("scrollX",0),this.store.set("scrollY",0)},n.prototype.getContentHeight=function(){return this.facet.getContentHeight()},n.prototype.changeSize=function(t,e){void 0===t&&(t=this.options.width),void 0===e&&(e=this.options.height),t===this.options.width&&e===this.options.height||(this.options=va({},this.options,{width:t,height:e}),this.container.changeSize(t,e))},n.prototype.getLayoutWidthType=function(){return this.options.style.layoutWidthType},n.prototype.getRowNodes=function(t){return void 0===t&&(t=-1),-1===t?this.facet.layoutResult.rowNodes:this.facet.layoutResult.rowNodes.filter((function(e){return e.level===t}))},n.prototype.getColumnNodes=function(t){var e,n;return void 0===t&&(t=-1),-1===t?null===(e=this.facet)||void 0===e?void 0:e.layoutResult.colNodes:null===(n=this.facet)||void 0===n?void 0:n.layoutResult.colNodes.filter((function(e){return e.level===t}))},n.prototype.updateScrollOffset=function(t){this.facet.updateScrollOffset(va({},{offsetX:{value:void 0,animate:!1},offsetY:{value:void 0,animate:!1}},t))},n.prototype.getTooltipDataItemMappingCallback=function(){var t;return null===(t=this.options)||void 0===t?void 0:t.mappingDisplayDataItem},n.prototype.getCell=function(t){for(var e,n=t;n&&!(n instanceof jp);){if(n instanceof Gf)return n;n=null===(e=n.get)||void 0===e?void 0:e.call(n,"parent")}return null},n.prototype.getCellType=function(t){var e=this.getCell(t);return null==e?void 0:e.cellType},n.prototype.getTotalsConfig=function(t){var e=In(this.options.totals,$o(this.dataCfg.fields.rows,t)?"row":"col",{});return{showSubTotals:!!e.showSubTotals&&$o(e.subTotalsDimensions,t),showGrandTotals:e.showGrandTotals,reverseLayout:e.reverseLayout,reverseSubLayout:e.reverseSubLayout,label:e.label||ls("总计"),subLabel:e.subLabel||ls("小计")}},n.prototype.initGroups=function(){var t=this.options,e=t.width,n=t.height;this.container=new jp({container:this.dom,width:e,height:n,localRefresh:!1}),this.backgroundGroup=this.container.addGroup({name:c,zIndex:0}),this.panelGroup=this.container.addGroup({name:p,zIndex:1}),this.foregroundGroup=this.container.addGroup({name:d,zIndex:3}),this.initPanelGroupChildren(),this.updateContainerStyle()},n.prototype.updateContainerStyle=function(){this.container.get("el").style.display="block"},n.prototype.initPanelGroupChildren=function(){this.panelScrollGroup=this.panelGroup.addGroup({name:f,zIndex:1})},n.prototype.getInitColumnNodes=function(){return this.store.get("initColumnNodes",[])},n}(Ql),Jg=function(){function t(t){var e=this;this.getFieldMeta=wn((function(t,n){return No(e.meta||n,(function(e){return e.field===t}))})),this.spreadsheet=t}return t.prototype.getFieldName=function(t){return In(this.getFieldMeta(t,this.meta),"name",t)},t.prototype.getFieldFormatter=function(t){return In(this.getFieldMeta(t,this.meta),"formatter",Mt)},t.prototype.setDataCfg=function(t){this.getFieldMeta.cache.clear();var e=this.processDataCfg(t),n=e.fields,r=e.meta,i=e.data,o=e.totalData,a=e.sortParams,s=e.filterParams;this.fields=n,this.meta=r,this.originData=i,this.totalData=o,this.sortParams=a,this.filterParams=s,this.displayData=this.originData,this.indexesData=[]},t.prototype.getDisplayDataSet=function(){return this.displayData},t.prototype.getValueRangeByField=function(t){var e,n,r,i=(n=this.spreadsheet,r=t,n.store.get(P,k)[r]);if(i)return i;var o,a=Ai(zo(this.originData,(function(e){var n=e[t];return oa(n)?null:Number.parseFloat(n)}))),s={maxValue:da(a),minValue:(o=a,o&&o.length?ca(o,Mt,ha):void 0)};return function(t,e){var n=t.store.get(P,k);t.store.set(P,Es(Es({},n),e))}(this.spreadsheet,((e={})[t]=s,e)),s},t.prototype.moreThanOneValue=function(){var t,e;return(null===(e=null===(t=this.fields)||void 0===t?void 0:t.values)||void 0===e?void 0:e.length)>1},t}(),ty=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pathIndexMax=[],e.handleDimensionValuesSort=function(){_o(e.sortParams,(function(t){var n=t.sortFieldId,r=t.sortByMeasure;if(n){var i=Ls([],_s(e.sortedDimensionValues[n]||[]),!1),o=qv({dataSet:e,sortParam:t,originValues:i,isSortByMeasure:!na(r)});e.sortedDimensionValues[n]=o}}))},e.getCustomData=function(t){for(var n,r=!1,i=e.indexesData,o=function(e){var o=t[e];r?i=aa(o)?tf(i):null===(n=Xo(i))||void 0===n?void 0:n.map((function(t){return t&&In(t,o)})):aa(o)?r=!0:i=null==i?void 0:i[o]},a=0;a<t.length;a++)o(a);return i},e}return Ss(e,t),e.prototype.setDataCfg=function(e){var n=this;t.prototype.setDataCfg.call(this,e),this.sortedDimensionValues={},this.rowPivotMeta=new Map,this.colPivotMeta=new Map,this.totalData=[].concat(rf(e.data,e.fields)).concat(this.totalData),Ys.getInstance().debugCallback(Hs,(function(){var t=n.fields,e=Wv({rows:t.rows,columns:t.columns,originData:n.originData,totalData:n.totalData,indexesData:n.indexesData,sortedDimensionValues:n.sortedDimensionValues,rowPivotMeta:n.rowPivotMeta,colPivotMeta:n.colPivotMeta}).indexesData;n.indexesData=e})),this.handleDimensionValuesSort()},e.prototype.transformDrillDownData=function(t,e,n){var r,i=this,o=this.fields,a=o.columns,s=o.values,l=Os.getFieldPath(n,!0),u=this.spreadsheet.store;e=this.standardTransform(e,s);var h=null==n?void 0:n.id,c=null!==(r=u.get("drillDownIdPathMap"))&&void 0!==r?r:new Map;c.has(h)&&(_o(c.get(h),(function(t){es(i.indexesData,t)})),Yv(this.rowPivotMeta,h));var d=Wv({rows:Ls(Ls([],_s(l),!1),[t],!1),columns:a,originData:e,indexesData:this.indexesData,sortedDimensionValues:this.sortedDimensionValues,rowPivotMeta:this.rowPivotMeta,colPivotMeta:this.colPivotMeta}),p=d.paths,f=d.indexesData,v=d.rowPivotMeta,g=d.colPivotMeta,y=d.sortedDimensionValues;this.indexesData=f,this.rowPivotMeta=v,this.colPivotMeta=g,this.sortedDimensionValues=y,c.set(h,p),u.set("drillDownIdPathMap",c)},e.prototype.clearDrillDownData=function(t){var e=this,n=this.spreadsheet.store,r=n.get("drillDownIdPathMap");if(r){var i=n.get("drillDownDataCache",[]);if(t){var o=r.get(t);o&&_o(o,(function(t){es(e.indexesData,t)})),Yv(this.rowPivotMeta,t),r.delete(t);var a=Mo(i,(function(t){return r.has(null==t?void 0:t.rowId)}));n.set("drillDownDataCache",a);var s=a.map((function(t){return null==t?void 0:t.drillLevel})),l=n.get("drillDownFieldInLevel",[]).filter((function(t){return $o(s,null==t?void 0:t.drillLevel)}));n.set("drillDownFieldInLevel",l)}else{r.clear();var u=this.spreadsheet.store.get("originalDataCfg");na(u)||this.spreadsheet.setDataCfg(u),this.spreadsheet.store.set("drillItemsNum",-1),this.spreadsheet.store.set("drillDownDataCache",[]),this.spreadsheet.store.set("drillDownFieldInLevel",[])}n.set("drillDownIdPathMap",r)}},e.prototype.standardTransform=function(t,e){if(na(e))return t;var n=[];return _o(e,(function(e){_o(t,(function(t){var r;Wo(t,e)&&n.push(Es(Es({},t),((r={}).$$extra$$=e,r.$$value$$=t[e],r)))}))})),n},e.prototype.processDataCfg=function(t){var e=t.data,n=t.meta,r=void 0===n?[]:n,i=t.fields,o=t.sortParams,a=void 0===o?[]:o,s=t.totalData,u=i.columns,h=i.rows,c=i.values,d=i.valueInCols,p=i.customValueOrder,f=u,v=h;d?f=this.isCustomMeasuresPosition(p)?this.handleCustomMeasuresOrder(p,f):ts(Ls(Ls([],_s(u),!1),[l],!1)):v=this.isCustomMeasuresPosition(p)?this.handleCustomMeasuresOrder(p,v):ts(Ls(Ls([],_s(h),!1),[l],!1));var g=Ls(Ls([],_s(r),!1),[{field:l,name:ls("数值"),formatter:function(t){return function(t){return In(No(r,(function(e){return e.field===t})),"name",t)}(t)}}],!1),y=this.standardTransform(e,c),m=this.standardTransform(s,c);return{data:y,meta:g,fields:Es(Es({},i),{rows:v,columns:f,values:c}),totalData:m,sortParams:a}},e.prototype.getDimensionValues=function(t,e){var n,r,i,o,a=this.fields||{},s=a.rows,l=void 0===s?[]:s,u=a.columns,h=void 0===u?[]:u,c=new Map,d=[];if($o(l,t)?(c=this.rowPivotMeta,d=l):$o(h,t)&&(c=this.colPivotMeta,d=h),!na(e)){var p=[],f=[],v=function(t){var n=In(e,t);f.push("".concat(n));var r=f.join("".concat(A));if(c.has(n)&&!aa(n)){var a=null===(i=c.get(n))||void 0===i?void 0:i.childField;if(c=c.get(n).children,No(g.sortParams,(function(t){return t.sortFieldId===a}))&&g.sortedDimensionValues[a]){var s=null===(o=g.sortedDimensionValues[a])||void 0===o?void 0:o.filter((function(t){return null==t?void 0:t.includes(r)}));p=Fv(Ls([],_s(s),!1))}else p=Ls([],_s(c.keys()),!1)}},g=this;try{for(var y=bs(d),m=y.next();!m.done;m=y.next()){v(m.value)}}catch(t){n={error:t}}finally{try{m&&!m.done&&(r=y.return)&&r.call(y)}finally{if(n)throw n.error}}return na(p)?[]:Qp(Zp(Ls([],_s(c.keys()),!1),p))}return this.sortedDimensionValues[t]?Qp(Fv(Ls([],_s(this.sortedDimensionValues[t]),!1))):Qp(Ls([],_s(c.keys()),!1))},e.prototype.getCellData=function(t){var e,n=t||{},r=n.query,i=n.rowNode,o=n.isTotals,a=void 0!==o&&o,s=this.fields,l=s.columns,u=s.rows,h=u,c=!na(In(this,"spreadsheet?.store.drillDownIdPathMap"));a&&!c||(h=null!==(e=Os.getFieldPath(i,c))&&void 0!==e?e:u);var d=Hv({rowDimensionValues:Gv(h,r),colDimensionValues:Gv(l,r),careUndefined:a||nf([].concat(u).concat(l),r),rowPivotMeta:this.rowPivotMeta,colPivotMeta:this.colPivotMeta});return In(this.indexesData,d)},e.prototype.getMultiData=function(t,e,n){var r;if(na(t))return Ai(Jp(this.indexesData));var i=this.fields,o=i.rows,a=i.columns,s=i.values,u=Gv(o,t),h=Gv(a,t),c=Hv({rowDimensionValues:u,colDimensionValues:h,careUndefined:!0,rowPivotMeta:this.rowPivotMeta,colPivotMeta:this.colPivotMeta}),d=this.getCustomData(c),p=Ai(tf(d));if(e){var f=[],v=ef(u,o),g=ef(h,a);if(n)f=v;else if(1===(null===(r=Je(t))||void 0===r?void 0:r.length)&&Wo(t,l))f=g;else{var y=function(t){return null==(e=null==t?void 0:t.filter((function(t){return!(null==s?void 0:s.includes(t))})))?void 0:e.every((function(t){return aa(t)}));var e},m=y(h),C=y(u);f=m?v:C?g:Ls(Ls([],_s(v),!1),_s(g),!1)}p=p.filter((function(t){return!(null==f?void 0:f.find((function(e){var n;return e!==l&&(null===(n=Je(t))||void 0===n?void 0:n.includes(e))})))}))}return p||[]},e.prototype.getFieldFormatter=function(e,n){return e===u?this.getFieldFormatterForTotalValue(n):t.prototype.getFieldFormatter.call(this,e)},e.prototype.getFieldFormatterForTotalValue=function(e){var n;return!this.spreadsheet.isValueInCols()&&e&&(n=In(e.rowQuery,l)),n=null!=n?n:In(this.fields.values,0),t.prototype.getFieldFormatter.call(this,n)},e.prototype.handleCustomMeasuresOrder=function(t,e){var n=ts(Ls([],_s(e),!1));return e.length>=t?(n.splice(t,0,l),n):Ls(Ls([],_s(n),!1),[l],!1)},e.prototype.isCustomMeasuresPosition=function(t){return ia(t)},e}(Jg),ey=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.handleDimensionValueFilter=function(){_o(e.filterParams,(function(t){var n=t.filterKey,r=t.filteredValues;e.displayData=Ls(Ls(Ls([],_s(e.getStartRows()),!1),_s(Mo(e.getMovableRows(),(function(t){return t[n]&&!$o(r,t[n])}))),!1),_s(e.getEndRows()),!1)}))},e.handleDimensionValuesSort=function(){_o(e.sortParams,(function(t){var n=t.sortFieldId,r=t.sortBy,i=t.sortMethod;n&&i&&(e.displayData=Ls(Ls(Ls([],_s(e.getStartRows()),!1),_s(ba(e.getMovableRows(),[r||n],[i.toLocaleLowerCase()])),!1),_s(e.getEndRows()),!1))}))},e}return Ss(e,t),e.prototype.processDataCfg=function(t){return t},e.prototype.setDataCfg=function(e){t.prototype.setDataCfg.call(this,e),this.handleDimensionValueFilter(),this.handleDimensionValuesSort()},e.prototype.getStartRows=function(){var t=(this.spreadsheet.options||{}).frozenRowCount;return this.displayData.slice(0,t)},e.prototype.getEndRows=function(){var t=(this.spreadsheet.options||{}).frozenTrailingRowCount;return t?this.displayData.slice(-t):[]},e.prototype.getMovableRows=function(){var t=this.displayData,e=this.spreadsheet.options||{},n=e.frozenTrailingRowCount,r=e.frozenRowCount;return t.slice(r||0,-n||void 0)},e.prototype.getDimensionValues=function(t,e){return[]},e.prototype.getCellData=function(t){var e=t.query;return this.displayData[e.rowIndex][e.col]},e.prototype.getMultiData=function(t,e){return this.displayData},e}(Jg),ny=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ss(e,t),e.prototype.getCellData=function(t){var e=t.query,n=this.fields,r=n.columns,i=n.rows,o=Hv({rowDimensionValues:Gv(i,e),colDimensionValues:Gv(r,e),rowPivotMeta:this.rowPivotMeta,colPivotMeta:this.colPivotMeta,isFirstCreate:!0,careUndefined:!0,rowFields:i,colFields:r});return In(this.indexesData,o)},e.prototype.processDataCfg=function(t){t.fields.rows=[l],t.fields.valueInCols=!1;var e=t.fields.values;return t.data=t.data.map((function(t){var n,r=Object.keys(t),i=In(Jo(e,r),0);return Es(Es({},t),((n={}).$$extra$$=i,n.$$value$$=t[i],n))})),t},e}(ty),ry=function(t,e){void 0===e&&(e=!1),this.x=0,this.y=0,this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.width=0,this.height=0,this.originalWidth=0,this.originalHeight=0,this.facet=t,this.spreadsheet=t.spreadsheet,this.layoutResult=t.layoutResult,e&&this.calculateBBox()},iy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ss(e,t),e.prototype.calculateBBox=function(){var t=this.getCornerBBoxWidth(),e=this.getCornerBBoxHeight();this.width=t,this.height=e,this.maxX=t,this.maxY=e},e.prototype.getCornerBBoxHeight=function(){var t=this.layoutResult.colsHierarchy;return this.originalHeight=Math.floor(t.height),this.originalHeight},e.prototype.getCornerBBoxWidth=function(){var t=this.layoutResult.rowsHierarchy;return this.originalWidth=Math.floor(t.width+this.facet.getSeriesNumberWidth()),this.spreadsheet.isScrollContainsRowHeader()?this.originalWidth:this.adjustCornerBBoxWidth()},e.prototype.adjustCornerBBoxWidth=function(){var t=this.layoutResult.colsHierarchy,e=this.spreadsheet.options.width,n=.5*e,r=t.width,i=e-this.originalWidth;if(this.originalWidth<=n||r<=i)return this.originalWidth;var o=0;return o=r<=e-n?this.originalWidth-(r-i):n,Math.floor(o)},e}(ry),oy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ss(e,t),e.prototype.calculateBBox=function(){var t=this.layoutResult,e=t.rowsHierarchy,n=t.colsHierarchy;this.originalWidth=Math.floor(e.width),this.originalHeight=Math.floor(n.height);var r=this.facet.cornerBBox,i={x:Math.floor(r.maxX),y:Math.floor(r.maxY)},o=this.spreadsheet.theme.scrollBar.size,a=this.spreadsheet.options,s=a.width,l=a.height,u=s-i.x,h=l-i.y-o,c=this.facet.getRealWidth(),d=this.facet.getRealHeight();u=Math.abs(Math.floor(Math.min(u,c))),h=Math.abs(Math.floor(Math.min(h,d))),this.x=i.x,this.y=i.y,this.width=u,this.height=h,this.maxX=i.x+u,this.maxY=i.y+h,this.minX=i.x,this.minY=i.y},e}(ry);!function(t){t.ScrollChange="scroll-change",t.ScrollEnd="scroll-end"}(Uv||(Uv={}));var ay=function(t){function e(e){var n=t.call(this,e)||this;n.isMobile=!1,n.eventHandlers=[],n.scrollFrameId=null,n.getCoordinates=function(){return{from:n.isHorizontal?"x1":"y1",to:n.isHorizontal?"x2":"y2"}},n.current=function(){var t=n.thumbLen/n.trackLen;return n.thumbOffset/n.trackLen/(1-t)},n.updateTrackLen=function(t){if(n.trackLen!==t){var e=t*(n.thumbLen/n.trackLen),r=t*(n.thumbOffset/n.trackLen);n.scrollTargetMaxOffset=n.scrollTargetMaxOffset+n.trackLen-t,n.trackLen=t;var i=n.getCoordinates();n.trackShape.attr(i.to,t),n.updateThumbLen(e),n.updateThumbOffset(r),n.emitScrollChange(r/(t-e)*n.scrollTargetMaxOffset,!1)}},n.updateThumbLen=function(t){if(n.thumbLen!==t){n.thumbLen=t;var e=n.getCoordinates();n.thumbShape.attr(e.to,n.thumbOffset+t),n.emitScrollChange(n.thumbOffset/(n.trackLen-n.thumbLen)*n.scrollTargetMaxOffset,!1)}},n.updateThumbOffset=function(t,e){var r;void 0===e&&(e=!0);var i=n.validateRange(t);if(!(n.thumbOffset===i&&0!==i)){n.thumbOffset=i;var o=n.getCoordinates(),a=o.from,s=o.to;n.thumbShape.attr(((r={})[a]=i,r[s]=i+n.thumbLen,r)),e&&n.emitScrollChange(i/(n.trackLen-n.thumbLen)*n.scrollTargetMaxOffset,!1)}},n.onlyUpdateThumbOffset=function(t){var e;n.updateThumbOffset(t,!1),null===(e=n.get("canvas"))||void 0===e||e.draw()},n.emitScrollChange=function(t,e){void 0===e&&(e=!0),cancelAnimationFrame(n.scrollFrameId),n.scrollFrameId=requestAnimationFrame((function(){n.emit(Uv.ScrollChange,{offset:t,updateThumbOffset:e})}))},n.addEventListener=function(t,e,n){return null==t||t.addEventListener(e,n,!1),{remove:function(){null==t||t.removeEventListener(e,n,!1)}}},n.addEvent=function(t,e,r){t.on(e,r),n.eventHandlers.push({target:t,type:e,handler:r})},n.initScrollBar=function(){n.scrollBarGroup=n.createScrollBarGroup(),n.scrollBarGroup.move(n.position.x,n.position.y),n.bindEvents()},n.createScrollBarGroup=function(){var t=n.addGroup({className:n.isHorizontal?"horizontalBar":"verticalBar"});return n.trackShape=n.createTrackShape(t),n.thumbShape=n.createThumbShape(t),t},n.createTrackShape=function(t){var e=n.theme,r=e.lineCap,i=void 0===r?"round":r,o=e.trackColor,a=e.size,s={lineWidth:a,stroke:o,lineCap:i};return n.isHorizontal?t.addShape("line",{attrs:Es(Es({},s),{x1:0,y1:a/2,x2:n.trackLen,y2:a/2})}):t.addShape("line",{attrs:Es(Es({},s),{x1:a/2,y1:0,x2:a/2,y2:n.trackLen})})},n.createThumbShape=function(t){var e=n.theme,r=e.size,i=e.lineCap,o=void 0===i?"round":i,a={lineWidth:r,stroke:e.thumbColor,lineCap:o,cursor:"default"};return n.isHorizontal?t.addShape("line",{attrs:Es(Es({},a),{x1:n.thumbOffset,y1:r/2,x2:n.thumbOffset+n.thumbLen,y2:r/2})}):t.addShape("line",{attrs:Es(Es({},a),{x1:r/2,y1:n.thumbOffset,x2:r/2,y2:n.thumbOffset+n.thumbLen})})},n.bindEvents=function(){n.on("mousedown",n.onStartEvent(!1)),n.on("mouseup",n.onMouseUp),n.on("touchstart",n.onStartEvent(!0)),n.on("touchend",n.onMouseUp),n.trackShape.on("click",n.onTrackClick),n.thumbShape.on("mouseover",n.onTrackMouseOver),n.thumbShape.on("mouseout",n.onTrackMouseOut)},n.onStartEvent=function(t){return function(e){e.preventDefault(),n.isMobile=t;var r=n.isMobile?In(e,"touches.0",e):e,i=r.clientX,o=r.clientY;n.startPos=n.isHorizontal?i:o,n.bindLaterEvent()}},n.bindLaterEvent=function(){var t=n.get("canvas"),e=document.body,r=[];n.isMobile?(r=[n.addEventListener(e,"touchmove",n.onMouseMove),n.addEventListener(e,"touchend",n.onMouseUp),n.addEventListener(e,"touchcancel",n.onMouseUp)],n.addEvent(t,"touchend",n.onMouseUp),n.addEvent(t,"touchcancel",n.onMouseUp)):(r=[n.addEventListener(e,"mousemove",n.onMouseMove),n.addEventListener(e,"mouseup",n.onMouseUp),n.addEventListener(e,"mouseleave",n.onMouseUp)],n.addEvent(t,"mouseup",n.onMouseUp)),n.clearEvents=function(){r.forEach((function(t){null==t||t.remove()})),_o(n.eventHandlers,(function(t){var e;null===(e=t.target)||void 0===e||e.off(t.type,t.handler)})),n.eventHandlers.length=0}},n.onTrackClick=function(t){var e=n.get("canvas").get("container").getBoundingClientRect(),r=t.clientX,i=t.clientY,o=n.isHorizontal?r-e.left-n.position.x-n.thumbLen/2:i-e.top-n.position.y-n.thumbLen/2,a=n.validateRange(o);n.updateThumbOffset(a)},n.onMouseMove=function(t){t.preventDefault();var e=n.isMobile?In(t,"touches.0",t):t,r=e.clientX,i=e.clientY,o=n.isHorizontal?r:i,a=o-n.startPos;n.startPos=o,n.updateThumbOffset(n.thumbOffset+a)},n.onMouseUp=function(t){var e;n.emit(Uv.ScrollEnd,{}),t.preventDefault(),null===(e=n.clearEvents)||void 0===e||e.call(n)},n.onTrackMouseOver=function(){var t=n.theme,e=t.thumbHoverColor,r=t.hoverSize;n.thumbShape.attr("stroke",e),n.thumbShape.attr("lineWidth",r)},n.onTrackMouseOut=function(){var t=n.theme,e=t.thumbColor,r=t.size;n.thumbShape.attr("stroke",e),n.thumbShape.attr("lineWidth",r)},n.validateRange=function(t){var e=t;return t+n.thumbLen>n.trackLen?e=n.trackLen-n.thumbLen:t+n.thumbLen<n.thumbLen&&(e=0),e};var r=e.isHorizontal,i=void 0!==r&&r,o=e.trackLen,a=e.thumbLen,s=e.position,l=e.minThumbLen,u=void 0===l?32:l,h=e.thumbOffset,c=void 0===h?0:h,d=e.theme,p=e.scrollTargetMaxOffset;return n.isHorizontal=i,n.thumbOffset=c,n.trackLen=o,n.thumbLen=a,n.position=s,n.minThumbLen=u,n.theme=d,n.scrollTargetMaxOffset=p,n.initScrollBar(),n}return Ss(e,t),e}(ap),sy=function(t,e,n){var r=_s(n,4),i=r[0],o=r[1],a=r[2],s=r[3];return t>=i&&t<=o&&e>=a&&e<=s},ly=function(t){for(var e=_s(t,4),n=e[0],r=e[1],i=e[2],o=e[3],a=[],s=n;s<=r;s+=1)for(var l=i;l<=o;l+=1)a.push([s,l]);return a},uy=function(t,e){var n=[],r=[];return Object.keys(e).forEach((function(i){var o=function(t,e){var n=[],r=[];if(na(t))return na(e)?{add:n,remove:r}:{add:ly(e),remove:r};if(na(e))return{add:n,remove:ly(t)};for(var i=_s(t,4),o=i[0],a=i[1],s=i[2],l=i[3],u=_s(e,4),h=u[0],c=u[1],d=u[2],p=u[3],f=o;f<=a;f++)for(var v=s;v<=l;v++)sy(f,v,e)||r.push([f,v]);for(f=h;f<=c;f+=1)for(v=d;v<=p;v+=1)sy(f,v,t)||n.push([f,v]);return{add:n,remove:r}}((null==t?void 0:t[i])||[],e[i]),a=o.add,s=o.remove;n.push.apply(n,Ls([],_s(a),!1)),r.push.apply(r,Ls([],_s(s),!1))})),{add:n,remove:r}},hy=function(){function e(e){var n=this;this.scrollFrameId=null,this.hideScrollBar=function(){var t,e,r;null===(t=n.hRowScrollBar)||void 0===t||t.hide(),null===(e=n.hScrollBar)||void 0===e||e.hide(),null===(r=n.vScrollBar)||void 0===r||r.hide()},this.delayHideScrollBar=fo(this.hideScrollBar,1e3),this.delayHideScrollbarOnMobile=function(){ys()&&n.delayHideScrollBar()},this.showVerticalScrollBar=function(){var t;null===(t=n.vScrollBar)||void 0===t||t.show()},this.showHorizontalScrollBar=function(){var t,e;null===(t=n.hRowScrollBar)||void 0===t||t.show(),null===(e=n.hScrollBar)||void 0===e||e.show()},this.onContainerWheel=function(){n.onContainerWheelForPc(),n.onContainerWheelForMobile()},this.onContainerWheelForPc=function(){n.spreadsheet.container.get("el").addEventListener("wheel",n.onWheel)},this.onContainerWheelForMobile=function(){n.mobileWheel=new cg(n.spreadsheet.container),n.mobileWheel.on("wheel",(function(t){n.spreadsheet.hideTooltip();var e=t.event,r=t.deltaX,i=t.deltaY,o=t.x,a=t.y;n.onWheel(Es(Es({},e),{deltaX:r,deltaY:i,layerX:o/3,layerY:a/3}))}))},this.bindEvents=function(){n.onContainerWheel(),n.emitPaginationEvent()},this.setScrollOffset=function(t){Object.keys(t).forEach((function(e){var r=t[e];aa(r)||n.spreadsheet.store.set(e,Math.floor(r))}))},this.getScrollOffset=function(){var t=n.spreadsheet.store;return{scrollX:t.get("scrollX",0),scrollY:t.get("scrollY",0),hRowScrollX:t.get("hRowScrollX",0)}},this.emitPaginationEvent=function(){var e=n.cfg.pagination;if(e){var r=e.current,i=e.pageSize,o=n.viewCellHeights.getTotalLength(),a=Math.floor((o-1)/i)+1;n.cfg.spreadsheet.emit(t.S2Event.LAYOUT_PAGINATION,{pageSize:i,pageCount:a,total:o,current:r})}},this.unbindEvents=function(){n.spreadsheet.container.get("el").removeEventListener("wheel",n.onWheel),n.mobileWheel.destroy()},this.clipPanelGroup=function(){var t;n.foregroundGroup=n.spreadsheet.foregroundGroup,n.backgroundGroup=n.spreadsheet.backgroundGroup,n.panelGroup=n.spreadsheet.panelGroup;var e=n.panelBBox,r=e.width,i=e.height;null===(t=n.spreadsheet.panelScrollGroup)||void 0===t||t.setClip({type:"rect",attrs:{x:0,y:n.cornerBBox.height,width:r,height:i}})},this.calculateCellWidthHeight=function(){var t=ja(n.layoutResult.colLeafNodes,(function(t,e){return t.push(bo(t)+e.width),t}),[0]);n.viewCellWidths=t,n.viewCellHeights=n.getViewCellHeights(n.layoutResult)},this.getRealScrollX=function(t,e){return void 0===e&&(e=0),n.cfg.spreadsheet.isScrollContainsRowHeader()?t:e},this.calculatePanelBBox=function(){n.panelBBox=new oy(n,!0)},this.getRealWidth=function(){return bo(n.viewCellWidths)},this.getRealHeight=function(){var t=n.cfg.pagination,e=n.viewCellHeights;if(t){var r=n.getCellRange(),i=r.start,o=r.end;return e.getCellOffsetY(o+1)-e.getCellOffsetY(i)}return e.getTotalHeight()},this.clearAllGroup=function(){for(var t=n.panelGroup.cfg.children,e=t.length-1;e>=0;e--){var r=t[e];r instanceof ap?r.set("children",[]):t[e].remove()}n.foregroundGroup.set("children",[]),n.backgroundGroup.set("children",[])},this.scrollWithAnimation=function(t){var e=n.getAdjustedScrollOffset({scrollX:t.offsetX.value,scrollY:t.offsetY.value}),r=e.scrollX,i=e.scrollY;n.timer&&n.timer.stop();var o=Object.values(n.getScrollOffset()),a=lc(o,[void 0===r?o[0]:r,void 0===i?o[1]:i]);n.timer=Zu((function(t){var e=Math.min(t/200,1),o=_s(a(e),2),s=o[0],l=o[1];n.setScrollOffset({scrollX:s,scrollY:l}),n.startScroll(r,i),t>200&&n.timer.stop()}))},this.scrollImmediately=function(t){var e=n.getAdjustedScrollOffset({scrollX:t.offsetX.value,scrollY:t.offsetY.value}),r=e.scrollX,i=e.scrollY;n.setScrollOffset({scrollX:r,scrollY:i}),n.startScroll(r,i)},this.startScroll=function(t,e){var r,i,o=n.getScrollOffset(),a=o.scrollX,s=o.scrollY;void 0!==t&&(null===(r=n.hScrollBar)||void 0===r||r.onlyUpdateThumbOffset(n.getScrollBarOffset(a,n.hScrollBar))),void 0!==e&&(null===(i=n.vScrollBar)||void 0===i||i.onlyUpdateThumbOffset(n.getScrollBarOffset(s,n.vScrollBar))),n.dynamicRenderCell()},this.getRendererHeight=function(){var t=n.getCellRange(),e=t.start,r=t.end;return n.viewCellHeights.getCellOffsetY(r+1)-n.viewCellHeights.getCellOffsetY(e)},this.getAdjustedRowScrollX=function(t){return t+n.cornerBBox.width>=n.cornerBBox.originalWidth?n.cornerBBox.originalWidth-n.cornerBBox.width:t},this.getAdjustedScrollX=function(t){var e=n.layoutResult.colsHierarchy.width,r=n.panelBBox.width;return t+r>=e?e-r:t},this.getAdjustedScrollY=function(t){var e=n.getRendererHeight(),r=n.panelBBox.height;return t+r>=e?e-r:Math.max(0,t)},this.getAdjustedScrollOffset=function(t){var e=t.scrollX,r=t.scrollY,i=t.hRowScrollX;return{scrollX:n.getAdjustedScrollX(e),scrollY:n.getAdjustedScrollY(r),hRowScrollX:n.getAdjustedRowScrollX(i)}},this.renderRowScrollBar=function(t){if(!n.cfg.spreadsheet.isScrollContainsRowHeader()&&n.cornerBBox.width<n.cornerBBox.originalWidth){var e=n.cornerBBox.originalWidth-n.cornerBBox.width,r=n.cornerBBox.width*n.cornerBBox.width/n.cornerBBox.originalWidth;n.hRowScrollBar=new ay({isHorizontal:!0,trackLen:n.cornerBBox.width,thumbLen:r,position:{x:n.cornerBBox.minX+n.scrollBarSize/2,y:n.panelBBox.maxY},thumbOffset:t*(n.cornerBBox.width-r)/e,theme:n.scrollBarTheme,scrollTargetMaxOffset:e}),n.hRowScrollBar.on(Uv.ScrollChange,(function(t){var r,i=t.offset,o=n.getValidScrollBarOffset(i,e),a=o;n.setScrollOffset({hRowScrollX:a}),n.rowHeader.onRowScrollX(a,x),null===(r=n.rowIndexHeader)||void 0===r||r.onRowScrollX(a,S),n.centerFrame.onChangeShadowVisibility(a,n.cornerBBox.originalWidth-n.cornerBBox.width-2*n.scrollBarSize,!0),n.cornerHeader.onRowScrollX(a,E),n.hRowScrollBar.updateThumbOffset(n.getScrollBarOffset(o,n.hRowScrollBar),!1)})),n.foregroundGroup.add(n.hRowScrollBar)}},this.getValidScrollBarOffset=function(t,e){return t>e?e:t<0?0:t},this.renderHScrollBar=function(t,e,r){if(Math.floor(t)<Math.floor(e)){var i=n.scrollBarSize/2,o=t+(n.cfg.spreadsheet.isScrollContainsRowHeader()?n.cornerBBox.width:0),a={x:n.panelBBox.minX+(n.cfg.spreadsheet.isScrollContainsRowHeader()?-n.cornerBBox.width+i:i),y:n.panelBBox.maxY},s=e+(n.cfg.spreadsheet.isScrollContainsRowHeader()?n.cornerBBox.width:0),l=s-o,u=o/s*o;n.hScrollBar=new ay({isHorizontal:!0,trackLen:o,thumbLen:u,position:a,thumbOffset:r*(o-u)/l,theme:n.scrollBarTheme,scrollTargetMaxOffset:l}),n.hScrollBar.on(Uv.ScrollChange,(function(t){var e=t.offset,r=t.updateThumbOffset,i=n.getValidScrollBarOffset(e,l);r&&n.hScrollBar.updateThumbOffset(n.getScrollBarOffset(i,n.hScrollBar),!1),n.setScrollOffset({scrollX:i}),n.dynamicRenderCell()})),n.foregroundGroup.add(n.hScrollBar)}},this.renderVScrollBar=function(t,e,r){if(t<e){var i=Math.max(t/e*t,32),o=e-t;n.vScrollBar=new ay({isHorizontal:!1,trackLen:t,thumbLen:i,thumbOffset:r*(t-i)/o,position:{x:n.panelBBox.maxX-n.scrollBarSize,y:n.panelBBox.minY},theme:n.scrollBarTheme,scrollTargetMaxOffset:o}),n.vScrollBar.on(Uv.ScrollChange,(function(t){var e=t.offset,r=t.updateThumbOffset,i=n.getValidScrollBarOffset(e,o);r&&n.vScrollBar.updateThumbOffset(n.getScrollBarOffset(i,n.vScrollBar),!1),n.setScrollOffset({scrollY:i}),n.dynamicRenderCell()})),n.foregroundGroup.add(n.vScrollBar)}},this.getScrollBarOffset=function(t,e){return t*(e.trackLen-e.thumbLen)/e.scrollTargetMaxOffset},this.isScrollOverThePanelArea=function(t){var e=t.layerX,r=t.layerY;return e>n.panelBBox.minX&&e<n.panelBBox.maxX&&r>n.panelBBox.minY&&r<n.panelBBox.maxY},this.isScrollOverTheCornerArea=function(t){var e=t.layerX,r=t.layerY;return e>n.cornerBBox.minX&&e<n.cornerBBox.maxX&&r>n.cornerBBox.minY&&r<n.cornerBBox.maxY+n.panelBBox.height},this.updateHorizontalRowScrollOffset=function(t){var e,r=t.offset,i=t.layerX,o=t.layerY;n.isScrollOverTheCornerArea({layerX:i,layerY:o})&&(null===(e=n.hRowScrollBar)||void 0===e||e.emitScrollChange(r))},this.updateHorizontalScrollOffset=function(t){var e,r=t.offset,i=t.layerX,o=t.layerY;n.hRowScrollBar&&!n.isScrollOverThePanelArea({layerX:i,layerY:o})||null===(e=n.hScrollBar)||void 0===e||e.emitScrollChange(r)},this.isScrollToLeft=function(t){if(!n.hScrollBar)return!0;var e=!n.hRowScrollBar||n.hRowScrollBar.thumbOffset<=0;return t<=0&&n.hScrollBar.thumbOffset<=0&&e},this.isScrollToRight=function(t){var e,r;if(!n.hScrollBar)return!0;var i=n.spreadsheet.isFrozenRowHeader()?null===(e=n.panelBBox)||void 0===e?void 0:e.width:null===(r=n.panelBBox)||void 0===r?void 0:r.maxX,o=!n.hRowScrollBar||n.hRowScrollBar.thumbOffset+n.hRowScrollBar.thumbLen>=n.cornerBBox.width,a=n.hScrollBar.thumbOffset+n.hScrollBar.thumbLen>=i;return t>=0&&a&&o},this.isScrollToTop=function(t){var e;return!n.vScrollBar||t<=0&&(null===(e=n.vScrollBar)||void 0===e?void 0:e.thumbOffset)<=0},this.isScrollToBottom=function(t){var e,r,i;return!n.vScrollBar||t>=0&&(null===(e=n.vScrollBar)||void 0===e?void 0:e.thumbOffset)+(null===(r=n.vScrollBar)||void 0===r?void 0:r.thumbLen)>=(null===(i=n.panelBBox)||void 0===i?void 0:i.height)},this.isVerticalScrollOverTheViewport=function(t){return!n.isScrollToTop(t)&&!n.isScrollToBottom(t)},this.isHorizontalScrollOverTheViewport=function(t){return!n.isScrollToLeft(t)&&!n.isScrollToRight(t)},this.isScrollOverTheViewport=function(t,e,r){return!(r<=n.cornerBBox.maxY)&&(0!==e?n.isVerticalScrollOverTheViewport(e):0!==t&&n.isHorizontalScrollOverTheViewport(t))},this.onWheel=function(e){var r,i=n.cfg.interaction.scrollSpeedRatio,o=e.deltaX,a=e.deltaY,s=e.layerX,l=e.layerY,u=_s(function(t,e,n){var r=Math.abs(t/e),i=r>2?0:e;return[(r<=.5?0:t)*n.horizontal,i*n.vertical]}(o,a,i),2),h=u[0],c=u[1];n.spreadsheet.hideTooltip(),n.spreadsheet.interaction.clearHoverTimer(),n.isScrollOverTheViewport(h,c,l)&&(null===(r=e.preventDefault)||void 0===r||r.call(e),n.spreadsheet.interaction.addIntercepts([t.InterceptType.HOVER]),cancelAnimationFrame(n.scrollFrameId),n.scrollFrameId=requestAnimationFrame((function(){var t,e=n.getScrollOffset(),r=e.scrollX,i=e.scrollY,o=e.hRowScrollX;0!==h&&(n.showHorizontalScrollBar(),n.updateHorizontalRowScrollOffset({layerX:s,layerY:l,offset:h+o}),n.updateHorizontalScrollOffset({layerX:s,layerY:l,offset:h+r})),0!==c&&(n.showVerticalScrollBar(),null===(t=n.vScrollBar)||void 0===t||t.emitScrollChange(c+i)),n.delayHideScrollbarOnMobile()})))},this.addCell=function(t){var e=n.spreadsheet.panelScrollGroup;null==e||e.add(t)},this.realCellRender=function(t,e){var r=n.calculateXYIndexes(t,e),i=uy(n.preCellIndexes,r),o=i.add,a=i.remove;Ys.getInstance().debugCallback(Ws,(function(){_o(o,(function(t){var e=_s(t,2),r=e[0],i=e[1],o=n.layoutResult.getCellMeta(i,r);if(o){var a=n.cfg.dataCell(o);a.set("name","".concat(r,"-").concat(i)),n.addCell(a)}}));var t=Kg(n.panelGroup.getChildren());_o(a,(function(e){var n=_s(e,2),r=n[0],i=n[1],o=No(t,(function(t){return t.get("name")==="".concat(r,"-").concat(i)}));null==o||o.remove(!0)})),ov(n.spreadsheet)})),n.preCellIndexes=r},this.debounceRenderCell=function(t,e){n.realCellRender(t,e)},this.onAfterScroll=fo((function(){n.spreadsheet.interaction.removeIntercepts([t.InterceptType.HOVER])}),300),this.cfg=e,this.spreadsheet=e.spreadsheet,this.init()}return Object.defineProperty(e.prototype,"scrollBarTheme",{get:function(){return this.spreadsheet.theme.scrollBar},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scrollBarSize",{get:function(){return this.scrollBarTheme.size},enumerable:!1,configurable:!0}),e.prototype.render=function(){this.adjustScrollOffset(),this.renderHeaders(),this.renderScrollBars(),this.renderBackground(),this.dynamicRenderCell(!1)},e.prototype.adjustScrollOffset=function(){var t=this.getAdjustedScrollOffset(this.getScrollOffset()),e=t.scrollX,n=t.scrollY,r=t.hRowScrollX;this.setScrollOffset({scrollX:e,scrollY:n,hRowScrollX:r})},e.prototype.getSeriesNumberWidth=function(){return this.spreadsheet.options.showSeriesNumber?this.spreadsheet.theme.rowCell.seriesNumberWidth:0},e.prototype.getCanvasHW=function(){return{width:this.cfg.width,height:this.cfg.height}},e.prototype.getContentHeight=function(){var t=this.layoutResult,e=t.rowsHierarchy,n=t.colsHierarchy;return e.height+n.height},e.prototype.updateScrollOffset=function(t){void 0===t.offsetX.value?void 0!==t.offsetY.value&&(t.offsetY.animate?this.scrollWithAnimation(t):this.scrollImmediately(t)):t.offsetX.animate?this.scrollWithAnimation(t):this.scrollImmediately(t)},e.prototype.getPaginationScrollY=function(){var t=this.cfg.pagination;if(t){var e=t.current,n=t.pageSize,r=this.viewCellHeights,i=Math.max((e-1)*n,0);return r.getCellOffsetY(i)}return 0},e.prototype.destroy=function(){this.unbindEvents(),this.clearAllGroup(),this.preCellIndexes=null},e.prototype.calculateXYIndexes=function(t,e){return{center:mg(t,e,this.viewCellWidths,this.viewCellHeights,this.panelBBox,this.getRealScrollX(this.cornerBBox.width))}},e.prototype.calculateCornerBBox=function(){this.cornerBBox=new iy(this,!0)},e.prototype.getCellRange=function(){var t=this.cfg.pagination;return function(t,e){var n=t,r=0,i=n.getTotalLength()-1;if(e){var o=e.current,a=e.pageSize;r=Math.max((o-1)*a,0),i=Math.min(o*a-1,n.getTotalLength()-1)}return{start:r,end:i}}(this.viewCellHeights,t)},e.prototype.clip=function(t,e){var n,r=this.cfg.spreadsheet.isFrozenRowHeader();null===(n=this.spreadsheet.panelScrollGroup)||void 0===n||n.setClip({type:"rect",attrs:{x:r?t:0,y:e,width:this.panelBBox.width+(r?0:t),height:this.panelBBox.height}})},e.prototype.translateRelatedGroups=function(t,e,n){var r;Cg(this.spreadsheet.panelScrollGroup,this.cornerBBox.width-t,this.cornerBBox.height-e),this.rowHeader.onScrollXY(this.getRealScrollX(t,n),e,x),null===(r=this.rowIndexHeader)||void 0===r||r.onScrollXY(this.getRealScrollX(t,n),e,S),this.cornerHeader.onCorScroll(this.getRealScrollX(t,n),E),this.centerFrame.onChangeShadowVisibility(t,this.getRealWidth()-this.panelBBox.width,!1),this.centerFrame.onBorderScroll(this.getRealScrollX(t)),this.columnHeader.onColScroll(t,T)},e.prototype.init=function(){var e=this;Ys.getInstance().debugCallback(Gs,(function(){e.layoutResult=e.doLayout(),e.spreadsheet.emit(t.S2Event.LAYOUT_AFTER_HEADER_LAYOUT,e.layoutResult)})),this.calculateCellWidthHeight(),this.calculateCornerBBox(),this.calculatePanelBBox(),this.clipPanelGroup(),this.bindEvents()},e.prototype.renderBackground=function(){var t=this.getCanvasHW(),e=t.width,n=t.height,r=In(this.cfg,"spreadsheet.theme.background.color"),i=In(this.cfg,"spreadsheet.theme.background.opacity");this.backgroundGroup.addShape("rect",{attrs:{fill:r,opacity:i,x:0,y:0,width:e,height:n}})},e.prototype.renderScrollBars=function(){var t=this.getScrollOffset(),e=t.scrollX,n=t.scrollY,r=t.hRowScrollX,i=this.panelBBox,o=i.width,a=i.height,s=this.layoutResult.colsHierarchy.width,l=this.getRealHeight();this.renderRowScrollBar(r),this.renderHScrollBar(o,s,e),this.renderVScrollBar(a,l,n)},e.prototype.renderHeaders=function(){var t=this.getSeriesNumberWidth();this.rowHeader=this.getRowHeader(),this.columnHeader=this.getColHeader(),t>0&&(this.rowIndexHeader=this.getSeriesNumberHeader(),this.foregroundGroup.add(this.rowIndexHeader)),this.cornerHeader=this.getCornerHeader(),this.centerFrame=this.getCenterFrame(),this.foregroundGroup.add(this.rowHeader),this.foregroundGroup.add(this.columnHeader),this.foregroundGroup.add(this.cornerHeader),this.foregroundGroup.add(this.centerFrame)},e.prototype.getRowHeader=function(){var t,e,n;if(!this.rowHeader){var r=this.panelBBox,i=r.y,o=r.width,a=r.height,s=this.getSeriesNumberWidth();return new Ug({width:this.cornerBBox.width,height:a,viewportWidth:o,viewportHeight:a,position:{x:0,y:i},data:this.layoutResult.rowNodes,hierarchyType:this.cfg.hierarchyType,linkFields:null!==(n=null===(e=null===(t=this.cfg.spreadsheet.options)||void 0===t?void 0:t.interaction)||void 0===e?void 0:e.linkFields)&&void 0!==n?n:[],seriesNumberWidth:s,spreadsheet:this.spreadsheet})}return this.rowHeader},e.prototype.getColHeader=function(){var t=this;if(!this.columnHeader){var e=this.panelBBox,n=e.x,r=e.width,i=e.height;return new Yg({width:r,cornerWidth:this.cornerBBox.width,height:this.cornerBBox.height,viewportWidth:r,viewportHeight:i,position:{x:n,y:0},data:this.layoutResult.colNodes,scrollContainsRowHeader:this.cfg.spreadsheet.isScrollContainsRowHeader(),formatter:function(e){return t.cfg.dataSet.getFieldFormatter(e)},sortParam:this.cfg.spreadsheet.store.get("sortParam"),spreadsheet:this.spreadsheet})}return this.columnHeader},e.prototype.getCornerHeader=function(){return this.cornerHeader?this.cornerHeader:Vg.getCornerHeader(this.panelBBox,this.cornerBBox,this.getSeriesNumberWidth(),this.cfg,this.layoutResult,this.spreadsheet)},e.prototype.getSeriesNumberHeader=function(){return jg.getSeriesNumberHeader(this.panelBBox,this.getSeriesNumberWidth(),this.layoutResult.rowsHierarchy.getNodes(0),this.spreadsheet,this.cornerBBox.width)},e.prototype.getCenterFrame=function(){var t;if(!this.centerFrame){var e=this.panelBBox,n=e.width,r=e.height,i=this.cornerBBox.width,o=this.cornerBBox.height,a=null===(t=this.cfg)||void 0===t?void 0:t.frame,s={position:{x:this.cornerBBox.x,y:this.cornerBBox.y},width:i,height:o,viewportWidth:n,viewportHeight:r,showCornerRightShadow:!oa(this.hRowScrollBar),showViewPortRightShadow:!oa(this.hRowScrollBar)&&!oa(this.hScrollBar),scrollContainsRowHeader:this.cfg.spreadsheet.isScrollContainsRowHeader(),isPivotMode:this.cfg.spreadsheet.isPivotMode(),spreadsheet:this.cfg.spreadsheet};return a?a(s):new Xg(s)}return this.centerFrame},e.prototype.dynamicRenderCell=function(e){void 0===e&&(e=!0);var n=this.getScrollOffset(),r=n.scrollX,i=n.scrollY,o=n.hRowScrollX,a=i+this.getPaginationScrollY(),s=this.viewCellHeights.getTotalHeight()-this.panelBBox.height;a>s&&(a=s),e?this.debounceRenderCell(r,a):this.realCellRender(r,a),this.translateRelatedGroups(r,a,o),this.clip(r,a),this.spreadsheet.emit(t.S2Event.LAYOUT_CELL_SCROLL,{scrollX:r,scrollY:a}),this.onAfterScroll()},e}(),cy=function(t){var e,n,r,i,o,a,s=t.parentNode,l=t.currentField,u=t.level,h=t.facetCfg,c=t.hierarchy,d=t.pivotMeta,p=h.spreadsheet,f=h.dataSet,v=h.collapsedRows,g=h.hierarchyCollapse,y=s.query,m=s.id,C=(null===(i=p.dataCfg.fields.rows)||void 0===i?void 0:i.length)<=u,w=(null===(a=null===(o=f)||void 0===o?void 0:o.sortedDimensionValues)||void 0===a?void 0:a[l])||[],x=null==w?void 0:w.filter((function(t){return null==t?void 0:t.includes(null==m?void 0:m.split("root".concat(A))[1])})),S=Qp(Zp(Ls([],_s(d.keys()||[]),!1),Ls([],_s(Fv(x)),!1))),E=Bs(S,h,s,l),T=p.store.get("drillItemsNum");T&&C&&(E=E.slice(0,T)),0===u&&function(t,e,n){var r=t.getTotalsConfig(e);r.showGrandTotals&&n[r.reverseLayout?"unshift":"push"](new Rs(r.label,!1,!0))}(p,l,E);try{for(var b=bs(E),_=b.next();!_.done;_=b.next()){var L=_.value,O=L instanceof Rs,I=O?null:d.get(L),R=void 0,M=y,B=!1,D=!1;if(O){var N=L;B=N.isGrandTotals,D=N.isSubTotals,R=ls(L.label),M=y}else M=va({},y,((r={})[l]=R=L,r));var P=As(s.id,R,p),k=v[P],z=ta(k)?k:g,F=new Os({id:P,key:l,label:R,value:R,level:u,parent:s,field:l,isTotals:O,isGrandTotals:B,isSubTotals:D,isCollapsed:z,hierarchy:c,query:M,spreadsheet:p}),H=na(null==I?void 0:I.children);(H||O)&&(F.isLeaf=!0),H||(F.isTotals=!0);var G=Ds(h,s,F,c);H||z||O||!G||cy({level:u+1,currentField:I.childField,pivotMeta:I.children,facetCfg:h,parentNode:F,hierarchy:c})}}catch(t){e={error:t}}finally{try{_&&!_.done&&(n=b.return)&&n.call(b)}finally{if(e)throw e.error}}},dy=function(t){var e,n,r,i=t.facetCfg,o=t.customTreeItems,a=t.level,s=t.parentNode,l=t.hierarchy,u=i.spreadsheet,h=i.collapsedRows,c=i.hierarchyCollapse;try{for(var d=bs(o),p=d.next();!p.done;p=d.next()){var f=p.value,v=f.key,g=f.title,y=f.collapsed,m=f.children,C=((r={}).$$extra$$=v,r),w=As(s.id,g,u),x=!aa(y)&&y,S=void 0,E=h[w],T=ta(E),b=new Os({id:w,key:v,label:g,value:g,level:a,parent:s,field:v,isTotals:!1,isCollapsed:S=c?T?E:c:T?E:x,hierarchy:l,query:C,spreadsheet:u});l.pushNode(b),na(m)&&(b.isLeaf=!0),na(m)||S||dy({facetCfg:i,parentNode:b,level:a+1,hierarchy:l,customTreeItems:m})}}catch(t){e={error:t}}finally{try{p&&!p.done&&(n=d.return)&&n.call(d)}finally{if(e)throw e.error}}},py=function(t){var e,n,r=t.isValueInCols,i=t.moreThanOneValue,o=t.rootNode,a=t.facetCfg,s=t.hierarchy,l=t.fields;t.isRowHeader?(e=!r&&i,n=!r&&!i):(e=r&&i,n=r&&!i),ks({addTotalMeasureInTotal:e,addMeasureInTotalQuery:n,parentNode:o,currentField:l[0],fields:l,facetCfg:a,hierarchy:s})},fy=function(t){var e=t.facetCfg,n=t.rootNode,r=t.hierarchy,i=e.hierarchyType,o=e.rows,a=e.dataSet;"tree"===i?cy({level:0,currentField:o[0],pivotMeta:a.rowPivotMeta,facetCfg:e,parentNode:n,hierarchy:r}):function(t){var e=t.facetCfg,n=t.rootNode,r=t.hierarchy,i=e.dataSet.fields.customTreeItems;dy({customTreeItems:i,facetCfg:e,level:0,parentNode:n,hierarchy:r})}(t)},vy=function(t){var e=t.isRowHeader,n=t.facetCfg,r=n.spreadsheet,i=n.rows,o=void 0===i?[]:i,a=n.columns,s=void 0===a?[]:a,l=r.dataCfg.fields.valueInCols,u=r.isPivotMode(),h=n.dataSet.moreThanOneValue(),c=Os.rootNode(),d=new Is,p={isValueInCols:l,isPivotMode:u,moreThanOneValue:h,rootNode:c,hierarchy:d,spreadsheet:r,facetCfg:n,fields:e?o:s,isRowHeader:e};e?function(t){t.spreadsheet.isHierarchyTreeType()?fy(t):py(t)}(p):function(t){var e=t.isPivotMode,n=t.hierarchy,r=t.rootNode,i=t.facetCfg;e?py(t):Fs({parentNode:r,hierarchy:n,facetCfg:i})}(p);return{hierarchy:d,leafNodes:e&&r.isHierarchyTreeType()?d.getNodes():d.getLeaves()}},gy=function(t,e,n){return t.filter((function(t){return t.level>=e})).map((function(t){return t[n]})).reduce((function(t,e){return t+e}),0)},yy=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return Ss(n,e),Object.defineProperty(n.prototype,"rowCellTheme",{get:function(){return this.spreadsheet.theme.rowCell.cell},enumerable:!1,configurable:!0}),n.prototype.doLayout=function(){var t=vy({isRowHeader:!0,facetCfg:this.cfg}),e=t.leafNodes,n=t.hierarchy,r=vy({isRowHeader:!1,facetCfg:this.cfg}),i=r.leafNodes,o=r.hierarchy;this.calculateNodesCoordinate(e,n,i,o);var a=this.cfg,u=a.dataSet,h=a.spreadsheet,c={colNodes:o.getNodes(),colsHierarchy:o,rowNodes:n.getNodes(),rowsHierarchy:n,rowLeafNodes:e,colLeafNodes:i,getCellMeta:function(t,n){var r,o,a,c=t||0,d=n||0,p=e[c],f=i[d];if(!p||!f)return null;var v,g=p.query,y=f.query,m=p.isTotals||p.isTotalMeasure||f.isTotals||f.isTotalMeasure,C=null!==(o=In(h,"facet.cfg.colCfg.hideMeasureColumn"))&&void 0!==o&&o?((r={}).$$extra$$=null===(a=u.fields.values)||void 0===a?void 0:a[0],r):{},w=va({},g,y,C),x=u.getCellData({query:w,rowNode:p,isTotals:m}),S=null;return na(x)?v=In(w,[l],""):(v=In(x,[l],""),S=In(x,[s],null),m&&(v=In(w,[l],""),S=In(x,v,null))),{spreadsheet:h,x:f.x,y:p.y,width:f.width,height:p.height,data:x,rowIndex:c,colIndex:d,isTotals:m,valueField:v,fieldValue:S,rowQuery:g,colQuery:y,rowId:p.id,colId:f.id,id:Uf(p.id,f.id)}},spreadsheet:h};return function(t,e){var n=null==t?void 0:t.layoutDataPosition;if(n){var r=e.getCellMeta,i=n(t.spreadsheet,r);return Es(Es({},e),{getCellMeta:i})}return e}(this.cfg,c)},n.prototype.fireReachBorderEvent=function(e,n){var r=this,i=this.spreadsheet.getColumnNodes().find((function(t){return $o(r.getScrollColField(),t.field)&&e>t.x&&e<t.x+t.width})),o=this.spreadsheet.getRowNodes().find((function(t){return $o(r.getScrollRowField(),t.field)&&n>t.y&&n<t.y+t.height})),a=this.spreadsheet.store.get("lastReachedBorderId",{rowId:"",colId:""});i&&a.colId!==i.id&&(this.spreadsheet.store.set("lastReachedBorderId",va({},a,{colId:i.id})),this.spreadsheet.emit(t.S2Event.LAYOUT_COL_NODE_BORDER_REACHED,i)),o&&a.rowId!==o.id&&(this.spreadsheet.store.set("lastReachedBorderId",va({},a,{rowId:o.id})),this.spreadsheet.emit(t.S2Event.LAYOUT_ROW_NODE_BORDER_REACHED,o))},n.prototype.calculateNodesCoordinate=function(t,e,n,r){this.calculateRowNodesCoordinate(t,e,n),this.calculateColNodesCoordinate(n,r,e.width)},n.prototype.calculateColNodesCoordinate=function(t,e,n){var r,i,o,a,s=this.cfg.spreadsheet,l=Os.blankNode(),u=e.getNodes();try{for(var h=bs(e.sampleNodesForAllLevels),c=h.next();!c.done;c=h.next()){var d=c.value;d.height=this.getColNodeHeight(d),e.height+=d.height}}catch(t){r={error:t}}finally{try{c&&!c.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}for(var p=0,f=function(r){var i=u[r];if(i.isLeaf&&(i.colIndex=p,p+=1,i.x=l.x+l.width,i.width=v.calculateColLeafNodesWidth(i,t,n),e.width+=i.width,l=i),0===i.level)i.y=0;else{var a=e.sampleNodesForAllLevels.find((function(t){return t.level===i.level-1}));i.y=null!==(o=(null==a?void 0:a.y)+(null==a?void 0:a.height))&&void 0!==o?o:0}i.height=v.getColNodeHeight(i),Ns(v.cfg,null,i)},v=this,g=0;g<u.length;g++)f(g);this.autoCalculateColNodeWidthAndX(t),na(null===(a=s.options.totals)||void 0===a?void 0:a.col)||(this.adustTotalNodesCoordinate(e),this.adjustSubTotalNodesCoordinate(e))},n.prototype.autoCalculateColNodeWidthAndX=function(t){for(var e=null,n=t.slice(0);n.length;){var r=n.shift().parent;e!==r&&r&&(n.push(r),r.x=r.children[0].x,r.width=r.children.map((function(t){return t.width})).reduce((function(t,e){return t+e}),0),e=r)}},n.prototype.calculateColLeafNodesWidth=function(e,n,r){var i,o,a,s=this.cfg,l=s.colCfg,u=s.dataSet,h=s.filterDisplayDataItem,c=In(In(l,"widthByFieldValue"),"".concat(e.value),e.width);if(c)return c;if(this.spreadsheet.getLayoutWidthType()===t.LayoutWidthTypes.Compact){var d=u.getMultiData(e.query,e.isTotals||e.isTotalMeasure),p=e.label,f=null===(i=d.map((function(t){return"".concat(Wf(t,h))})))||void 0===i?void 0:i.slice(0,50);f.push(p);var v=pa(f,(function(t){return mf(t)})),g=this.spreadsheet.theme.colCell,y=g.bolderText,m=g.cell;return Ys.getInstance().logger("Max Label In Col:",e.field,v),gf(v,y)+(null===(o=m.padding)||void 0===o?void 0:o.left)+(null===(a=m.padding)||void 0===a?void 0:a.right)}return this.spreadsheet.isHierarchyTreeType()?this.getAdaptTreeColWidth(n):this.getAdaptGridColWidth(n,r)},n.prototype.getColNodeHeight=function(t){var e=this.cfg.colCfg;return In(e,"heightByField.".concat(t.key))||e.height},n.prototype.calculateRowNodesCoordinate=function(t,e,n){var r,i,o,a,s,l,u,h=this.cfg,c=h.cellCfg,d=h.spreadsheet,p=d.isHierarchyTreeType();if(p)e.width=this.getTreeRowHeaderWidth();else try{for(var f=bs(e.sampleNodesForAllLevels),v=f.next();!v.done;v=f.next()){var g=v.value;g.width=this.calculateRowLeafNodesWidth(g,n),e.width+=g.width}}catch(t){r={error:t}}finally{try{v&&!v.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}for(var y=Os.blankNode(),m=e.getNodes(),C=function(t){var r=m[t];if((p||!p&&r.isLeaf)&&(null!==(o=r.rowIndex)&&void 0!==o||(r.rowIndex=t),null!==(a=r.colIndex)&&void 0!==a||(r.colIndex=t),r.y=y.y+y.height,r.height=c.height+(null===(s=w.rowCellTheme.padding)||void 0===s?void 0:s.top)+(null===(l=w.rowCellTheme.padding)||void 0===l?void 0:l.bottom),y=r,e.height+=r.height),p||0===r.level)r.x=0;else{var i=e.sampleNodesForAllLevels.find((function(t){return t.level===r.level-1}));r.x=(null==i?void 0:i.x)+(null==i?void 0:i.width)}r.width=w.calculateRowLeafNodesWidth(r,n),Ns(w.cfg,r,null)},w=this,x=0;x<m.length;x++)C(x);p||(this.autoCalculateRowNodeHeightAndY(t),na(null===(u=d.options.totals)||void 0===u?void 0:u.row)||(this.adustTotalNodesCoordinate(e,!0),this.adjustSubTotalNodesCoordinate(e,!0)))},n.prototype.autoCalculateRowNodeHeightAndY=function(t){for(var e=null,n=t.slice(0);n.length;){var r=n.shift().parent;e!==r&&r&&(n.push(r),r.y=r.children[0].y,r.height=r.children.map((function(t){return t.height})).reduce((function(t,e){return t+e}),0),e=r)}},n.prototype.adustTotalNodesCoordinate=function(t,e){var n=t.maxLevel,r=No(t.getNodes(0),(function(t){return t.isGrandTotals}));if(r instanceof Os){var i=r.children;e?(r.width=t.width,_o(i,(function(e){e.x=t.getNodes(n)[0].x}))):(n>1||n<=1&&!this.cfg.dataSet.moreThanOneValue())&&(r.height=t.height,_o(i,(function(e){e.y=t.getNodes(n)[0].y})))}},n.prototype.adjustSubTotalNodesCoordinate=function(t,e){var n=t.getNodes().filter((function(t){return t.isSubTotals}));if(!na(n)){var r=t.maxLevel;_o(n,(function(n){var i=n.children;e?(n.width=gy(t.sampleNodesForAllLevels,n.level,"width"),_o(i,(function(e){e.x=t.getNodes(r)[0].x}))):(n.height=gy(t.sampleNodesForAllLevels,n.level,"height"),_o(i,(function(e){e.y=t.getNodes(r)[0].y})))}))}},n.prototype.calculateRowLeafNodesWidth=function(e,n){var r=this.cfg,i=r.rowCfg,o=r.spreadsheet;if(o.isHierarchyTreeType())return this.getTreeRowHeaderWidth();var a=In(i,"widthByField.".concat(e.key));return a||(o.getLayoutWidthType()!==t.LayoutWidthTypes.Adaptive?this.getCompactGridRowWidth(e):this.getAdaptGridColWidth(n))},n.prototype.getAdaptTreeColWidth=function(t){var e=this.getCanvasHW().width,n=Math.min(e/2,this.getTreeRowHeaderWidth()),r=Math.max(1,t.length),i=this.cfg.cellCfg;return Math.max(i.width,(e-n)/r)},n.prototype.getAdaptGridColWidth=function(t,e){var n=this.cfg,r=n.rows,i=n.cellCfg,o=r.length,a=t.length,s=this.getCanvasHW().width,l=Math.max(1,o+a);return e?Math.max(i.width,(s-e)/a):Math.max(i.width,s/l)},n.prototype.getTreeRowHeaderWidth=function(){var t,e,n,r,i=this.cfg,o=i.rows,a=i.dataSet,s=i.rowCfg,l=i.treeRowsWidth;if(s.treeRowsWidth)return s.treeRowsWidth;var u=o.map((function(t){return a.getFieldName(t)})).join("/"),h=this.spreadsheet.theme.cornerCell,c=h.bolderText,d=h.icon,p=gf(u,c)+2*d.size+(null===(t=d.margin)||void 0===t?void 0:t.left)+(null===(e=d.margin)||void 0===e?void 0:e.right)+(null===(n=this.rowCellTheme.padding)||void 0===n?void 0:n.left)+(null===(r=this.rowCellTheme.padding)||void 0===r?void 0:r.right),f=Math.max(l,p);return s.treeRowsWidth=f,f},n.prototype.getCompactGridRowWidth=function(t){var e,n,r,i=this.cfg,o=i.dataSet,a=i.spreadsheet,s=t.field,l=pa(null===(e=o.getDimensionValues(t.field))||void 0===e?void 0:e.slice(0,50),(function(t){return"".concat(t).length})),u=o.getFieldName(s),h=mf(l)>mf(u)?l:u,c=a.theme.rowCell.bolderText;return Ys.getInstance().logger("Max Label In Row:",s,h),gf(h,c)+(null===(n=this.rowCellTheme.padding)||void 0===n?void 0:n.left)+(null===(r=this.rowCellTheme.padding)||void 0===r?void 0:r.right)},n.prototype.getScrollColField=function(){return In(this.spreadsheet,"options.scrollReachNodeField.colField",[])},n.prototype.getScrollRowField=function(){return In(this.spreadsheet,"options.scrollReachNodeField.rowField",[])},n.prototype.getViewCellHeights=function(t){var e=ja(t.rowLeafNodes,(function(t,e){return t.push(bo(t)+e.height),t}),[0]);return{getTotalHeight:function(){return bo(e)},getCellOffsetY:function(t){return e[t]},getTotalLength:function(){return e.length},getIndexRange:function(t,n){var r=Bo(e,(function(n,r){return t>=n&&t<e[r+1]}),0);r=Math.max(r,0);var i=Bo(e,(function(t,r){return n>=t&&n<e[r+1]}),r);return{start:r,end:i=Math.min(-1===i?1/0:i,e.length-2)}}}},n}(hy),my=function(t){function e(e){var n,r=t.call(this,e)||this,i=null===(n=r.headerConfig.spreadsheet)||void 0===n?void 0:n.options,o=i.frozenColCount,a=i.frozenTrailingColCount;return o&&(r.frozenColGroup=r.addGroup({name:L,zIndex:4})),a&&(r.frozenTrailingColGroup=r.addGroup({name:O,zIndex:4})),r}return Ss(e,t),e.prototype.isFrozenCell=function(t){var e=this.headerConfig.spreadsheet,n=null==e?void 0:e.options,r=n.frozenColCount,i=n.frozenTrailingColCount,o=t.colIndex,a=null==e?void 0:e.facet.layoutResult.colLeafNodes;return fg(o,r)||vg(o,i,a.length)},e.prototype.clear=function(){var e,n,r=this.headerConfig.spreadsheet;t.prototype.clear.call(this),null===(e=this.frozenTrailingColGroup)||void 0===e||e.clear(),null===(n=this.frozenColGroup)||void 0===n||n.clear();var i=null==r?void 0:r.foregroundGroup.findById(b);null==i||i.clear()},e.prototype.getCellInstance=function(t,e,n){return t.field===h?new Og(t,e,n):new Lg(t,e,n)},e.prototype.getCellGroup=function(t){var e,n=this.headerConfig.spreadsheet,r=null==n?void 0:n.options,i=r.frozenColCount,o=r.frozenTrailingColCount,a=null===(e=null==n?void 0:n.facet)||void 0===e?void 0:e.layoutResult.colLeafNodes.length;return fg(t.colIndex,i)?this.frozenColGroup:vg(t.colIndex,o,a)?this.frozenTrailingColGroup:this.scrollGroup},e.prototype.isColCellInRect=function(e){var n,r=this.headerConfig.spreadsheet,i=null==r?void 0:r.options,o=i.frozenColCount,a=i.frozenTrailingColCount,s=null===(n=null==r?void 0:r.facet)||void 0===n?void 0:n.layoutResult.colLeafNodes.length;return!(!fg(e.colIndex,o)&&!vg(e.colIndex,a,s))||t.prototype.isColCellInRect.call(this,e)},e.prototype.clip=function(){for(var t,e=this.headerConfig,n=e.width,r=e.height,i=e.scrollX,o=e.spreadsheet,a=o.options,s=a.frozenColCount,l=a.frozenTrailingColCount,u=null===(t=o.facet)||void 0===t?void 0:t.layoutResult.colLeafNodes,h=0,c=0,d=0;d<s;d++)h+=u[d].width;for(d=0;d<l;d++)c+=u[u.length-1-d].width;var p=n-h-c;this.scrollGroup.setClip({type:"rect",attrs:{x:i+h,y:0,width:p,height:r}})},e}(Yg),Cy=function(e){function n(n){var r=e.call(this,n)||this;r.initFrozenGroupPosition=function(){var t=r.getScrollOffset(),e=t.scrollY,n=t.scrollX,i=r.getPaginationScrollY();Cg(r.spreadsheet.frozenRowGroup,r.cornerBBox.width-n,r.cornerBBox.height-i),Cg(r.spreadsheet.frozenColGroup,r.cornerBBox.width,r.cornerBBox.height-e-i),Cg(r.spreadsheet.frozenTrailingColGroup,r.cornerBBox.width,r.cornerBBox.height-e-i),Cg(r.spreadsheet.frozenTopGroup,r.cornerBBox.width,r.cornerBBox.height-i)},r.getTotalHeightForRange=function(t,e){if(t<0||e<0)return 0;for(var n=0,i=t;i<e+1;i++){n+=r.getCellHeight()}return n},r.getShadowFill=function(t){var e,n,i=In(r.cfg,"spreadsheet.theme.splitLine");return"l (".concat(t,") 0:").concat(null===(e=i.shadowColors)||void 0===e?void 0:e.left," 1:").concat(null===(n=i.shadowColors)||void 0===n?void 0:n.right)},r.renderFrozenGroupSplitLine=function(){var t=r.spreadsheet.options,e=t.frozenRowCount,n=t.frozenColCount,i=t.frozenTrailingColCount,o=t.frozenTrailingRowCount,a=r.layoutResult.colLeafNodes,s=r.spreadsheet.dataSet.getMultiData({}).length,l=In(r.cfg,"spreadsheet.theme.splitLine"),u={lineWidth:null==l?void 0:l.verticalBorderWidth,stroke:null==l?void 0:l.verticalBorderColor,opacity:null==l?void 0:l.verticalBorderColorOpacity},h={lineWidth:null==l?void 0:l.horizontalBorderWidth,stroke:null==l?void 0:l.horizontalBorderColor,opacity:null==l?void 0:l.horizontalBorderColorOpacity};if(n>0){var c=a.reduce((function(t,e,r){return r<n?t+e.width:t}),0);cf(r.foregroundGroup,{x1:c,x2:c,y1:r.cornerBBox.height,y2:r.panelBBox.maxY},Es({},u)),l.showShadow&&r.foregroundGroup.addShape("rect",{attrs:{x:c,y:r.cornerBBox.height,width:l.shadowWidth,height:r.panelBBox.maxY-r.cornerBBox.height,fill:r.getShadowFill(0)}})}if(e>0){var d=r.cornerBBox.height+r.getTotalHeightForRange(0,e-1);cf(r.foregroundGroup,{x1:0,x2:r.panelBBox.width,y1:d,y2:d},Es({},h)),l.showShadow&&r.foregroundGroup.addShape("rect",{attrs:{x:0,y:d,width:r.panelBBox.width,height:l.shadowWidth,fill:r.getShadowFill(90)}})}if(i>0){var p=a.reduceRight((function(t,e,n){return n>=a.length-i?t+e.width:t}),0);c=r.panelBBox.width-p;cf(r.foregroundGroup,{x1:c,x2:c,y1:r.cornerBBox.height,y2:r.panelBBox.maxY},Es({},u)),l.showShadow&&r.foregroundGroup.addShape("rect",{attrs:{x:c-l.shadowWidth,y:r.cornerBBox.height,width:l.shadowWidth,height:r.panelBBox.maxY-r.cornerBBox.height,fill:r.getShadowFill(180)}})}if(o>0){d=r.panelBBox.maxY-r.getTotalHeightForRange(s-o,s-1);cf(r.foregroundGroup,{x1:0,x2:r.panelBBox.width,y1:d,y2:d},Es({},h)),l.showShadow&&r.foregroundGroup.addShape("rect",{attrs:{x:0,y:d-l.shadowWidth,width:r.panelBBox.width,height:l.shadowWidth,fill:r.getShadowFill(270)}})}},r.renderFrozenPanelCornerGroup=function(){var e=r.spreadsheet.options,n=function(e,n,r){for(var i,o=e.frozenColCount,a=e.frozenRowCount,s=e.frozenTrailingColCount,l=e.frozenTrailingRowCount,u=((i={})[t.FrozenCellType.TOP]=[],i[t.FrozenCellType.BOTTOM]=[],i),h=0;h<o;h++){for(var c=r.start;c<r.start+a;c++)u[t.FrozenCellType.TOP].push({x:h,y:c});if(l>0)for(c=0;c<l;c++){var d=r.end-c;u[t.FrozenCellType.BOTTOM].push({x:h,y:d})}}for(h=0;h<s;h++){var p=n-1-h;for(c=r.start;c<r.start+a;c++)u[t.FrozenCellType.TOP].push({x:p,y:c});if(l>0)for(c=0;c<l;c++)d=r.end-c,u[t.FrozenCellType.BOTTOM].push({x:p,y:d})}return u}({frozenRowCount:e.frozenRowCount,frozenColCount:e.frozenColCount,frozenTrailingRowCount:e.frozenTrailingRowCount,frozenTrailingColCount:e.frozenTrailingColCount},r.layoutResult.colLeafNodes.length,r.getCellRange());Object.keys(n).forEach((function(t){var e=n[t],i=r.spreadsheet[W[t]];i&&e.forEach((function(t){r.addFrozenCell(t.x,t.y,i)}))}))},r.addFrozenCell=function(t,e,n){var i=r.layoutResult.getCellMeta(e,t);if(i){var o=r.cfg.dataCell(i);n.add(o)}},r.addCell=function(e){var n=r.spreadsheet.options,i=n.frozenRowCount,o=n.frozenColCount,a=n.frozenTrailingRowCount,s=n.frozenTrailingColCount,l=r.layoutResult.colsHierarchy.getLeaves().length,u=r.getCellRange(),h=function(e,n,r,i){var o=n.frozenColCount,a=n.frozenRowCount,s=n.frozenTrailingColCount,l=n.frozenTrailingRowCount,u=e.colIndex,h=e.rowIndex;return gg(h,i.start,a)?t.FrozenCellType.ROW:yg(h,i.end,l)?t.FrozenCellType.TRAILING_ROW:fg(u,o)?t.FrozenCellType.COL:vg(u,s,r)?t.FrozenCellType.TRAILING_COL:t.FrozenCellType.SCROLL}(e.getMeta(),{frozenRowCount:i,frozenColCount:o,frozenTrailingRowCount:a,frozenTrailingColCount:s},l,u),c=W[h];c&&r.spreadsheet[c].add(e)};var i=r.spreadsheet;return i.on(t.S2Event.RANGE_SORT,(function(e){var n=e.sortKey,r=e.sortMethod,o=e.sortBy;Xa(i.dataCfg,"sortParams",[{sortFieldId:n,sortMethod:r,sortBy:o}]),i.setDataCfg(i.dataCfg),i.render(!0),i.emit(t.S2Event.RANGE_SORTED,i.dataSet.getDisplayDataSet())})),i.on(t.S2Event.RANGE_FILTER,(function(e){var n=!e.filteredValues||0===e.filteredValues.length,r=i.dataCfg.filterParams||[],o=r.findIndex((function(t){return t.filterKey===e.filterKey}));-1!==o?n?r.splice(o):r[o]=e:r.push(e),Xa(i.dataCfg,"filterParams",r),i.render(!0),i.emit(t.S2Event.RANGE_FILTERED,i.dataSet.getDisplayDataSet())})),r}return Ss(n,e),Object.defineProperty(n.prototype,"colCellTheme",{get:function(){return this.spreadsheet.theme.colCell.cell},enumerable:!1,configurable:!0}),n.prototype.calculateCornerBBox=function(){var t=this.layoutResult.colsHierarchy,e=Math.floor(t.height);this.cornerBBox=new iy(this),this.cornerBBox.height=e,this.cornerBBox.maxY=e},n.prototype.destroy=function(){e.prototype.destroy.call(this),this.spreadsheet.off(t.S2Event.RANGE_SORT),this.spreadsheet.off(t.S2Event.RANGE_FILTER)},n.prototype.saveInitColumnNodes=function(t){void 0===t&&(t=[]);var e=this.spreadsheet,n=e.store,r=e.dataCfg.fields.columns,i=void 0===r?[]:r,o=n.get("lastRenderedColumnFields"),a=o&&Ka(o)!==Ka(i);n.get("initColumnNodes")&&!a||(n.set("initColumnNodes",t),n.set("lastRenderedColumnFields",i))},n.prototype.doLayout=function(){var t=this,e=this.cfg,n=e.dataSet,r=e.spreadsheet,i=e.cellCfg,o=e.frozenTrailingColCount,a=e.frozenTrailingRowCount,s=new Is,l=vy({isRowHeader:!1,facetCfg:this.cfg}),u=l.leafNodes,c=l.hierarchy;this.saveInitColumnNodes(u),this.calculateNodesCoordinate(u,c);var d={colNodes:c.getNodes(),colsHierarchy:c,rowNodes:s.getNodes(),rowsHierarchy:s,rowLeafNodes:s.getLeaves(),colLeafNodes:u,getCellMeta:function(e,s){var l,c,d,p,f=t.getSeriesNumberWidth()>0,v=u[s],g=i.height+(null===(c=t.colCellTheme.padding)||void 0===c?void 0:c.top)+(null===(d=t.colCellTheme.padding)||void 0===d?void 0:d.bottom),y=t.getCellRange(),m=t.panelBBox.maxX,C=u.length,w=v.x,x=g*e;return yg(e,y.end,a)&&(x=t.panelBBox.maxY-(y.end+1-e)*g),vg(s,o,C)&&(w=m-u.slice(-(C-s)).reduce((function(t,e,n){return t+e.width}),0)),p=f&&v.field===h?e+1:n.getCellData({query:{col:v.field,rowIndex:e}}),{spreadsheet:r,x:w,y:x,width:v.width,height:g,data:(l={},l[v.field]=p,l),rowIndex:e,colIndex:s,isTotals:!1,colId:v.id,rowId:String(e),valueField:v.field,fieldValue:p,id:Uf(String(e),v.id)}},spreadsheet:r};return d},n.prototype.calculateNodesCoordinate=function(t,e){this.calculateColWidth(t),this.calculateColNodesCoordinate(t,e)},n.prototype.getAdaptiveColWidth=function(t){var e=this.cfg.cellCfg,n=t.length,r=this.getCanvasHW().width,i=Math.max(1,n);return Math.max(e.width,r/i)},n.prototype.calculateColWidth=function(e){var n,r=this.cfg,i=r.rowCfg,o=r.cellCfg;n=this.spreadsheet.getLayoutWidthType()!==t.LayoutWidthTypes.Compact?this.getAdaptiveColWidth(e):-1,i.width=n,o.width=n},n.prototype.getColNodeHeight=function(t){var e=this.cfg.colCfg;return Object.values(In(e,"heightByField"))[0]||e.height},n.prototype.calculateColNodesCoordinate=function(t,e){var n,r,i,o=(null===(i=this.spreadsheet)||void 0===i?void 0:i.options).frozenTrailingColCount,a=Os.blankNode(),s=e.getNodes();try{for(var l=bs(e.sampleNodesForAllLevels),u=l.next();!u.done;u=l.next()){var h=u.value;h.height=this.getColNodeHeight(h),e.height+=h.height}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}for(var c=0;c<s.length;c++){(p=s[c]).colIndex=c,p.x=a.x+a.width,p.width=this.calculateColLeafNodesWidth(p),a=p,p.y=0,p.height=this.getColNodeHeight(p),0===o&&Ns(this.cfg,null,p),e.width+=p.width}a=Os.blankNode();var d=this.getCanvasHW().width;if(d=d>=e.width?e.width:d,o>0)for(c=1;c<=s.length;c++){var p;(p=s[s.length-c]).colIndex>=t.length-o&&(p.colIndex===s.length-1?p.x=d-p.width:p.x=a.x-p.width,a=p),Ns(this.cfg,null,p)}},n.prototype.calculateColLeafNodesWidth=function(t){var e,n,r=this.cfg,i=r.cellCfg,o=r.colCfg,a=r.dataSet,s=r.spreadsheet,l=In(In(o,"widthByFieldValue"),"".concat(t.value),t.width);if(l)n=l;else if(-1===i.width){var u=a.getDisplayDataSet(),c=t.label,d=(null===(e=null==u?void 0:u.map((function(e){return"".concat(e[t.key])})))||void 0===e?void 0:e.slice(0,50))||[];d.push(c);var p=pa(d,(function(t){return mf(t)})),f=this.getSeriesNumberWidth(),v=s.theme.colCell.bolderText,g=s.theme.dataCell,y=g.text,m=g.cell;g.icon,Ys.getInstance().logger("Max Label In Col:",t.field,p),n=c===p?gf(p,v)+Eg(this.spreadsheet,t,s.theme.colCell):gf(p,y)+m.padding.left+m.padding.right,t.field===h&&(n=f)}else n=i.width;return n},n.prototype.getCellHeight=function(){var t,e;return this.cfg.cellCfg.height+(null===(t=this.colCellTheme.padding)||void 0===t?void 0:t.top)+(null===(e=this.colCellTheme.padding)||void 0===e?void 0:e.bottom)},n.prototype.getViewCellHeights=function(){var t=this.cfg.dataSet,e=this.getCellHeight();return{getTotalHeight:function(){return e*t.getDisplayDataSet().length},getCellOffsetY:function(t){if(t<=0)return 0;for(var n=0,r=0;r<t;r++)n+=e;return n},getTotalLength:function(){return t.getDisplayDataSet().length},getIndexRange:function(t,n){return{start:Math.floor(t/e),end:n%e==0?n/e-1:Math.floor(n/e)}}}},n.prototype.init=function(){e.prototype.init.call(this);var t=this.panelBBox,n=t.width,r=t.height;this.spreadsheet.panelGroup.setClip({type:"rect",attrs:{x:0,y:this.cornerBBox.height,width:n,height:r}})},n.prototype.getColHeader=function(){var t=this;if(!this.columnHeader){var e=this.panelBBox,n=e.x,r=e.width,i=e.height;return new my({width:r,height:this.cornerBBox.height,viewportWidth:r,viewportHeight:i,cornerWidth:this.cornerBBox.width,position:{x:n,y:0},data:this.layoutResult.colNodes,scrollContainsRowHeader:this.cfg.spreadsheet.isScrollContainsRowHeader(),formatter:function(e){return t.cfg.dataSet.getFieldFormatter(e)},sortParam:this.cfg.spreadsheet.store.get("sortParam"),spreadsheet:this.spreadsheet})}return this.columnHeader},n.prototype.render=function(){e.prototype.render.call(this),this.renderFrozenPanelCornerGroup(),this.initFrozenGroupPosition(),this.renderFrozenGroupSplitLine()},n.prototype.translateRelatedGroups=function(t,n,r){wg(this.spreadsheet.frozenRowGroup,this.cornerBBox.width-t),wg(this.spreadsheet.frozenTrailingRowGroup,this.cornerBBox.width-t),xg(this.spreadsheet.frozenColGroup,this.cornerBBox.height-n),xg(this.spreadsheet.frozenTrailingColGroup,this.cornerBBox.height-n),e.prototype.translateRelatedGroups.call(this,t,n,r)},n.prototype.calculateXYIndexes=function(t,e){var n=this.spreadsheet.options,r=n.frozenColCount,i=n.frozenRowCount,o=n.frozenTrailingColCount,a=n.frozenTrailingRowCount,s=this.layoutResult.colLeafNodes.length;return function(t,e,n,r){var i=e.frozenColCount,o=e.frozenRowCount,a=e.frozenTrailingColCount,s=e.frozenTrailingRowCount,l=Ls([],_s(t),!1);fg(l[0],i)&&(l[0]=i),vg(l[1],a,n)&&(l[1]=n-a-1),gg(l[2],r.start,o)&&(l[2]=r.start+o),yg(l[3],r.end,s)&&(l[3]=r.end-s);var u=Ls([],_s(l),!1);u[2]=r.start,u[3]=r.start+o-1;var h=Ls([],_s(l),!1);h[0]=0,h[1]=i-1;var c=Ls([],_s(l),!1);c[2]=r.end+1-s,c[3]=r.end;var d=Ls([],_s(l),!1);return d[0]=n-a,d[1]=n-1,{center:l,frozenRow:u,frozenCol:h,frozenTrailingCol:d,frozenTrailingRow:c}}(mg(t,e,this.viewCellWidths,this.viewCellHeights,this.panelBBox,this.getRealScrollX(this.cornerBBox.width)),{frozenColCount:r,frozenRowCount:i,frozenTrailingColCount:o,frozenTrailingRowCount:a},s,this.getCellRange())},n.prototype.clip=function(t,e){var n=this.getPaginationScrollY(),r=this.spreadsheet,i=r.frozenRowGroup,o=r.frozenColGroup,a=r.frozenTrailingColGroup,s=r.frozenTrailingRowGroup,l=r.panelScrollGroup,u=o.getBBox().width,h=i.getBBox().height,c=a.getBBox(),d=s.getBBox().height,p=this.panelBBox.width-u-a.getBBox().width,f=this.panelBBox.height-h-d;l.setClip({type:"rect",attrs:{x:t+u,y:e+h,width:p,height:f}}),i.setClip({type:"rect",attrs:{x:t+u,y:n,width:p,height:h}}),s.setClip({type:"rect",attrs:{x:t+u,y:s.getBBox().minY,width:p,height:d}}),o.setClip({type:"rect",attrs:{x:0,y:e+h,width:u,height:f}}),a.setClip({type:"rect",attrs:{x:c.minX,y:e+h,width:c.width,height:f}})},n}(hy),wy=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return Ss(n,e),n.prototype.getDataSet=function(t){var e=t.dataSet,n=t.hierarchyType;return e?e(this):"customTree"===n?new ny(this):new ty(this)},n.prototype.isPivotMode=function(){return!0},n.prototype.isTableMode=function(){return!1},n.prototype.isHierarchyTreeType=function(){var t=this.options.hierarchyType;return"tree"===t||"customTree"===t},n.prototype.isScrollContainsRowHeader=function(){return!this.isFrozenRowHeader()},n.prototype.isFrozenRowHeader=function(){var t;return null===(t=this.options)||void 0===t?void 0:t.frozenRowHeader},n.prototype.isValueInCols=function(){return this.dataSet.fields.valueInCols},n.prototype.clearDrillDownData=function(t,e){this.dataSet instanceof ty&&(this.dataSet.clearDrillDownData(t),e||(this.interaction.reset(),this.render(!1)))},n.prototype.getFacetCfgFromDataSetAndOptions=function(){var t=this,e=this.dataSet,n=e.fields,r=e.meta,i=this.options,o=i.style,a=i.dataCell;return Es(Es(Es(Es({},n),o),this.options),{meta:r,spreadsheet:this,dataSet:this.dataSet,dataCell:null!=a?a:function(e){return new jf(e,t)}})},n.prototype.buildFacet=function(){var t,e=this.getFacetCfgFromDataSetAndOptions();null===(t=this.facet)||void 0===t||t.destroy(),this.facet=new yy(e),this.facet.render()},n.prototype.bindEvents=function(){this.off(t.S2Event.ROW_CELL_COLLAPSE_TREE_ROWS),this.off(t.S2Event.LAYOUT_TREE_ROWS_COLLAPSE_ALL),this.on(t.S2Event.ROW_CELL_COLLAPSE_TREE_ROWS,this.handleRowCellCollapseTreeRows),this.on(t.S2Event.LAYOUT_TREE_ROWS_COLLAPSE_ALL,this.handleTreeRowsCollapseAll)},n.prototype.handleRowCellCollapseTreeRows=function(e){var n,r=e.id,i=e.isCollapsed,o={style:{collapsedRows:(n={},n[r]=i,n)}};this.emit(t.S2Event.LAYOUT_COLLAPSE_ROWS,{collapsedRows:o.style.collapsedRows}),this.setOptions(o),this.render(!1),this.emit(t.S2Event.LAYOUT_AFTER_COLLAPSE_ROWS,{collapsedRows:o.style.collapsedRows})},n.prototype.handleTreeRowsCollapseAll=function(t){var e={hierarchyCollapse:!t,style:{collapsedRows:{}}};this.setOptions(e),this.render(!1)},n.prototype.groupSortByMethod=function(t,e){var n=this.dataCfg.fields,r=n.rows,i=n.columns,o=this.isValueInCols()?bo(r):bo(i),a=e.query,s=e.value,l={sortFieldId:o,sortMethod:t,sortByMeasure:s,query:a},u=this.dataCfg.sortParams.filter((function(t){return(null==t?void 0:t.sortFieldId)!==o}));this.setDataCfg(Es(Es({},this.dataCfg),{sortParams:Ls(Ls([],_s(u),!1),[l],!1)})),this.render()},n.prototype.handleGroupSort=function(e,n){var r=this;e.stopPropagation(),this.interaction.addIntercepts([t.InterceptType.HOVER]);var i={onClick:function(t){var e=t.key;r.groupSortByMethod(e,n)},menus:ps.Sort};this.showTooltipWithInfo(e,[],{operator:i,onlyMenu:!0})},n}(Qg),xy=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return Ss(n,e),n.prototype.getDataSet=function(t){var e=t.dataSet;return e?e(this):new ey(this)},n.prototype.isPivotMode=function(){return!1},n.prototype.isTableMode=function(){return!0},n.prototype.isHierarchyTreeType=function(){return!1},n.prototype.isScrollContainsRowHeader=function(){return!1},n.prototype.isFrozenRowHeader=function(){return!1},n.prototype.clearDrillDownData=function(){},n.prototype.isValueInCols=function(){return!1},n.prototype.bindEvents=function(){},n.prototype.initPanelGroupChildren=function(){e.prototype.initPanelGroupChildren.call(this),this.frozenRowGroup=this.panelGroup.addGroup({name:v,zIndex:2}),this.frozenColGroup=this.panelGroup.addGroup({name:g,zIndex:2}),this.frozenTrailingRowGroup=this.panelGroup.addGroup({name:y,zIndex:2}),this.frozenTrailingColGroup=this.panelGroup.addGroup({name:m,zIndex:2}),this.frozenTopGroup=this.panelGroup.addGroup({name:C,zIndex:2}),this.frozenBottomGroup=this.panelGroup.addGroup({name:w,zIndex:2})},n.prototype.getFacetCfgFromDataSetAndOptions=function(){var t=this,e=this.dataSet,n=e.fields,r=e.meta,i=this.options,o=i.style,a=i.dataCell;return Es(Es(Es(Es({},n),o),this.options),{meta:r,spreadsheet:this,dataSet:this.dataSet,dataCell:null!=a?a:function(e){return t.options.showSeriesNumber&&0===e.colIndex?new Rg(e,t):new Ig(e,t)}})},n.prototype.buildFacet=function(){var t,e=this.getFacetCfgFromDataSetAndOptions();null===(t=this.facet)||void 0===t||t.destroy(),this.facet=new Cy(e),this.facet.render()},n.prototype.clearFrozenGroups=function(){this.frozenRowGroup.set("children",[]),this.frozenColGroup.set("children",[]),this.frozenTrailingRowGroup.set("children",[]),this.frozenTrailingColGroup.set("children",[]),this.frozenTopGroup.set("children",[]),this.frozenBottomGroup.set("children",[])},n.prototype.destroy=function(){e.prototype.destroy.call(this),this.clearFrozenGroups()},n.prototype.handleGroupSort=function(e,n){var r=this;e.stopPropagation(),this.interaction.addIntercepts([t.InterceptType.HOVER]);var i={onClick:function(t){var e,i=t.key,o=n.field,a=[];r.dataCfg.sortParams.forEach((function(t){(null==t?void 0:t.sortFieldId)!==o?a.push(t):e=t}));var s=Es(Es({},e||{}),{sortFieldId:o,sortMethod:i});r.setDataCfg(Es(Es({},r.dataCfg),{sortParams:Ls(Ls([],_s(a),!1),[s],!1)})),r.render()},menus:ps.TableSort};this.showTooltipWithInfo(e,[],{operator:i,onlyMenu:!0})},n}(Qg);t.BACK_GROUND_GROUP_CONTAINER_Z_INDEX=0,t.BaseCell=Gf,t.BaseDataSet=Jg,t.BaseEvent=Mg,t.BaseTooltip=Zg,t.BrushSelection=Fg,t.CORNER_MAX_WIDTH_RATIO=.5,t.ColCell=Jv,t.ColHeader=Yg,t.CornerCell=tg,t.CornerHeader=Vg,t.CustomTreePivotDataSet=ny,t.DEBUG_HEADER_LAYOUT=Gs,t.DEBUG_TRANSFORM_DATA=Hs,t.DEBUG_VIEW_RENDER=Ws,t.DEFAULT_DATA_CONFIG=z,t.DEFAULT_OPTIONS=Q,t.DEFAULT_STYLE=Z,t.DEFAULT_VALUE_RANGES=k,t.DataCell=jf,t.DataCellClick=Ag,t.DataCellMultiSelection=Hg,t.DebuggerUtil=Ys,t.EMPTY_PLACEHOLDER="-",t.EXTRA_FIELD=l,t.EventController=kg,t.FONT_FAMILY=tt,t.FRONT_GROUND_GROUP_BRUSH_SELECTION_Z_INDEX=5,t.FRONT_GROUND_GROUP_COL_FROZEN_Z_INDEX=4,t.FRONT_GROUND_GROUP_COL_SCROLL_Z_INDEX=3,t.FRONT_GROUND_GROUP_CONTAINER_Z_INDEX=3,t.Frame=Xg,t.FrozenCellGroupMap=W,t.GuiIcon=$p,t.HORIZONTAL_RESIZE_AREA_KEY_PRE=R,t.HOVER_FOCUS_TIME=800,t.Hierarchy=Is,t.HoverEvent=Pg,t.ID_SEPARATOR=A,t.IMAGE=D,t.INTERACTION_STATE_INFO_KEY=q,t.KEY_COL_REAL_WIDTH_INFO="col-real-width-info",t.KEY_GROUP_BACK_GROUND=c,t.KEY_GROUP_COL_FROZEN=L,t.KEY_GROUP_COL_FROZEN_TRAILING=O,t.KEY_GROUP_COL_HORIZONTAL_RESIZE_AREA="colHorizontalResizeAreaGroup",t.KEY_GROUP_COL_RESIZE_AREA=T,t.KEY_GROUP_COL_SCROLL=_,t.KEY_GROUP_CORNER_RESIZE_AREA=E,t.KEY_GROUP_FORE_GROUND=d,t.KEY_GROUP_FROZEN_COL_RESIZE_AREA=b,t.KEY_GROUP_PANEL_FROZEN_BOTTOM=w,t.KEY_GROUP_PANEL_FROZEN_COL=g,t.KEY_GROUP_PANEL_FROZEN_ROW=v,t.KEY_GROUP_PANEL_FROZEN_TOP=C,t.KEY_GROUP_PANEL_FROZEN_TRAILING_COL=m,t.KEY_GROUP_PANEL_FROZEN_TRAILING_ROW=y,t.KEY_GROUP_PANEL_GROUND=p,t.KEY_GROUP_PANEL_SCROLL=f,t.KEY_GROUP_ROW_INDEX_RESIZE_AREA=S,t.KEY_GROUP_ROW_RESIZE_AREA=x,t.KEY_SERIES_NUMBER_NODE=I,t.MINI_BAR_CHART_HEIGHT=12,t.MIN_CELL_HEIGHT=16,t.MIN_CELL_WIDTH=28,t.MIN_SCROLL_BAR_HEIGHT=32,t.MergedCell=Xf,t.MergedCellsClick=Bg,t.Node=Os,t.PADDING_DOWN=2,t.PADDING_LEFT=3,t.PADDING_RIGHT=1,t.PADDING_TOP=0,t.PALETTE_MAP=J,t.PANEL_GROUP_FROZEN_GROUP_Z_INDEX=2,t.PANEL_GROUP_GROUP_CONTAINER_Z_INDEX=1,t.PANEL_GROUP_HOVER_BOX_GROUP_Z_INDEX=1,t.PANEL_GROUP_SCROLL_GROUP_Z_INDEX=1,t.PRECISION=16,t.PivotDataSet=ty,t.PivotSheet=wy,t.RESIZE_END_GUIDE_LINE_ID=vs,t.RESIZE_MASK_ID=gs,t.RESIZE_START_GUIDE_LINE_ID=fs,t.ROOT_BEGINNING_REGEX=B,t.ROOT_ID=M,t.RootInteraction=$g,t.RowCell=pg,t.RowColumnClick=Dg,t.RowColumnResize=Gg,t.RowHeader=Ug,t.RowTextClick=Ng,t.S2_PREFIX_CLS=N,t.SERIES_NUMBER_FIELD=h,t.SHAPE_ATTRS_MAP=$,t.SHAPE_STYLE_MAP=K,t.SeriesNumberHeader=jg,t.SpreadSheet=Qg,t.Store=qp,t.TABLE_COL_HORIZONTAL_RESIZE_AREA_KEY="table-col-horizontal-resize-area",t.TOOLTIP_CONTAINER_CLS=hs,t.TOOLTIP_OPERATION_PREFIX_CLS=cs,t.TOOLTIP_OPERATOR_MENUS=ps,t.TOOLTIP_POSITION_OFFSET=ds,t.TOOLTIP_PREFIX_CLS=us,t.TOTAL_VALUE=u,t.TableColCell=Lg,t.TableCornerCell=Og,t.TableDataCell=Ig,t.TableDataSet=ey,t.TableRowCell=Rg,t.TableSheet=xy,t.VALUE_FIELD=s,t.VALUE_RANGES_KEY=P,t.auto=function(e,n,r){if(void 0===n&&(n=2),void 0===r&&(r=of[t.Lang]||of.zh_CN),"number"!=typeof e||ia(i=e)&&i!=+i)return"";for(var i,o,a=e,s=_s(r,2),l=s[0],u=s[1],h=0,c=!0;c;)a>=(o=u[h])&&h<l.length?a/=o:c=!1,h+=1;var d=(a=parseFloat(a.toFixed(n)))>=1e3?a.toLocaleString("en"):"".concat(a);return 0===h?d:"".concat(d," ").concat(l[h-1])},t.buildTableHierarchy=Fs,t.clearState=sv,t.copyData=function(t,e,n){var r,i,o,a,s,l,u=null===(s=null==t?void 0:t.facet)||void 0===s?void 0:s.layoutResult,h=u.rowsHierarchy,c=u.rowLeafNodes,d=u.colLeafNodes,p=u.getCellMeta,f=t.dataCfg.fields.valueInCols,v=h.sampleNodesForAllLevels.map((function(e){return t.dataSet.getFieldName(e.key)})),g=c.reduce((function(t,e){var n=e.query?Object.keys(e.query).length:0;return n>t?n:t}),0),y=[];if(na(d)&&!t.isPivotMode())y=[v];else{for(var m=Mi(d).map((function(t){for(var e=t,n=[];void 0!==e.level;)n.push(e.label),e=e.parent;return n})),C=da(m.map((function(t){return t.length}))),w=[],x=function(e){var n=m.map((function(t){return t.length<C?Ls(Ls([],_s(new Array(C-t.length)),!1),_s(t),!1):t})).map((function(t){return t[e]})).map((function(e){return t.dataSet.getFieldName(e)}));w.push(n)},S=C-1;S>=0;S-=1)x(S);y=w.map((function(t,e){var n;return e<w.length?(n=Array(g).fill("")).concat.apply(n,Ls([],_s(t),!1)):v.concat.apply(v,Ls([],_s(t),!1))}))}var E=y.map((function(t){return t.map((function(t){return Tf(t)})).join(e)})).join("\r\n"),T=[],b=0;if(t.isPivotMode()){var _=c.filter((function(t){return 0!==t.height}));try{for(var L=bs(_),O=L.next();!O.done;O=L.next()){var I=O.value;I.label=Za(null==I?void 0:I.label);var R=I.id.replace(B,"").split(A);R.length<b?R.push.apply(R,Ls([],_s(new Array(b-R.length)),!1)):b=R.length;var M=t.dataSet.getFieldName(bo(R));R[R.length-1]=M;var D=(null===(l=null==t?void 0:t.dataCfg)||void 0===l?void 0:l.fields).rows.length-R.length;for(S=0;S<D;S++)R.push("");try{for(var N=(o=void 0,bs(d)),P=N.next();!P.done;P=N.next()){var k=P.value;if(f){var z=p(I.rowIndex,k.colIndex);R.push(_f(z,t,n))}else{z=p(I.rowIndex,k.colIndex);R.push(Lf(z,t,n))}}}catch(t){o={error:t}}finally{try{P&&!P.done&&(a=N.return)&&a.call(N)}finally{if(o)throw o.error}}var F=R.map((function(t){return Tf(t)})).join(e);T.push(F)}}catch(t){r={error:t}}finally{try{O&&!O.done&&(i=L.return)&&i.call(L)}finally{if(r)throw r.error}}}else T=function(t,e,n){var r,i,o,a=t.dataSet.getDisplayDataSet(),s=(null===(o=t.dataCfg)||void 0===o?void 0:o.fields).columns,l=[],u=function(r,i){var o=[];o=n?s.map((function(e){return Tf(t.dataSet.getFieldFormatter(e)(i[e]))})):s.map((function(t){return Tf(i[t])})),t.options.showSeriesNumber&&(o=[Tf(r+1)].concat(o)),l.push(o.join(e))};try{for(var h=bs(a.entries()),c=h.next();!c.done;c=h.next()){var d=_s(c.value,2);u(d[0],d[1])}}catch(t){r={error:t}}finally{try{c&&!c.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}return l}(t,e,n);return[E].concat(T).join("\r\n")},t.copyToClipboard=bf,t.customMerge=uv,t.download=function(t,e){try{var n=document.createElement("a");n.download="".concat(e,".csv");var r=new Blob(["\ufeff".concat(t)],{type:"text/csv;charset=utf-8"});n.href=URL.createObjectURL(r),n.click(),URL.revokeObjectURL(n.href)}catch(t){console.error(t)}},t.drawObjectText=Ef,t.generateId=As,t.getActiveCellsInfo=ev,t.getActiveCellsTooltipData=Mv,t.getActiveHoverRowColCells=Bf,t.getAutoAdjustPosition=fv,t.getBaseCellData=function(t){var e,n,r,i,o=null===(r=null===(n=null===(e=t.target)||void 0===e?void 0:e.attrs)||void 0===n?void 0:n.appendInfo)||void 0===r?void 0:r.cellData,a=t.target.get("parent");return{target:a,viewMeta:(null===(i=null==a?void 0:a.getMeta)||void 0===i?void 0:i.call(a))||o,event:t}},t.getCellMeta=av,t.getClassNameWithPrefix=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"".concat(N,"-").concat(t.join("-"))},t.getContentArea=Df,t.getDataCellId=Uf,t.getDataState=wf,t.getDataSumByField=pv,t.getDetailList=Ev,t.getEllipsisText=Cf,t.getEllipsisTextInner=yf,t.getFieldFormatter=Cv,t.getFieldList=xv,t.getFriendlyVal=mv,t.getHeadInfo=Sv,t.getIcon=Xs,t.getInvisibleInfo=Qf,t.getListItem=wv,t.getMaxTextWidth=Pf,t.getMergedQuery=gv,t.getNextEdge=qf,t.getPolygonPoints=Zf,t.getRectangleEdges=Kf,t.getSafetyDataConfig=hv,t.getSafetyOptions=cv,t.getSelectedCellIndexes=_v,t.getSelectedCellsData=Lv,t.getSelectedData=Mf,t.getSelectedValueFields=function(t,e){return ts(t.map((function(t){return In(t,e)})))},t.getSummaries=Ov,t.getSummaryName=Tv,t.getTempMergedCell=tv,t.getTextAndFollowingIconPosition=zf,t.getTextAndIconPositionWhenHorizontalScrolling=Hf,t.getTextPosition=Ff,t.getTheme=ws,t.getTooltipData=Iv,t.getTooltipDefaultOptions=vv,t.getTooltipOptions=Bv,t.getTooltipOptionsByCellType=Av,t.getTwoDimData=Rf,t.getVerticalPosition=kf,t.getVisibleInfo=Jf,t.handleDataItem=Wf,t.i18n=ls,t.includeCell=Yf,t.isHoverDataInSelectedData=function(t,e){return function(t,e,n){var r=vt(t)?Ni:$a;return n&&be(t,e,n)&&(e=void 0),r(t,ro(e))}(t,(function(t){return ra(t,e)}))},t.isIPhoneX=ms,t.isMobile=ys,t.isWindows=Cs,t.keyEqualTo=Of,t.measureTextWidth=gf,t.measureTextWidthRoughly=mf,t.mergeCellInfo=Rv,t.mergeCells=nv,t.processCopyData=If,t.registerIcon=js,t.removeUnmergedCellsInfo=rv,t.renderIcon=pf,t.renderLine=cf,t.renderPolygon=uf,t.renderRect=lf,t.renderText=hf,t.renderTreeIcon=ff,t.setContainerStyle=yv,t.setEVALocale=function(e){t.Lang=ss(e)?"en_US":"zh_CN",as=ss(e)?rs:ns},t.setState=lv,t.splitTotal=rf,t.transformCustomTreeItems=sf,t.unique=$f,t.unmergeCell=iv,t.updateFillOpacity=function(t,e){df(t,"fillOpacity",e)},t.updateMergedCells=ov,t.updateShapeAttr=df,t.updateStrokeOpacity=function(t,e){df(t,"strokeOpacity",e)},Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=index.min.js.map
